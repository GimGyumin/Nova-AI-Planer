import{r as i,j as e}from"./index-f29f1757.js";const u=({onClose:n})=>{const[a,j]=i.useState(()=>{try{return JSON.parse(localStorage.getItem("research_reflection_logs")||"[]")}catch{return[]}}),[c,d]=i.useState(!1),h=()=>{d(!0);const s=["날짜,과제명,완료여부,지연행동,집중도,피로감,기타관찰",...a.map(o=>[o.date,o.taskName,o.completed,'"'+o.procrastination.replace(/"/g,'""')+'"',o.focus,o.fatigue,'"'+o.notes.replace(/"/g,'""')+'"'].join(","))].join(`
`),t=new Blob([s],{type:"text/csv"}),x=URL.createObjectURL(t),l=document.createElement("a");l.href=x,l.download="reflection_logs.csv",l.click(),setTimeout(()=>{URL.revokeObjectURL(x),d(!1)},500)},r=s=>{if(!window.confirm("정말 삭제하시겠습니까?"))return;const t=a.slice();t.splice(s,1),j(t),localStorage.setItem("research_reflection_logs",JSON.stringify(t))};return e.jsxs("div",{style:{padding:24,minWidth:320,maxWidth:500},children:[e.jsx("h3",{style:{marginBottom:16},children:"설정 · 데이터 관리"}),e.jsx("button",{onClick:h,disabled:c,style:{width:"100%",marginBottom:16,background:"var(--primary-color)",color:"#fff",borderRadius:8,padding:10,border:"none"},children:"CSV로 내보내기"}),e.jsx("div",{style:{maxHeight:300,overflowY:"auto",marginBottom:16},children:e.jsxs("table",{style:{width:"100%",fontSize:"0.95rem",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#f0f0f5"},children:[e.jsx("th",{children:"날짜"}),e.jsx("th",{children:"과제명"}),e.jsx("th",{children:"완료"}),e.jsx("th",{children:"집중"}),e.jsx("th",{children:"피로"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,style:{textAlign:"center",color:"#888",padding:16},children:"저장된 기록이 없습니다."})}):a.map((s,t)=>e.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[e.jsx("td",{children:s.date}),e.jsx("td",{children:s.taskName}),e.jsx("td",{children:s.completed}),e.jsx("td",{children:s.focus}),e.jsx("td",{children:s.fatigue}),e.jsx("td",{children:e.jsx("button",{onClick:()=>r(t),style:{color:"var(--danger-color)",background:"none",border:"none",cursor:"pointer"},children:"삭제"})})]},t))})]})}),e.jsx("button",{onClick:n,style:{width:"100%",background:"#eee",borderRadius:8,padding:10,border:"none"},children:"닫기"})]})},g={date:new Date().toISOString().slice(0,10),taskName:"",completed:"N",procrastination:"",focus:3,fatigue:3,notes:""},m=()=>{const[n,a]=i.useState(g),[j,c]=i.useState(!1),[d,h]=i.useState(!1),r=t=>{const{name:x,value:l}=t.target;a(o=>({...o,[x]:l}))},s=()=>{const t=JSON.parse(localStorage.getItem("research_reflection_logs")||"[]");t.push(n),localStorage.setItem("research_reflection_logs",JSON.stringify(t)),c(!0),setTimeout(()=>c(!1),1500),a({...g,date:new Date().toISOString().slice(0,10)})};return e.jsxs("div",{style:{maxWidth:480,margin:"2rem auto",padding:24,border:"1px solid #ccc",borderRadius:12,background:"#fafbfc",position:"relative"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h2",{children:"연구용 자기 성찰 기록지"}),e.jsx("button",{onClick:()=>h(!0),style:{background:"none",border:"none",color:"var(--primary-color)",fontWeight:600,fontSize:18,cursor:"pointer"},children:"설정"})]}),d&&e.jsx("div",{className:"modal-backdrop",style:{zIndex:2e3},children:e.jsx("div",{className:"modal-content modal-content-small",style:{minWidth:320,maxWidth:500},children:e.jsx(u,{onClose:()=>h(!1)})})}),e.jsxs("label",{children:["날짜",e.jsx("br",{}),e.jsx("input",{type:"date",name:"date",value:n.date,onChange:r,style:{width:"100%"}})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("label",{children:["과제명",e.jsx("br",{}),e.jsx("input",{type:"text",name:"taskName",value:n.taskName,onChange:r,style:{width:"100%"}})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("label",{children:["과제 완료 여부",e.jsx("br",{}),e.jsxs("select",{name:"completed",value:n.completed,onChange:r,style:{width:"100%"},children:[e.jsx("option",{value:"Y",children:"Y"}),e.jsx("option",{value:"N",children:"N"})]})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("label",{children:["지연 행동(서술)",e.jsx("br",{}),e.jsx("textarea",{name:"procrastination",value:n.procrastination,onChange:r,rows:2,style:{width:"100%"}})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("label",{children:["집중도 (1~5)",e.jsx("br",{}),e.jsx("input",{type:"number",name:"focus",min:1,max:5,value:n.focus,onChange:r,style:{width:"100%"}})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("label",{children:["피로감 (1~5)",e.jsx("br",{}),e.jsx("input",{type:"number",name:"fatigue",min:1,max:5,value:n.fatigue,onChange:r,style:{width:"100%"}})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("label",{children:["기타 관찰",e.jsx("br",{}),e.jsx("textarea",{name:"notes",value:n.notes,onChange:r,rows:2,style:{width:"100%"}})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{onClick:s,style:{width:"100%",padding:10,background:"#1976d2",color:"#fff",border:"none",borderRadius:6},children:"저장"}),j&&e.jsx("div",{style:{color:"green",marginTop:10},children:"저장되었습니다!"})]})};export{m as default};
