(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function ET(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var e_={exports:{}},_a={},t_={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fs=Symbol.for("react.element"),TT=Symbol.for("react.portal"),ST=Symbol.for("react.fragment"),CT=Symbol.for("react.strict_mode"),wT=Symbol.for("react.profiler"),IT=Symbol.for("react.provider"),AT=Symbol.for("react.context"),RT=Symbol.for("react.forward_ref"),xT=Symbol.for("react.suspense"),PT=Symbol.for("react.memo"),kT=Symbol.for("react.lazy"),wh=Symbol.iterator;function NT(t){return t===null||typeof t!="object"?null:(t=wh&&t[wh]||t["@@iterator"],typeof t=="function"?t:null)}var n_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},r_=Object.assign,i_={};function Oi(t,e,n){this.props=t,this.context=e,this.refs=i_,this.updater=n||n_}Oi.prototype.isReactComponent={};Oi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Oi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function o_(){}o_.prototype=Oi.prototype;function ud(t,e,n){this.props=t,this.context=e,this.refs=i_,this.updater=n||n_}var cd=ud.prototype=new o_;cd.constructor=ud;r_(cd,Oi.prototype);cd.isPureReactComponent=!0;var Ih=Array.isArray,s_=Object.prototype.hasOwnProperty,dd={current:null},l_={key:!0,ref:!0,__self:!0,__source:!0};function a_(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)s_.call(e,r)&&!l_.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),f=0;f<l;f++)c[f]=arguments[f+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:fs,type:t,key:o,ref:s,props:i,_owner:dd.current}}function MT(t,e){return{$$typeof:fs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fd(t){return typeof t=="object"&&t!==null&&t.$$typeof===fs}function DT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ah=/\/+/g;function lu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?DT(""+t.key):e.toString(36)}function hl(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case fs:case TT:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+lu(s,0):r,Ih(i)?(n="",t!=null&&(n=t.replace(Ah,"$&/")+"/"),hl(i,e,n,"",function(f){return f})):i!=null&&(fd(i)&&(i=MT(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Ah,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Ih(t))for(var l=0;l<t.length;l++){o=t[l];var c=r+lu(o,l);s+=hl(o,e,n,c,i)}else if(c=NT(t),typeof c=="function")for(t=c.call(t),l=0;!(o=t.next()).done;)o=o.value,c=r+lu(o,l++),s+=hl(o,e,n,c,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function $s(t,e,n){if(t==null)return t;var r=[],i=0;return hl(t,r,"","",function(o){return e.call(n,o,i++)}),r}function VT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vt={current:null},pl={transition:null},LT={ReactCurrentDispatcher:vt,ReactCurrentBatchConfig:pl,ReactCurrentOwner:dd};function u_(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:$s,forEach:function(t,e,n){$s(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $s(t,function(){e++}),e},toArray:function(t){return $s(t,function(e){return e})||[]},only:function(t){if(!fd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=Oi;ae.Fragment=ST;ae.Profiler=wT;ae.PureComponent=ud;ae.StrictMode=CT;ae.Suspense=xT;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LT;ae.act=u_;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=r_({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=dd.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)s_.call(e,c)&&!l_.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var f=0;f<c;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:fs,type:t.type,key:i,ref:o,props:r,_owner:s}};ae.createContext=function(t){return t={$$typeof:AT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:IT,_context:t},t.Consumer=t};ae.createElement=a_;ae.createFactory=function(t){var e=a_.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:RT,render:t}};ae.isValidElement=fd;ae.lazy=function(t){return{$$typeof:kT,_payload:{_status:-1,_result:t},_init:VT}};ae.memo=function(t,e){return{$$typeof:PT,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=pl.transition;pl.transition={};try{t()}finally{pl.transition=e}};ae.unstable_act=u_;ae.useCallback=function(t,e){return vt.current.useCallback(t,e)};ae.useContext=function(t){return vt.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return vt.current.useDeferredValue(t)};ae.useEffect=function(t,e){return vt.current.useEffect(t,e)};ae.useId=function(){return vt.current.useId()};ae.useImperativeHandle=function(t,e,n){return vt.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return vt.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return vt.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return vt.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return vt.current.useReducer(t,e,n)};ae.useRef=function(t){return vt.current.useRef(t)};ae.useState=function(t){return vt.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return vt.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return vt.current.useTransition()};ae.version="18.3.1";t_.exports=ae;var O=t_.exports;const Hu=ET(O);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UT=O,FT=Symbol.for("react.element"),bT=Symbol.for("react.fragment"),BT=Object.prototype.hasOwnProperty,OT=UT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GT={key:!0,ref:!0,__self:!0,__source:!0};function c_(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)BT.call(e,r)&&!GT.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:FT,type:t,key:o,ref:s,props:i,_owner:OT.current}}_a.Fragment=bT;_a.jsx=c_;_a.jsxs=c_;e_.exports=_a;var _=e_.exports,$u={},d_={exports:{}},Lt={},f_={exports:{}},h_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,K){var ne=H.length;H.push(K);e:for(;0<ne;){var X=ne-1>>>1,ce=H[X];if(0<i(ce,K))H[X]=K,H[ne]=ce,ne=X;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var K=H[0],ne=H.pop();if(ne!==K){H[0]=ne;e:for(var X=0,ce=H.length,ge=ce>>>1;X<ge;){var ke=2*(X+1)-1,ln=H[ke],je=ke+1,an=H[je];if(0>i(ln,ne))je<ce&&0>i(an,ln)?(H[X]=an,H[je]=ne,X=je):(H[X]=ln,H[ke]=ne,X=ke);else if(je<ce&&0>i(an,ne))H[X]=an,H[je]=ne,X=je;else break e}}return K}function i(H,K){var ne=H.sortIndex-K.sortIndex;return ne!==0?ne:H.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],f=[],h=1,p=null,g=3,E=!1,I=!1,N=!1,V=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(H){for(var K=n(f);K!==null;){if(K.callback===null)r(f);else if(K.startTime<=H)r(f),K.sortIndex=K.expirationTime,e(c,K);else break;K=n(f)}}function D(H){if(N=!1,x(H),!I)if(n(c)!==null)I=!0,z(b);else{var K=n(f);K!==null&&me(D,K.startTime-H)}}function b(H,K){I=!1,N&&(N=!1,A(v),v=-1),E=!0;var ne=g;try{for(x(K),p=n(c);p!==null&&(!(p.expirationTime>K)||H&&!k());){var X=p.callback;if(typeof X=="function"){p.callback=null,g=p.priorityLevel;var ce=X(p.expirationTime<=K);K=t.unstable_now(),typeof ce=="function"?p.callback=ce:p===n(c)&&r(c),x(K)}else r(c);p=n(c)}if(p!==null)var ge=!0;else{var ke=n(f);ke!==null&&me(D,ke.startTime-K),ge=!1}return ge}finally{p=null,g=ne,E=!1}}var F=!1,w=null,v=-1,C=5,R=-1;function k(){return!(t.unstable_now()-R<C)}function M(){if(w!==null){var H=t.unstable_now();R=H;var K=!0;try{K=w(!0,H)}finally{K?P():(F=!1,w=null)}}else F=!1}var P;if(typeof S=="function")P=function(){S(M)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,ue=Z.port2;Z.port1.onmessage=M,P=function(){ue.postMessage(null)}}else P=function(){V(M,0)};function z(H){w=H,F||(F=!0,P())}function me(H,K){v=V(function(){H(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){I||E||(I=!0,z(b))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(H){switch(g){case 1:case 2:case 3:var K=3;break;default:K=g}var ne=g;g=K;try{return H()}finally{g=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,K){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ne=g;g=H;try{return K()}finally{g=ne}},t.unstable_scheduleCallback=function(H,K,ne){var X=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?X+ne:X):ne=X,H){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=ne+ce,H={id:h++,callback:K,priorityLevel:H,startTime:ne,expirationTime:ce,sortIndex:-1},ne>X?(H.sortIndex=ne,e(f,H),n(c)===null&&H===n(f)&&(N?(A(v),v=-1):N=!0,me(D,ne-X))):(H.sortIndex=ce,e(c,H),I||E||(I=!0,z(b))),H},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(H){var K=g;return function(){var ne=g;g=K;try{return H.apply(this,arguments)}finally{g=ne}}}})(h_);f_.exports=h_;var qT=f_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HT=O,Vt=qT;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p_=new Set,qo={};function qr(t,e){xi(t,e),xi(t+"Capture",e)}function xi(t,e){for(qo[t]=e,t=0;t<e.length;t++)p_.add(e[t])}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zu=Object.prototype.hasOwnProperty,$T=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rh={},xh={};function zT(t){return zu.call(xh,t)?!0:zu.call(Rh,t)?!1:$T.test(t)?xh[t]=!0:(Rh[t]=!0,!1)}function WT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function JT(t,e,n,r){if(e===null||typeof e>"u"||WT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Et(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){lt[t]=new Et(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];lt[e]=new Et(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){lt[t]=new Et(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){lt[t]=new Et(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){lt[t]=new Et(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){lt[t]=new Et(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){lt[t]=new Et(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){lt[t]=new Et(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){lt[t]=new Et(t,5,!1,t.toLowerCase(),null,!1,!1)});var hd=/[\-:]([a-z])/g;function pd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hd,pd);lt[e]=new Et(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hd,pd);lt[e]=new Et(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hd,pd);lt[e]=new Et(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){lt[t]=new Et(t,1,!1,t.toLowerCase(),null,!1,!1)});lt.xlinkHref=new Et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){lt[t]=new Et(t,1,!1,t.toLowerCase(),null,!0,!0)});function md(t,e,n,r){var i=lt.hasOwnProperty(e)?lt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(JT(e,n,i,r)&&(n=null),r||i===null?zT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Mn=HT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zs=Symbol.for("react.element"),ni=Symbol.for("react.portal"),ri=Symbol.for("react.fragment"),gd=Symbol.for("react.strict_mode"),Wu=Symbol.for("react.profiler"),m_=Symbol.for("react.provider"),g_=Symbol.for("react.context"),_d=Symbol.for("react.forward_ref"),Ju=Symbol.for("react.suspense"),Ku=Symbol.for("react.suspense_list"),yd=Symbol.for("react.memo"),Gn=Symbol.for("react.lazy"),__=Symbol.for("react.offscreen"),Ph=Symbol.iterator;function fo(t){return t===null||typeof t!="object"?null:(t=Ph&&t[Ph]||t["@@iterator"],typeof t=="function"?t:null)}var Ve=Object.assign,au;function So(t){if(au===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);au=e&&e[1]||""}return`
`+au+t}var uu=!1;function cu(t,e){if(!t||uu)return"";uu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){r=f}t.call(e.prototype)}else{try{throw Error()}catch(f){r=f}t()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var c=`
`+i[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=l);break}}}finally{uu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?So(t):""}function KT(t){switch(t.tag){case 5:return So(t.type);case 16:return So("Lazy");case 13:return So("Suspense");case 19:return So("SuspenseList");case 0:case 2:case 15:return t=cu(t.type,!1),t;case 11:return t=cu(t.type.render,!1),t;case 1:return t=cu(t.type,!0),t;default:return""}}function Yu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ri:return"Fragment";case ni:return"Portal";case Wu:return"Profiler";case gd:return"StrictMode";case Ju:return"Suspense";case Ku:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case g_:return(t.displayName||"Context")+".Consumer";case m_:return(t._context.displayName||"Context")+".Provider";case _d:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yd:return e=t.displayName||null,e!==null?e:Yu(t.type)||"Memo";case Gn:e=t._payload,t=t._init;try{return Yu(t(e))}catch{}}return null}function YT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yu(e);case 8:return e===gd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function rr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function y_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function QT(t){var e=y_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ws(t){t._valueTracker||(t._valueTracker=QT(t))}function v_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=y_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ml(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Qu(t,e){var n=e.checked;return Ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function kh(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=rr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function E_(t,e){e=e.checked,e!=null&&md(t,"checked",e,!1)}function Xu(t,e){E_(t,e);var n=rr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ju(t,e.type,n):e.hasOwnProperty("defaultValue")&&ju(t,e.type,rr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Nh(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ju(t,e,n){(e!=="number"||Ml(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Co=Array.isArray;function mi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+rr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Zu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return Ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mh(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(Co(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:rr(n)}}function T_(t,e){var n=rr(e.value),r=rr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Dh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function S_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ec(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?S_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Js,C_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Js=Js||document.createElement("div"),Js.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Js.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ho(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ro={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XT=["Webkit","ms","Moz","O"];Object.keys(Ro).forEach(function(t){XT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ro[e]=Ro[t]})});function w_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ro.hasOwnProperty(t)&&Ro[t]?(""+e).trim():e+"px"}function I_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=w_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var jT=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tc(t,e){if(e){if(jT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function nc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rc=null;function vd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ic=null,gi=null,_i=null;function Vh(t){if(t=ms(t)){if(typeof ic!="function")throw Error(q(280));var e=t.stateNode;e&&(e=Sa(e),ic(t.stateNode,t.type,e))}}function A_(t){gi?_i?_i.push(t):_i=[t]:gi=t}function R_(){if(gi){var t=gi,e=_i;if(_i=gi=null,Vh(t),e)for(t=0;t<e.length;t++)Vh(e[t])}}function x_(t,e){return t(e)}function P_(){}var du=!1;function k_(t,e,n){if(du)return t(e,n);du=!0;try{return x_(t,e,n)}finally{du=!1,(gi!==null||_i!==null)&&(P_(),R_())}}function $o(t,e){var n=t.stateNode;if(n===null)return null;var r=Sa(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var oc=!1;if(Rn)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){oc=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{oc=!1}function ZT(t,e,n,r,i,o,s,l,c){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(h){this.onError(h)}}var xo=!1,Dl=null,Vl=!1,sc=null,e0={onError:function(t){xo=!0,Dl=t}};function t0(t,e,n,r,i,o,s,l,c){xo=!1,Dl=null,ZT.apply(e0,arguments)}function n0(t,e,n,r,i,o,s,l,c){if(t0.apply(this,arguments),xo){if(xo){var f=Dl;xo=!1,Dl=null}else throw Error(q(198));Vl||(Vl=!0,sc=f)}}function Hr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function N_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Lh(t){if(Hr(t)!==t)throw Error(q(188))}function r0(t){var e=t.alternate;if(!e){if(e=Hr(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Lh(i),t;if(o===r)return Lh(i),e;o=o.sibling}throw Error(q(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function M_(t){return t=r0(t),t!==null?D_(t):null}function D_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=D_(t);if(e!==null)return e;t=t.sibling}return null}var V_=Vt.unstable_scheduleCallback,Uh=Vt.unstable_cancelCallback,i0=Vt.unstable_shouldYield,o0=Vt.unstable_requestPaint,be=Vt.unstable_now,s0=Vt.unstable_getCurrentPriorityLevel,Ed=Vt.unstable_ImmediatePriority,L_=Vt.unstable_UserBlockingPriority,Ll=Vt.unstable_NormalPriority,l0=Vt.unstable_LowPriority,U_=Vt.unstable_IdlePriority,ya=null,mn=null;function a0(t){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(ya,t,void 0,(t.current.flags&128)===128)}catch{}}var nn=Math.clz32?Math.clz32:d0,u0=Math.log,c0=Math.LN2;function d0(t){return t>>>=0,t===0?32:31-(u0(t)/c0|0)|0}var Ks=64,Ys=4194304;function wo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ul(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=wo(l):(o&=s,o!==0&&(r=wo(o)))}else s=n&~i,s!==0?r=wo(s):o!==0&&(r=wo(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-nn(e),i=1<<n,r|=t[n],e&=~i;return r}function f0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function h0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-nn(o),l=1<<s,c=i[s];c===-1?(!(l&n)||l&r)&&(i[s]=f0(l,e)):c<=e&&(t.expiredLanes|=l),o&=~l}}function lc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function F_(){var t=Ks;return Ks<<=1,!(Ks&4194240)&&(Ks=64),t}function fu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function hs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-nn(e),t[e]=n}function p0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-nn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Td(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-nn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ye=0;function b_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var B_,Sd,O_,G_,q_,ac=!1,Qs=[],Jn=null,Kn=null,Yn=null,zo=new Map,Wo=new Map,Hn=[],m0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fh(t,e){switch(t){case"focusin":case"focusout":Jn=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":Yn=null;break;case"pointerover":case"pointerout":zo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wo.delete(e.pointerId)}}function po(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=ms(e),e!==null&&Sd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function g0(t,e,n,r,i){switch(e){case"focusin":return Jn=po(Jn,t,e,n,r,i),!0;case"dragenter":return Kn=po(Kn,t,e,n,r,i),!0;case"mouseover":return Yn=po(Yn,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return zo.set(o,po(zo.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Wo.set(o,po(Wo.get(o)||null,t,e,n,r,i)),!0}return!1}function H_(t){var e=wr(t.target);if(e!==null){var n=Hr(e);if(n!==null){if(e=n.tag,e===13){if(e=N_(n),e!==null){t.blockedOn=e,q_(t.priority,function(){O_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ml(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=uc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);rc=r,n.target.dispatchEvent(r),rc=null}else return e=ms(n),e!==null&&Sd(e),t.blockedOn=n,!1;e.shift()}return!0}function bh(t,e,n){ml(t)&&n.delete(e)}function _0(){ac=!1,Jn!==null&&ml(Jn)&&(Jn=null),Kn!==null&&ml(Kn)&&(Kn=null),Yn!==null&&ml(Yn)&&(Yn=null),zo.forEach(bh),Wo.forEach(bh)}function mo(t,e){t.blockedOn===e&&(t.blockedOn=null,ac||(ac=!0,Vt.unstable_scheduleCallback(Vt.unstable_NormalPriority,_0)))}function Jo(t){function e(i){return mo(i,t)}if(0<Qs.length){mo(Qs[0],t);for(var n=1;n<Qs.length;n++){var r=Qs[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Jn!==null&&mo(Jn,t),Kn!==null&&mo(Kn,t),Yn!==null&&mo(Yn,t),zo.forEach(e),Wo.forEach(e),n=0;n<Hn.length;n++)r=Hn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Hn.length&&(n=Hn[0],n.blockedOn===null);)H_(n),n.blockedOn===null&&Hn.shift()}var yi=Mn.ReactCurrentBatchConfig,Fl=!0;function y0(t,e,n,r){var i=ye,o=yi.transition;yi.transition=null;try{ye=1,Cd(t,e,n,r)}finally{ye=i,yi.transition=o}}function v0(t,e,n,r){var i=ye,o=yi.transition;yi.transition=null;try{ye=4,Cd(t,e,n,r)}finally{ye=i,yi.transition=o}}function Cd(t,e,n,r){if(Fl){var i=uc(t,e,n,r);if(i===null)Su(t,e,r,bl,n),Fh(t,r);else if(g0(i,t,e,n,r))r.stopPropagation();else if(Fh(t,r),e&4&&-1<m0.indexOf(t)){for(;i!==null;){var o=ms(i);if(o!==null&&B_(o),o=uc(t,e,n,r),o===null&&Su(t,e,r,bl,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Su(t,e,r,null,n)}}var bl=null;function uc(t,e,n,r){if(bl=null,t=vd(r),t=wr(t),t!==null)if(e=Hr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=N_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bl=t,null}function $_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(s0()){case Ed:return 1;case L_:return 4;case Ll:case l0:return 16;case U_:return 536870912;default:return 16}default:return 16}}var zn=null,wd=null,gl=null;function z_(){if(gl)return gl;var t,e=wd,n=e.length,r,i="value"in zn?zn.value:zn.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return gl=i.slice(t,1<r?1-r:void 0)}function _l(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xs(){return!0}function Bh(){return!1}function Ut(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Xs:Bh,this.isPropagationStopped=Bh,this}return Ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xs)},persist:function(){},isPersistent:Xs}),e}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Id=Ut(Gi),ps=Ve({},Gi,{view:0,detail:0}),E0=Ut(ps),hu,pu,go,va=Ve({},ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ad,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==go&&(go&&t.type==="mousemove"?(hu=t.screenX-go.screenX,pu=t.screenY-go.screenY):pu=hu=0,go=t),hu)},movementY:function(t){return"movementY"in t?t.movementY:pu}}),Oh=Ut(va),T0=Ve({},va,{dataTransfer:0}),S0=Ut(T0),C0=Ve({},ps,{relatedTarget:0}),mu=Ut(C0),w0=Ve({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),I0=Ut(w0),A0=Ve({},Gi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),R0=Ut(A0),x0=Ve({},Gi,{data:0}),Gh=Ut(x0),P0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},k0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},N0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function M0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=N0[t])?!!e[t]:!1}function Ad(){return M0}var D0=Ve({},ps,{key:function(t){if(t.key){var e=P0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_l(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?k0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ad,charCode:function(t){return t.type==="keypress"?_l(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_l(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),V0=Ut(D0),L0=Ve({},va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qh=Ut(L0),U0=Ve({},ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ad}),F0=Ut(U0),b0=Ve({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),B0=Ut(b0),O0=Ve({},va,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),G0=Ut(O0),q0=[9,13,27,32],Rd=Rn&&"CompositionEvent"in window,Po=null;Rn&&"documentMode"in document&&(Po=document.documentMode);var H0=Rn&&"TextEvent"in window&&!Po,W_=Rn&&(!Rd||Po&&8<Po&&11>=Po),Hh=" ",$h=!1;function J_(t,e){switch(t){case"keyup":return q0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function K_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ii=!1;function $0(t,e){switch(t){case"compositionend":return K_(e);case"keypress":return e.which!==32?null:($h=!0,Hh);case"textInput":return t=e.data,t===Hh&&$h?null:t;default:return null}}function z0(t,e){if(ii)return t==="compositionend"||!Rd&&J_(t,e)?(t=z_(),gl=wd=zn=null,ii=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return W_&&e.locale!=="ko"?null:e.data;default:return null}}var W0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!W0[t.type]:e==="textarea"}function Y_(t,e,n,r){A_(r),e=Bl(e,"onChange"),0<e.length&&(n=new Id("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ko=null,Ko=null;function J0(t){sy(t,0)}function Ea(t){var e=li(t);if(v_(e))return t}function K0(t,e){if(t==="change")return e}var Q_=!1;if(Rn){var gu;if(Rn){var _u="oninput"in document;if(!_u){var Wh=document.createElement("div");Wh.setAttribute("oninput","return;"),_u=typeof Wh.oninput=="function"}gu=_u}else gu=!1;Q_=gu&&(!document.documentMode||9<document.documentMode)}function Jh(){ko&&(ko.detachEvent("onpropertychange",X_),Ko=ko=null)}function X_(t){if(t.propertyName==="value"&&Ea(Ko)){var e=[];Y_(e,Ko,t,vd(t)),k_(J0,e)}}function Y0(t,e,n){t==="focusin"?(Jh(),ko=e,Ko=n,ko.attachEvent("onpropertychange",X_)):t==="focusout"&&Jh()}function Q0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ea(Ko)}function X0(t,e){if(t==="click")return Ea(e)}function j0(t,e){if(t==="input"||t==="change")return Ea(e)}function Z0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var on=typeof Object.is=="function"?Object.is:Z0;function Yo(t,e){if(on(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!zu.call(e,i)||!on(t[i],e[i]))return!1}return!0}function Kh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yh(t,e){var n=Kh(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kh(n)}}function j_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?j_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Z_(){for(var t=window,e=Ml();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ml(t.document)}return e}function xd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function eS(t){var e=Z_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&j_(n.ownerDocument.documentElement,n)){if(r!==null&&xd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Yh(n,o);var s=Yh(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var tS=Rn&&"documentMode"in document&&11>=document.documentMode,oi=null,cc=null,No=null,dc=!1;function Qh(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;dc||oi==null||oi!==Ml(r)||(r=oi,"selectionStart"in r&&xd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),No&&Yo(No,r)||(No=r,r=Bl(cc,"onSelect"),0<r.length&&(e=new Id("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=oi)))}function js(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var si={animationend:js("Animation","AnimationEnd"),animationiteration:js("Animation","AnimationIteration"),animationstart:js("Animation","AnimationStart"),transitionend:js("Transition","TransitionEnd")},yu={},ey={};Rn&&(ey=document.createElement("div").style,"AnimationEvent"in window||(delete si.animationend.animation,delete si.animationiteration.animation,delete si.animationstart.animation),"TransitionEvent"in window||delete si.transitionend.transition);function Ta(t){if(yu[t])return yu[t];if(!si[t])return t;var e=si[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ey)return yu[t]=e[n];return t}var ty=Ta("animationend"),ny=Ta("animationiteration"),ry=Ta("animationstart"),iy=Ta("transitionend"),oy=new Map,Xh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ur(t,e){oy.set(t,e),qr(e,[t])}for(var vu=0;vu<Xh.length;vu++){var Eu=Xh[vu],nS=Eu.toLowerCase(),rS=Eu[0].toUpperCase()+Eu.slice(1);ur(nS,"on"+rS)}ur(ty,"onAnimationEnd");ur(ny,"onAnimationIteration");ur(ry,"onAnimationStart");ur("dblclick","onDoubleClick");ur("focusin","onFocus");ur("focusout","onBlur");ur(iy,"onTransitionEnd");xi("onMouseEnter",["mouseout","mouseover"]);xi("onMouseLeave",["mouseout","mouseover"]);xi("onPointerEnter",["pointerout","pointerover"]);xi("onPointerLeave",["pointerout","pointerover"]);qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qr("onBeforeInput",["compositionend","keypress","textInput","paste"]);qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Io));function jh(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,n0(r,e,void 0,t),t.currentTarget=null}function sy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],c=l.instance,f=l.currentTarget;if(l=l.listener,c!==o&&i.isPropagationStopped())break e;jh(i,l,f),o=c}else for(s=0;s<r.length;s++){if(l=r[s],c=l.instance,f=l.currentTarget,l=l.listener,c!==o&&i.isPropagationStopped())break e;jh(i,l,f),o=c}}}if(Vl)throw t=sc,Vl=!1,sc=null,t}function we(t,e){var n=e[gc];n===void 0&&(n=e[gc]=new Set);var r=t+"__bubble";n.has(r)||(ly(e,t,2,!1),n.add(r))}function Tu(t,e,n){var r=0;e&&(r|=4),ly(n,t,r,e)}var Zs="_reactListening"+Math.random().toString(36).slice(2);function Qo(t){if(!t[Zs]){t[Zs]=!0,p_.forEach(function(n){n!=="selectionchange"&&(iS.has(n)||Tu(n,!1,t),Tu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zs]||(e[Zs]=!0,Tu("selectionchange",!1,e))}}function ly(t,e,n,r){switch($_(e)){case 1:var i=y0;break;case 4:i=v0;break;default:i=Cd}n=i.bind(null,e,n,t),i=void 0,!oc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Su(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;l!==null;){if(s=wr(l),s===null)return;if(c=s.tag,c===5||c===6){r=o=s;continue e}l=l.parentNode}}r=r.return}k_(function(){var f=o,h=vd(n),p=[];e:{var g=oy.get(t);if(g!==void 0){var E=Id,I=t;switch(t){case"keypress":if(_l(n)===0)break e;case"keydown":case"keyup":E=V0;break;case"focusin":I="focus",E=mu;break;case"focusout":I="blur",E=mu;break;case"beforeblur":case"afterblur":E=mu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Oh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=S0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=F0;break;case ty:case ny:case ry:E=I0;break;case iy:E=B0;break;case"scroll":E=E0;break;case"wheel":E=G0;break;case"copy":case"cut":case"paste":E=R0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=qh}var N=(e&4)!==0,V=!N&&t==="scroll",A=N?g!==null?g+"Capture":null:g;N=[];for(var S=f,x;S!==null;){x=S;var D=x.stateNode;if(x.tag===5&&D!==null&&(x=D,A!==null&&(D=$o(S,A),D!=null&&N.push(Xo(S,D,x)))),V)break;S=S.return}0<N.length&&(g=new E(g,I,null,n,h),p.push({event:g,listeners:N}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",g&&n!==rc&&(I=n.relatedTarget||n.fromElement)&&(wr(I)||I[xn]))break e;if((E||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,E?(I=n.relatedTarget||n.toElement,E=f,I=I?wr(I):null,I!==null&&(V=Hr(I),I!==V||I.tag!==5&&I.tag!==6)&&(I=null)):(E=null,I=f),E!==I)){if(N=Oh,D="onMouseLeave",A="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(N=qh,D="onPointerLeave",A="onPointerEnter",S="pointer"),V=E==null?g:li(E),x=I==null?g:li(I),g=new N(D,S+"leave",E,n,h),g.target=V,g.relatedTarget=x,D=null,wr(h)===f&&(N=new N(A,S+"enter",I,n,h),N.target=x,N.relatedTarget=V,D=N),V=D,E&&I)t:{for(N=E,A=I,S=0,x=N;x;x=Zr(x))S++;for(x=0,D=A;D;D=Zr(D))x++;for(;0<S-x;)N=Zr(N),S--;for(;0<x-S;)A=Zr(A),x--;for(;S--;){if(N===A||A!==null&&N===A.alternate)break t;N=Zr(N),A=Zr(A)}N=null}else N=null;E!==null&&Zh(p,g,E,N,!1),I!==null&&V!==null&&Zh(p,V,I,N,!0)}}e:{if(g=f?li(f):window,E=g.nodeName&&g.nodeName.toLowerCase(),E==="select"||E==="input"&&g.type==="file")var b=K0;else if(zh(g))if(Q_)b=j0;else{b=Q0;var F=Y0}else(E=g.nodeName)&&E.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(b=X0);if(b&&(b=b(t,f))){Y_(p,b,n,h);break e}F&&F(t,g,f),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&ju(g,"number",g.value)}switch(F=f?li(f):window,t){case"focusin":(zh(F)||F.contentEditable==="true")&&(oi=F,cc=f,No=null);break;case"focusout":No=cc=oi=null;break;case"mousedown":dc=!0;break;case"contextmenu":case"mouseup":case"dragend":dc=!1,Qh(p,n,h);break;case"selectionchange":if(tS)break;case"keydown":case"keyup":Qh(p,n,h)}var w;if(Rd)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else ii?J_(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(W_&&n.locale!=="ko"&&(ii||v!=="onCompositionStart"?v==="onCompositionEnd"&&ii&&(w=z_()):(zn=h,wd="value"in zn?zn.value:zn.textContent,ii=!0)),F=Bl(f,v),0<F.length&&(v=new Gh(v,t,null,n,h),p.push({event:v,listeners:F}),w?v.data=w:(w=K_(n),w!==null&&(v.data=w)))),(w=H0?$0(t,n):z0(t,n))&&(f=Bl(f,"onBeforeInput"),0<f.length&&(h=new Gh("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:f}),h.data=w))}sy(p,e)})}function Xo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Bl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=$o(t,n),o!=null&&r.unshift(Xo(t,o,i)),o=$o(t,e),o!=null&&r.push(Xo(t,o,i))),t=t.return}return r}function Zr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Zh(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,c=l.alternate,f=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&f!==null&&(l=f,i?(c=$o(n,o),c!=null&&s.unshift(Xo(n,c,l))):i||(c=$o(n,o),c!=null&&s.push(Xo(n,c,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var oS=/\r\n?/g,sS=/\u0000|\uFFFD/g;function ep(t){return(typeof t=="string"?t:""+t).replace(oS,`
`).replace(sS,"")}function el(t,e,n){if(e=ep(e),ep(t)!==e&&n)throw Error(q(425))}function Ol(){}var fc=null,hc=null;function pc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mc=typeof setTimeout=="function"?setTimeout:void 0,lS=typeof clearTimeout=="function"?clearTimeout:void 0,tp=typeof Promise=="function"?Promise:void 0,aS=typeof queueMicrotask=="function"?queueMicrotask:typeof tp<"u"?function(t){return tp.resolve(null).then(t).catch(uS)}:mc;function uS(t){setTimeout(function(){throw t})}function Cu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Jo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Jo(e)}function Qn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function np(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qi=Math.random().toString(36).slice(2),pn="__reactFiber$"+qi,jo="__reactProps$"+qi,xn="__reactContainer$"+qi,gc="__reactEvents$"+qi,cS="__reactListeners$"+qi,dS="__reactHandles$"+qi;function wr(t){var e=t[pn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[xn]||n[pn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=np(t);t!==null;){if(n=t[pn])return n;t=np(t)}return e}t=n,n=t.parentNode}return null}function ms(t){return t=t[pn]||t[xn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function li(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function Sa(t){return t[jo]||null}var _c=[],ai=-1;function cr(t){return{current:t}}function Ae(t){0>ai||(t.current=_c[ai],_c[ai]=null,ai--)}function Te(t,e){ai++,_c[ai]=t.current,t.current=e}var ir={},gt=cr(ir),At=cr(!1),Mr=ir;function Pi(t,e){var n=t.type.contextTypes;if(!n)return ir;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Rt(t){return t=t.childContextTypes,t!=null}function Gl(){Ae(At),Ae(gt)}function rp(t,e,n){if(gt.current!==ir)throw Error(q(168));Te(gt,e),Te(At,n)}function ay(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(q(108,YT(t)||"Unknown",i));return Ve({},n,r)}function ql(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ir,Mr=gt.current,Te(gt,t),Te(At,At.current),!0}function ip(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=ay(t,e,Mr),r.__reactInternalMemoizedMergedChildContext=t,Ae(At),Ae(gt),Te(gt,t)):Ae(At),Te(At,n)}var En=null,Ca=!1,wu=!1;function uy(t){En===null?En=[t]:En.push(t)}function fS(t){Ca=!0,uy(t)}function dr(){if(!wu&&En!==null){wu=!0;var t=0,e=ye;try{var n=En;for(ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}En=null,Ca=!1}catch(i){throw En!==null&&(En=En.slice(t+1)),V_(Ed,dr),i}finally{ye=e,wu=!1}}return null}var ui=[],ci=0,Hl=null,$l=0,Ft=[],bt=0,Dr=null,Tn=1,Sn="";function Sr(t,e){ui[ci++]=$l,ui[ci++]=Hl,Hl=t,$l=e}function cy(t,e,n){Ft[bt++]=Tn,Ft[bt++]=Sn,Ft[bt++]=Dr,Dr=t;var r=Tn;t=Sn;var i=32-nn(r)-1;r&=~(1<<i),n+=1;var o=32-nn(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Tn=1<<32-nn(e)+i|n<<i|r,Sn=o+t}else Tn=1<<o|n<<i|r,Sn=t}function Pd(t){t.return!==null&&(Sr(t,1),cy(t,1,0))}function kd(t){for(;t===Hl;)Hl=ui[--ci],ui[ci]=null,$l=ui[--ci],ui[ci]=null;for(;t===Dr;)Dr=Ft[--bt],Ft[bt]=null,Sn=Ft[--bt],Ft[bt]=null,Tn=Ft[--bt],Ft[bt]=null}var Dt=null,Mt=null,xe=!1,Qt=null;function dy(t,e){var n=Bt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function op(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dt=t,Mt=Qn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dt=t,Mt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Dr!==null?{id:Tn,overflow:Sn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Bt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dt=t,Mt=null,!0):!1;default:return!1}}function yc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vc(t){if(xe){var e=Mt;if(e){var n=e;if(!op(t,e)){if(yc(t))throw Error(q(418));e=Qn(n.nextSibling);var r=Dt;e&&op(t,e)?dy(r,n):(t.flags=t.flags&-4097|2,xe=!1,Dt=t)}}else{if(yc(t))throw Error(q(418));t.flags=t.flags&-4097|2,xe=!1,Dt=t}}}function sp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dt=t}function tl(t){if(t!==Dt)return!1;if(!xe)return sp(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!pc(t.type,t.memoizedProps)),e&&(e=Mt)){if(yc(t))throw fy(),Error(q(418));for(;e;)dy(t,e),e=Qn(e.nextSibling)}if(sp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mt=Qn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mt=null}}else Mt=Dt?Qn(t.stateNode.nextSibling):null;return!0}function fy(){for(var t=Mt;t;)t=Qn(t.nextSibling)}function ki(){Mt=Dt=null,xe=!1}function Nd(t){Qt===null?Qt=[t]:Qt.push(t)}var hS=Mn.ReactCurrentBatchConfig;function _o(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function nl(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lp(t){var e=t._init;return e(t._payload)}function hy(t){function e(A,S){if(t){var x=A.deletions;x===null?(A.deletions=[S],A.flags|=16):x.push(S)}}function n(A,S){if(!t)return null;for(;S!==null;)e(A,S),S=S.sibling;return null}function r(A,S){for(A=new Map;S!==null;)S.key!==null?A.set(S.key,S):A.set(S.index,S),S=S.sibling;return A}function i(A,S){return A=er(A,S),A.index=0,A.sibling=null,A}function o(A,S,x){return A.index=x,t?(x=A.alternate,x!==null?(x=x.index,x<S?(A.flags|=2,S):x):(A.flags|=2,S)):(A.flags|=1048576,S)}function s(A){return t&&A.alternate===null&&(A.flags|=2),A}function l(A,S,x,D){return S===null||S.tag!==6?(S=Nu(x,A.mode,D),S.return=A,S):(S=i(S,x),S.return=A,S)}function c(A,S,x,D){var b=x.type;return b===ri?h(A,S,x.props.children,D,x.key):S!==null&&(S.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Gn&&lp(b)===S.type)?(D=i(S,x.props),D.ref=_o(A,S,x),D.return=A,D):(D=wl(x.type,x.key,x.props,null,A.mode,D),D.ref=_o(A,S,x),D.return=A,D)}function f(A,S,x,D){return S===null||S.tag!==4||S.stateNode.containerInfo!==x.containerInfo||S.stateNode.implementation!==x.implementation?(S=Mu(x,A.mode,D),S.return=A,S):(S=i(S,x.children||[]),S.return=A,S)}function h(A,S,x,D,b){return S===null||S.tag!==7?(S=Pr(x,A.mode,D,b),S.return=A,S):(S=i(S,x),S.return=A,S)}function p(A,S,x){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Nu(""+S,A.mode,x),S.return=A,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case zs:return x=wl(S.type,S.key,S.props,null,A.mode,x),x.ref=_o(A,null,S),x.return=A,x;case ni:return S=Mu(S,A.mode,x),S.return=A,S;case Gn:var D=S._init;return p(A,D(S._payload),x)}if(Co(S)||fo(S))return S=Pr(S,A.mode,x,null),S.return=A,S;nl(A,S)}return null}function g(A,S,x,D){var b=S!==null?S.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return b!==null?null:l(A,S,""+x,D);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case zs:return x.key===b?c(A,S,x,D):null;case ni:return x.key===b?f(A,S,x,D):null;case Gn:return b=x._init,g(A,S,b(x._payload),D)}if(Co(x)||fo(x))return b!==null?null:h(A,S,x,D,null);nl(A,x)}return null}function E(A,S,x,D,b){if(typeof D=="string"&&D!==""||typeof D=="number")return A=A.get(x)||null,l(S,A,""+D,b);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case zs:return A=A.get(D.key===null?x:D.key)||null,c(S,A,D,b);case ni:return A=A.get(D.key===null?x:D.key)||null,f(S,A,D,b);case Gn:var F=D._init;return E(A,S,x,F(D._payload),b)}if(Co(D)||fo(D))return A=A.get(x)||null,h(S,A,D,b,null);nl(S,D)}return null}function I(A,S,x,D){for(var b=null,F=null,w=S,v=S=0,C=null;w!==null&&v<x.length;v++){w.index>v?(C=w,w=null):C=w.sibling;var R=g(A,w,x[v],D);if(R===null){w===null&&(w=C);break}t&&w&&R.alternate===null&&e(A,w),S=o(R,S,v),F===null?b=R:F.sibling=R,F=R,w=C}if(v===x.length)return n(A,w),xe&&Sr(A,v),b;if(w===null){for(;v<x.length;v++)w=p(A,x[v],D),w!==null&&(S=o(w,S,v),F===null?b=w:F.sibling=w,F=w);return xe&&Sr(A,v),b}for(w=r(A,w);v<x.length;v++)C=E(w,A,v,x[v],D),C!==null&&(t&&C.alternate!==null&&w.delete(C.key===null?v:C.key),S=o(C,S,v),F===null?b=C:F.sibling=C,F=C);return t&&w.forEach(function(k){return e(A,k)}),xe&&Sr(A,v),b}function N(A,S,x,D){var b=fo(x);if(typeof b!="function")throw Error(q(150));if(x=b.call(x),x==null)throw Error(q(151));for(var F=b=null,w=S,v=S=0,C=null,R=x.next();w!==null&&!R.done;v++,R=x.next()){w.index>v?(C=w,w=null):C=w.sibling;var k=g(A,w,R.value,D);if(k===null){w===null&&(w=C);break}t&&w&&k.alternate===null&&e(A,w),S=o(k,S,v),F===null?b=k:F.sibling=k,F=k,w=C}if(R.done)return n(A,w),xe&&Sr(A,v),b;if(w===null){for(;!R.done;v++,R=x.next())R=p(A,R.value,D),R!==null&&(S=o(R,S,v),F===null?b=R:F.sibling=R,F=R);return xe&&Sr(A,v),b}for(w=r(A,w);!R.done;v++,R=x.next())R=E(w,A,v,R.value,D),R!==null&&(t&&R.alternate!==null&&w.delete(R.key===null?v:R.key),S=o(R,S,v),F===null?b=R:F.sibling=R,F=R);return t&&w.forEach(function(M){return e(A,M)}),xe&&Sr(A,v),b}function V(A,S,x,D){if(typeof x=="object"&&x!==null&&x.type===ri&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case zs:e:{for(var b=x.key,F=S;F!==null;){if(F.key===b){if(b=x.type,b===ri){if(F.tag===7){n(A,F.sibling),S=i(F,x.props.children),S.return=A,A=S;break e}}else if(F.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Gn&&lp(b)===F.type){n(A,F.sibling),S=i(F,x.props),S.ref=_o(A,F,x),S.return=A,A=S;break e}n(A,F);break}else e(A,F);F=F.sibling}x.type===ri?(S=Pr(x.props.children,A.mode,D,x.key),S.return=A,A=S):(D=wl(x.type,x.key,x.props,null,A.mode,D),D.ref=_o(A,S,x),D.return=A,A=D)}return s(A);case ni:e:{for(F=x.key;S!==null;){if(S.key===F)if(S.tag===4&&S.stateNode.containerInfo===x.containerInfo&&S.stateNode.implementation===x.implementation){n(A,S.sibling),S=i(S,x.children||[]),S.return=A,A=S;break e}else{n(A,S);break}else e(A,S);S=S.sibling}S=Mu(x,A.mode,D),S.return=A,A=S}return s(A);case Gn:return F=x._init,V(A,S,F(x._payload),D)}if(Co(x))return I(A,S,x,D);if(fo(x))return N(A,S,x,D);nl(A,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,S!==null&&S.tag===6?(n(A,S.sibling),S=i(S,x),S.return=A,A=S):(n(A,S),S=Nu(x,A.mode,D),S.return=A,A=S),s(A)):n(A,S)}return V}var Ni=hy(!0),py=hy(!1),zl=cr(null),Wl=null,di=null,Md=null;function Dd(){Md=di=Wl=null}function Vd(t){var e=zl.current;Ae(zl),t._currentValue=e}function Ec(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function vi(t,e){Wl=t,Md=di=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(It=!0),t.firstContext=null)}function qt(t){var e=t._currentValue;if(Md!==t)if(t={context:t,memoizedValue:e,next:null},di===null){if(Wl===null)throw Error(q(308));di=t,Wl.dependencies={lanes:0,firstContext:t}}else di=di.next=t;return e}var Ir=null;function Ld(t){Ir===null?Ir=[t]:Ir.push(t)}function my(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ld(e)):(n.next=i.next,i.next=n),e.interleaved=n,Pn(t,r)}function Pn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qn=!1;function Ud(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Cn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Pn(t,n)}return i=r.interleaved,i===null?(e.next=e,Ld(r)):(e.next=i.next,i.next=e),r.interleaved=e,Pn(t,n)}function yl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Td(t,n)}}function ap(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Jl(t,e,n,r){var i=t.updateQueue;qn=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,f=c.next;c.next=null,s===null?o=f:s.next=f,s=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==s&&(l===null?h.firstBaseUpdate=f:l.next=f,h.lastBaseUpdate=c))}if(o!==null){var p=i.baseState;s=0,h=f=c=null,l=o;do{var g=l.lane,E=l.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:E,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var I=t,N=l;switch(g=e,E=n,N.tag){case 1:if(I=N.payload,typeof I=="function"){p=I.call(E,p,g);break e}p=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=N.payload,g=typeof I=="function"?I.call(E,p,g):I,g==null)break e;p=Ve({},p,g);break e;case 2:qn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else E={eventTime:E,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(f=h=E,c=p):h=h.next=E,s|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(h===null&&(c=p),i.baseState=c,i.firstBaseUpdate=f,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Lr|=s,t.lanes=s,t.memoizedState=p}}function up(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(q(191,i));i.call(r)}}}var gs={},gn=cr(gs),Zo=cr(gs),es=cr(gs);function Ar(t){if(t===gs)throw Error(q(174));return t}function Fd(t,e){switch(Te(es,e),Te(Zo,t),Te(gn,gs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ec(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ec(e,t)}Ae(gn),Te(gn,e)}function Mi(){Ae(gn),Ae(Zo),Ae(es)}function _y(t){Ar(es.current);var e=Ar(gn.current),n=ec(e,t.type);e!==n&&(Te(Zo,t),Te(gn,n))}function bd(t){Zo.current===t&&(Ae(gn),Ae(Zo))}var Ne=cr(0);function Kl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Iu=[];function Bd(){for(var t=0;t<Iu.length;t++)Iu[t]._workInProgressVersionPrimary=null;Iu.length=0}var vl=Mn.ReactCurrentDispatcher,Au=Mn.ReactCurrentBatchConfig,Vr=0,De=null,$e=null,Ye=null,Yl=!1,Mo=!1,ts=0,pS=0;function ut(){throw Error(q(321))}function Od(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!on(t[n],e[n]))return!1;return!0}function Gd(t,e,n,r,i,o){if(Vr=o,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vl.current=t===null||t.memoizedState===null?yS:vS,t=n(r,i),Mo){o=0;do{if(Mo=!1,ts=0,25<=o)throw Error(q(301));o+=1,Ye=$e=null,e.updateQueue=null,vl.current=ES,t=n(r,i)}while(Mo)}if(vl.current=Ql,e=$e!==null&&$e.next!==null,Vr=0,Ye=$e=De=null,Yl=!1,e)throw Error(q(300));return t}function qd(){var t=ts!==0;return ts=0,t}function fn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?De.memoizedState=Ye=t:Ye=Ye.next=t,Ye}function Ht(){if($e===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var e=Ye===null?De.memoizedState:Ye.next;if(e!==null)Ye=e,$e=t;else{if(t===null)throw Error(q(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Ye===null?De.memoizedState=Ye=t:Ye=Ye.next=t}return Ye}function ns(t,e){return typeof e=="function"?e(t):e}function Ru(t){var e=Ht(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=$e,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,c=null,f=o;do{var h=f.lane;if((Vr&h)===h)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:t(r,f.action);else{var p={lane:h,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(l=c=p,s=r):c=c.next=p,De.lanes|=h,Lr|=h}f=f.next}while(f!==null&&f!==o);c===null?s=r:c.next=l,on(r,e.memoizedState)||(It=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,De.lanes|=o,Lr|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xu(t){var e=Ht(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);on(o,e.memoizedState)||(It=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function yy(){}function vy(t,e){var n=De,r=Ht(),i=e(),o=!on(r.memoizedState,i);if(o&&(r.memoizedState=i,It=!0),r=r.queue,Hd(Sy.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,rs(9,Ty.bind(null,n,r,i,e),void 0,null),Xe===null)throw Error(q(349));Vr&30||Ey(n,e,i)}return i}function Ey(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ty(t,e,n,r){e.value=n,e.getSnapshot=r,Cy(e)&&wy(t)}function Sy(t,e,n){return n(function(){Cy(e)&&wy(t)})}function Cy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!on(t,n)}catch{return!0}}function wy(t){var e=Pn(t,1);e!==null&&rn(e,t,1,-1)}function cp(t){var e=fn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:t},e.queue=t,t=t.dispatch=_S.bind(null,De,t),[e.memoizedState,t]}function rs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Iy(){return Ht().memoizedState}function El(t,e,n,r){var i=fn();De.flags|=t,i.memoizedState=rs(1|e,n,void 0,r===void 0?null:r)}function wa(t,e,n,r){var i=Ht();r=r===void 0?null:r;var o=void 0;if($e!==null){var s=$e.memoizedState;if(o=s.destroy,r!==null&&Od(r,s.deps)){i.memoizedState=rs(e,n,o,r);return}}De.flags|=t,i.memoizedState=rs(1|e,n,o,r)}function dp(t,e){return El(8390656,8,t,e)}function Hd(t,e){return wa(2048,8,t,e)}function Ay(t,e){return wa(4,2,t,e)}function Ry(t,e){return wa(4,4,t,e)}function xy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Py(t,e,n){return n=n!=null?n.concat([t]):null,wa(4,4,xy.bind(null,e,t),n)}function $d(){}function ky(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Od(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ny(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Od(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function My(t,e,n){return Vr&21?(on(n,e)||(n=F_(),De.lanes|=n,Lr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,It=!0),t.memoizedState=n)}function mS(t,e){var n=ye;ye=n!==0&&4>n?n:4,t(!0);var r=Au.transition;Au.transition={};try{t(!1),e()}finally{ye=n,Au.transition=r}}function Dy(){return Ht().memoizedState}function gS(t,e,n){var r=Zn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Vy(t))Ly(e,n);else if(n=my(t,e,n,r),n!==null){var i=yt();rn(n,t,r,i),Uy(n,e,r)}}function _S(t,e,n){var r=Zn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vy(t))Ly(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,on(l,s)){var c=e.interleaved;c===null?(i.next=i,Ld(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=my(t,e,i,r),n!==null&&(i=yt(),rn(n,t,r,i),Uy(n,e,r))}}function Vy(t){var e=t.alternate;return t===De||e!==null&&e===De}function Ly(t,e){Mo=Yl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Uy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Td(t,n)}}var Ql={readContext:qt,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useInsertionEffect:ut,useLayoutEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useMutableSource:ut,useSyncExternalStore:ut,useId:ut,unstable_isNewReconciler:!1},yS={readContext:qt,useCallback:function(t,e){return fn().memoizedState=[t,e===void 0?null:e],t},useContext:qt,useEffect:dp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,El(4194308,4,xy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return El(4194308,4,t,e)},useInsertionEffect:function(t,e){return El(4,2,t,e)},useMemo:function(t,e){var n=fn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=fn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=gS.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=fn();return t={current:t},e.memoizedState=t},useState:cp,useDebugValue:$d,useDeferredValue:function(t){return fn().memoizedState=t},useTransition:function(){var t=cp(!1),e=t[0];return t=mS.bind(null,t[1]),fn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,i=fn();if(xe){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),Xe===null)throw Error(q(349));Vr&30||Ey(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,dp(Sy.bind(null,r,o,t),[t]),r.flags|=2048,rs(9,Ty.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=fn(),e=Xe.identifierPrefix;if(xe){var n=Sn,r=Tn;n=(r&~(1<<32-nn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ts++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=pS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},vS={readContext:qt,useCallback:ky,useContext:qt,useEffect:Hd,useImperativeHandle:Py,useInsertionEffect:Ay,useLayoutEffect:Ry,useMemo:Ny,useReducer:Ru,useRef:Iy,useState:function(){return Ru(ns)},useDebugValue:$d,useDeferredValue:function(t){var e=Ht();return My(e,$e.memoizedState,t)},useTransition:function(){var t=Ru(ns)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:yy,useSyncExternalStore:vy,useId:Dy,unstable_isNewReconciler:!1},ES={readContext:qt,useCallback:ky,useContext:qt,useEffect:Hd,useImperativeHandle:Py,useInsertionEffect:Ay,useLayoutEffect:Ry,useMemo:Ny,useReducer:xu,useRef:Iy,useState:function(){return xu(ns)},useDebugValue:$d,useDeferredValue:function(t){var e=Ht();return $e===null?e.memoizedState=t:My(e,$e.memoizedState,t)},useTransition:function(){var t=xu(ns)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:yy,useSyncExternalStore:vy,useId:Dy,unstable_isNewReconciler:!1};function Kt(t,e){if(t&&t.defaultProps){e=Ve({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Tc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ve({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ia={isMounted:function(t){return(t=t._reactInternals)?Hr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yt(),i=Zn(t),o=Cn(r,i);o.payload=e,n!=null&&(o.callback=n),e=Xn(t,o,i),e!==null&&(rn(e,t,i,r),yl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yt(),i=Zn(t),o=Cn(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Xn(t,o,i),e!==null&&(rn(e,t,i,r),yl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yt(),r=Zn(t),i=Cn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Xn(t,i,r),e!==null&&(rn(e,t,r,n),yl(e,t,r))}};function fp(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Yo(n,r)||!Yo(i,o):!0}function Fy(t,e,n){var r=!1,i=ir,o=e.contextType;return typeof o=="object"&&o!==null?o=qt(o):(i=Rt(e)?Mr:gt.current,r=e.contextTypes,o=(r=r!=null)?Pi(t,i):ir),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ia,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function hp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ia.enqueueReplaceState(e,e.state,null)}function Sc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ud(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=qt(o):(o=Rt(e)?Mr:gt.current,i.context=Pi(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Tc(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ia.enqueueReplaceState(i,i.state,null),Jl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Di(t,e){try{var n="",r=e;do n+=KT(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Pu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Cc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var TS=typeof WeakMap=="function"?WeakMap:Map;function by(t,e,n){n=Cn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jl||(jl=!0,Dc=r),Cc(t,e)},n}function By(t,e,n){n=Cn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Cc(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Cc(t,e),typeof r!="function"&&(jn===null?jn=new Set([this]):jn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function pp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new TS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=LS.bind(null,t,e,n),e.then(t,t))}function mp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function gp(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Cn(-1,1),e.tag=2,Xn(n,e,1))),n.lanes|=1),t)}var SS=Mn.ReactCurrentOwner,It=!1;function _t(t,e,n,r){e.child=t===null?py(e,null,n,r):Ni(e,t.child,n,r)}function _p(t,e,n,r,i){n=n.render;var o=e.ref;return vi(e,i),r=Gd(t,e,n,r,o,i),n=qd(),t!==null&&!It?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,kn(t,e,i)):(xe&&n&&Pd(e),e.flags|=1,_t(t,e,r,i),e.child)}function yp(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!jd(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Oy(t,e,o,r,i)):(t=wl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Yo,n(s,r)&&t.ref===e.ref)return kn(t,e,i)}return e.flags|=1,t=er(o,r),t.ref=e.ref,t.return=e,e.child=t}function Oy(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Yo(o,r)&&t.ref===e.ref)if(It=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(It=!0);else return e.lanes=t.lanes,kn(t,e,i)}return wc(t,e,n,r,i)}function Gy(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(hi,Nt),Nt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(hi,Nt),Nt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Te(hi,Nt),Nt|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Te(hi,Nt),Nt|=r;return _t(t,e,i,n),e.child}function qy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function wc(t,e,n,r,i){var o=Rt(n)?Mr:gt.current;return o=Pi(e,o),vi(e,i),n=Gd(t,e,n,r,o,i),r=qd(),t!==null&&!It?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,kn(t,e,i)):(xe&&r&&Pd(e),e.flags|=1,_t(t,e,n,i),e.child)}function vp(t,e,n,r,i){if(Rt(n)){var o=!0;ql(e)}else o=!1;if(vi(e,i),e.stateNode===null)Tl(t,e),Fy(e,n,r),Sc(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var c=s.context,f=n.contextType;typeof f=="object"&&f!==null?f=qt(f):(f=Rt(n)?Mr:gt.current,f=Pi(e,f));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||c!==f)&&hp(e,s,r,f),qn=!1;var g=e.memoizedState;s.state=g,Jl(e,r,s,i),c=e.memoizedState,l!==r||g!==c||At.current||qn?(typeof h=="function"&&(Tc(e,n,h,r),c=e.memoizedState),(l=qn||fp(e,n,l,r,g,c,f))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),s.props=r,s.state=c,s.context=f,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,gy(t,e),l=e.memoizedProps,f=e.type===e.elementType?l:Kt(e.type,l),s.props=f,p=e.pendingProps,g=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=qt(c):(c=Rt(n)?Mr:gt.current,c=Pi(e,c));var E=n.getDerivedStateFromProps;(h=typeof E=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==p||g!==c)&&hp(e,s,r,c),qn=!1,g=e.memoizedState,s.state=g,Jl(e,r,s,i);var I=e.memoizedState;l!==p||g!==I||At.current||qn?(typeof E=="function"&&(Tc(e,n,E,r),I=e.memoizedState),(f=qn||fp(e,n,f,r,g,I,c)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,I,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,I,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),s.props=r,s.state=I,s.context=c,r=f):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Ic(t,e,n,r,o,i)}function Ic(t,e,n,r,i,o){qy(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&ip(e,n,!1),kn(t,e,o);r=e.stateNode,SS.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Ni(e,t.child,null,o),e.child=Ni(e,null,l,o)):_t(t,e,l,o),e.memoizedState=r.state,i&&ip(e,n,!0),e.child}function Hy(t){var e=t.stateNode;e.pendingContext?rp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&rp(t,e.context,!1),Fd(t,e.containerInfo)}function Ep(t,e,n,r,i){return ki(),Nd(i),e.flags|=256,_t(t,e,n,r),e.child}var Ac={dehydrated:null,treeContext:null,retryLane:0};function Rc(t){return{baseLanes:t,cachePool:null,transitions:null}}function $y(t,e,n){var r=e.pendingProps,i=Ne.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Te(Ne,i&1),t===null)return vc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=xa(s,r,0,null),t=Pr(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Rc(n),e.memoizedState=Ac,t):zd(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return CS(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=er(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=er(l,o):(o=Pr(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Rc(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Ac,r}return o=t.child,t=o.sibling,r=er(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zd(t,e){return e=xa({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function rl(t,e,n,r){return r!==null&&Nd(r),Ni(e,t.child,null,n),t=zd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function CS(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Pu(Error(q(422))),rl(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=xa({mode:"visible",children:r.children},i,0,null),o=Pr(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Ni(e,t.child,null,s),e.child.memoizedState=Rc(s),e.memoizedState=Ac,o);if(!(e.mode&1))return rl(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(q(419)),r=Pu(o,r,void 0),rl(t,e,s,r)}if(l=(s&t.childLanes)!==0,It||l){if(r=Xe,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Pn(t,i),rn(r,t,i,-1))}return Xd(),r=Pu(Error(q(421))),rl(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=US.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Mt=Qn(i.nextSibling),Dt=e,xe=!0,Qt=null,t!==null&&(Ft[bt++]=Tn,Ft[bt++]=Sn,Ft[bt++]=Dr,Tn=t.id,Sn=t.overflow,Dr=e),e=zd(e,r.children),e.flags|=4096,e)}function Tp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ec(t.return,e,n)}function ku(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function zy(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(_t(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Tp(t,n,e);else if(t.tag===19)Tp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Kl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ku(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Kl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ku(e,!0,n,null,o);break;case"together":ku(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function kn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Lr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=er(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=er(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function wS(t,e,n){switch(e.tag){case 3:Hy(e),ki();break;case 5:_y(e);break;case 1:Rt(e.type)&&ql(e);break;case 4:Fd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Te(zl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?$y(t,e,n):(Te(Ne,Ne.current&1),t=kn(t,e,n),t!==null?t.sibling:null);Te(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return zy(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Te(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,Gy(t,e,n)}return kn(t,e,n)}var Wy,xc,Jy,Ky;Wy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xc=function(){};Jy=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ar(gn.current);var o=null;switch(n){case"input":i=Qu(t,i),r=Qu(t,r),o=[];break;case"select":i=Ve({},i,{value:void 0}),r=Ve({},r,{value:void 0}),o=[];break;case"textarea":i=Zu(t,i),r=Zu(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ol)}tc(n,r);var s;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var l=i[f];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(qo.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in r){var c=r[f];if(l=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&c!==l&&(c!=null||l!=null))if(f==="style")if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(qo.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&we("scroll",t),o||l===c||(o=[])):(o=o||[]).push(f,c))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};Ky=function(t,e,n,r){n!==r&&(e.flags|=4)};function yo(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function IS(t,e,n){var r=e.pendingProps;switch(kd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(e),null;case 1:return Rt(e.type)&&Gl(),ct(e),null;case 3:return r=e.stateNode,Mi(),Ae(At),Ae(gt),Bd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(tl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qt!==null&&(Uc(Qt),Qt=null))),xc(t,e),ct(e),null;case 5:bd(e);var i=Ar(es.current);if(n=e.type,t!==null&&e.stateNode!=null)Jy(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return ct(e),null}if(t=Ar(gn.current),tl(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[pn]=e,r[jo]=o,t=(e.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(i=0;i<Io.length;i++)we(Io[i],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":kh(r,o),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},we("invalid",r);break;case"textarea":Mh(r,o),we("invalid",r)}tc(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&el(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&el(r.textContent,l,t),i=["children",""+l]):qo.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&we("scroll",r)}switch(n){case"input":Ws(r),Nh(r,o,!0);break;case"textarea":Ws(r),Dh(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ol)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=S_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[pn]=e,t[jo]=r,Wy(t,e,!1,!1),e.stateNode=t;e:{switch(s=nc(n,r),n){case"dialog":we("cancel",t),we("close",t),i=r;break;case"iframe":case"object":case"embed":we("load",t),i=r;break;case"video":case"audio":for(i=0;i<Io.length;i++)we(Io[i],t);i=r;break;case"source":we("error",t),i=r;break;case"img":case"image":case"link":we("error",t),we("load",t),i=r;break;case"details":we("toggle",t),i=r;break;case"input":kh(t,r),i=Qu(t,r),we("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ve({},r,{value:void 0}),we("invalid",t);break;case"textarea":Mh(t,r),i=Zu(t,r),we("invalid",t);break;default:i=r}tc(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?I_(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&C_(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ho(t,c):typeof c=="number"&&Ho(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(qo.hasOwnProperty(o)?c!=null&&o==="onScroll"&&we("scroll",t):c!=null&&md(t,o,c,s))}switch(n){case"input":Ws(t),Nh(t,r,!1);break;case"textarea":Ws(t),Dh(t);break;case"option":r.value!=null&&t.setAttribute("value",""+rr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?mi(t,!!r.multiple,o,!1):r.defaultValue!=null&&mi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ol)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ct(e),null;case 6:if(t&&e.stateNode!=null)Ky(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=Ar(es.current),Ar(gn.current),tl(e)){if(r=e.stateNode,n=e.memoizedProps,r[pn]=e,(o=r.nodeValue!==n)&&(t=Dt,t!==null))switch(t.tag){case 3:el(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&el(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pn]=e,e.stateNode=r}return ct(e),null;case 13:if(Ae(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&Mt!==null&&e.mode&1&&!(e.flags&128))fy(),ki(),e.flags|=98560,o=!1;else if(o=tl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(q(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(q(317));o[pn]=e}else ki(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ct(e),o=!1}else Qt!==null&&(Uc(Qt),Qt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?ze===0&&(ze=3):Xd())),e.updateQueue!==null&&(e.flags|=4),ct(e),null);case 4:return Mi(),xc(t,e),t===null&&Qo(e.stateNode.containerInfo),ct(e),null;case 10:return Vd(e.type._context),ct(e),null;case 17:return Rt(e.type)&&Gl(),ct(e),null;case 19:if(Ae(Ne),o=e.memoizedState,o===null)return ct(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)yo(o,!1);else{if(ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Kl(t),s!==null){for(e.flags|=128,yo(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Ne,Ne.current&1|2),e.child}t=t.sibling}o.tail!==null&&be()>Vi&&(e.flags|=128,r=!0,yo(o,!1),e.lanes=4194304)}else{if(!r)if(t=Kl(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),yo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!xe)return ct(e),null}else 2*be()-o.renderingStartTime>Vi&&n!==1073741824&&(e.flags|=128,r=!0,yo(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=be(),e.sibling=null,n=Ne.current,Te(Ne,r?n&1|2:n&1),e):(ct(e),null);case 22:case 23:return Qd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Nt&1073741824&&(ct(e),e.subtreeFlags&6&&(e.flags|=8192)):ct(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function AS(t,e){switch(kd(e),e.tag){case 1:return Rt(e.type)&&Gl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Mi(),Ae(At),Ae(gt),Bd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return bd(e),null;case 13:if(Ae(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));ki()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Ne),null;case 4:return Mi(),null;case 10:return Vd(e.type._context),null;case 22:case 23:return Qd(),null;case 24:return null;default:return null}}var il=!1,ft=!1,RS=typeof WeakSet=="function"?WeakSet:Set,J=null;function fi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ue(t,e,r)}else n.current=null}function Pc(t,e,n){try{n()}catch(r){Ue(t,e,r)}}var Sp=!1;function xS(t,e){if(fc=Fl,t=Z_(),xd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,c=-1,f=0,h=0,p=t,g=null;t:for(;;){for(var E;p!==n||i!==0&&p.nodeType!==3||(l=s+i),p!==o||r!==0&&p.nodeType!==3||(c=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(E=p.firstChild)!==null;)g=p,p=E;for(;;){if(p===t)break t;if(g===n&&++f===i&&(l=s),g===o&&++h===r&&(c=s),(E=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=E}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(hc={focusedElem:t,selectionRange:n},Fl=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var N=I.memoizedProps,V=I.memoizedState,A=e.stateNode,S=A.getSnapshotBeforeUpdate(e.elementType===e.type?N:Kt(e.type,N),V);A.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(D){Ue(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return I=Sp,Sp=!1,I}function Do(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Pc(e,n,o)}i=i.next}while(i!==r)}}function Aa(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function kc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Yy(t){var e=t.alternate;e!==null&&(t.alternate=null,Yy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pn],delete e[jo],delete e[gc],delete e[cS],delete e[dS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Qy(t){return t.tag===5||t.tag===3||t.tag===4}function Cp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Qy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ol));else if(r!==4&&(t=t.child,t!==null))for(Nc(t,e,n),t=t.sibling;t!==null;)Nc(t,e,n),t=t.sibling}function Mc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Mc(t,e,n),t=t.sibling;t!==null;)Mc(t,e,n),t=t.sibling}var tt=null,Yt=!1;function On(t,e,n){for(n=n.child;n!==null;)Xy(t,e,n),n=n.sibling}function Xy(t,e,n){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(ya,n)}catch{}switch(n.tag){case 5:ft||fi(n,e);case 6:var r=tt,i=Yt;tt=null,On(t,e,n),tt=r,Yt=i,tt!==null&&(Yt?(t=tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):tt.removeChild(n.stateNode));break;case 18:tt!==null&&(Yt?(t=tt,n=n.stateNode,t.nodeType===8?Cu(t.parentNode,n):t.nodeType===1&&Cu(t,n),Jo(t)):Cu(tt,n.stateNode));break;case 4:r=tt,i=Yt,tt=n.stateNode.containerInfo,Yt=!0,On(t,e,n),tt=r,Yt=i;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Pc(n,e,s),i=i.next}while(i!==r)}On(t,e,n);break;case 1:if(!ft&&(fi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ue(n,e,l)}On(t,e,n);break;case 21:On(t,e,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,On(t,e,n),ft=r):On(t,e,n);break;default:On(t,e,n)}}function wp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new RS),e.forEach(function(r){var i=FS.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Jt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:tt=l.stateNode,Yt=!1;break e;case 3:tt=l.stateNode.containerInfo,Yt=!0;break e;case 4:tt=l.stateNode.containerInfo,Yt=!0;break e}l=l.return}if(tt===null)throw Error(q(160));Xy(o,s,i),tt=null,Yt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(f){Ue(i,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jy(e,t),e=e.sibling}function jy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jt(e,t),dn(t),r&4){try{Do(3,t,t.return),Aa(3,t)}catch(N){Ue(t,t.return,N)}try{Do(5,t,t.return)}catch(N){Ue(t,t.return,N)}}break;case 1:Jt(e,t),dn(t),r&512&&n!==null&&fi(n,n.return);break;case 5:if(Jt(e,t),dn(t),r&512&&n!==null&&fi(n,n.return),t.flags&32){var i=t.stateNode;try{Ho(i,"")}catch(N){Ue(t,t.return,N)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&E_(i,o),nc(l,s);var f=nc(l,o);for(s=0;s<c.length;s+=2){var h=c[s],p=c[s+1];h==="style"?I_(i,p):h==="dangerouslySetInnerHTML"?C_(i,p):h==="children"?Ho(i,p):md(i,h,p,f)}switch(l){case"input":Xu(i,o);break;case"textarea":T_(i,o);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var E=o.value;E!=null?mi(i,!!o.multiple,E,!1):g!==!!o.multiple&&(o.defaultValue!=null?mi(i,!!o.multiple,o.defaultValue,!0):mi(i,!!o.multiple,o.multiple?[]:"",!1))}i[jo]=o}catch(N){Ue(t,t.return,N)}}break;case 6:if(Jt(e,t),dn(t),r&4){if(t.stateNode===null)throw Error(q(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(N){Ue(t,t.return,N)}}break;case 3:if(Jt(e,t),dn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Jo(e.containerInfo)}catch(N){Ue(t,t.return,N)}break;case 4:Jt(e,t),dn(t);break;case 13:Jt(e,t),dn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Kd=be())),r&4&&wp(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(ft=(f=ft)||h,Jt(e,t),ft=f):Jt(e,t),dn(t),r&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!h&&t.mode&1)for(J=t,h=t.child;h!==null;){for(p=J=h;J!==null;){switch(g=J,E=g.child,g.tag){case 0:case 11:case 14:case 15:Do(4,g,g.return);break;case 1:fi(g,g.return);var I=g.stateNode;if(typeof I.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(N){Ue(r,n,N)}}break;case 5:fi(g,g.return);break;case 22:if(g.memoizedState!==null){Ap(p);continue}}E!==null?(E.return=g,J=E):Ap(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,f?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=p.stateNode,c=p.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=w_("display",s))}catch(N){Ue(t,t.return,N)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=f?"":p.memoizedProps}catch(N){Ue(t,t.return,N)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Jt(e,t),dn(t),r&4&&wp(t);break;case 21:break;default:Jt(e,t),dn(t)}}function dn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Qy(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ho(i,""),r.flags&=-33);var o=Cp(t);Mc(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=Cp(t);Nc(t,l,s);break;default:throw Error(q(161))}}catch(c){Ue(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function PS(t,e,n){J=t,Zy(t)}function Zy(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var i=J,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||il;if(!s){var l=i.alternate,c=l!==null&&l.memoizedState!==null||ft;l=il;var f=ft;if(il=s,(ft=c)&&!f)for(J=i;J!==null;)s=J,c=s.child,s.tag===22&&s.memoizedState!==null?Rp(i):c!==null?(c.return=s,J=c):Rp(i);for(;o!==null;)J=o,Zy(o),o=o.sibling;J=i,il=l,ft=f}Ip(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,J=o):Ip(t)}}function Ip(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ft||Aa(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ft)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Kt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&up(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}up(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var h=f.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&Jo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}ft||e.flags&512&&kc(e)}catch(g){Ue(e,e.return,g)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function Ap(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function Rp(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Aa(4,e)}catch(c){Ue(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Ue(e,i,c)}}var o=e.return;try{kc(e)}catch(c){Ue(e,o,c)}break;case 5:var s=e.return;try{kc(e)}catch(c){Ue(e,s,c)}}}catch(c){Ue(e,e.return,c)}if(e===t){J=null;break}var l=e.sibling;if(l!==null){l.return=e.return,J=l;break}J=e.return}}var kS=Math.ceil,Xl=Mn.ReactCurrentDispatcher,Wd=Mn.ReactCurrentOwner,Ot=Mn.ReactCurrentBatchConfig,he=0,Xe=null,Oe=null,ot=0,Nt=0,hi=cr(0),ze=0,is=null,Lr=0,Ra=0,Jd=0,Vo=null,wt=null,Kd=0,Vi=1/0,vn=null,jl=!1,Dc=null,jn=null,ol=!1,Wn=null,Zl=0,Lo=0,Vc=null,Sl=-1,Cl=0;function yt(){return he&6?be():Sl!==-1?Sl:Sl=be()}function Zn(t){return t.mode&1?he&2&&ot!==0?ot&-ot:hS.transition!==null?(Cl===0&&(Cl=F_()),Cl):(t=ye,t!==0||(t=window.event,t=t===void 0?16:$_(t.type)),t):1}function rn(t,e,n,r){if(50<Lo)throw Lo=0,Vc=null,Error(q(185));hs(t,n,r),(!(he&2)||t!==Xe)&&(t===Xe&&(!(he&2)&&(Ra|=n),ze===4&&$n(t,ot)),xt(t,r),n===1&&he===0&&!(e.mode&1)&&(Vi=be()+500,Ca&&dr()))}function xt(t,e){var n=t.callbackNode;h0(t,e);var r=Ul(t,t===Xe?ot:0);if(r===0)n!==null&&Uh(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Uh(n),e===1)t.tag===0?fS(xp.bind(null,t)):uy(xp.bind(null,t)),aS(function(){!(he&6)&&dr()}),n=null;else{switch(b_(r)){case 1:n=Ed;break;case 4:n=L_;break;case 16:n=Ll;break;case 536870912:n=U_;break;default:n=Ll}n=lv(n,ev.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ev(t,e){if(Sl=-1,Cl=0,he&6)throw Error(q(327));var n=t.callbackNode;if(Ei()&&t.callbackNode!==n)return null;var r=Ul(t,t===Xe?ot:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ea(t,r);else{e=r;var i=he;he|=2;var o=nv();(Xe!==t||ot!==e)&&(vn=null,Vi=be()+500,xr(t,e));do try{DS();break}catch(l){tv(t,l)}while(!0);Dd(),Xl.current=o,he=i,Oe!==null?e=0:(Xe=null,ot=0,e=ze)}if(e!==0){if(e===2&&(i=lc(t),i!==0&&(r=i,e=Lc(t,i))),e===1)throw n=is,xr(t,0),$n(t,r),xt(t,be()),n;if(e===6)$n(t,r);else{if(i=t.current.alternate,!(r&30)&&!NS(i)&&(e=ea(t,r),e===2&&(o=lc(t),o!==0&&(r=o,e=Lc(t,o))),e===1))throw n=is,xr(t,0),$n(t,r),xt(t,be()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:Cr(t,wt,vn);break;case 3:if($n(t,r),(r&130023424)===r&&(e=Kd+500-be(),10<e)){if(Ul(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){yt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=mc(Cr.bind(null,t,wt,vn),e);break}Cr(t,wt,vn);break;case 4:if($n(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-nn(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kS(r/1960))-r,10<r){t.timeoutHandle=mc(Cr.bind(null,t,wt,vn),r);break}Cr(t,wt,vn);break;case 5:Cr(t,wt,vn);break;default:throw Error(q(329))}}}return xt(t,be()),t.callbackNode===n?ev.bind(null,t):null}function Lc(t,e){var n=Vo;return t.current.memoizedState.isDehydrated&&(xr(t,e).flags|=256),t=ea(t,e),t!==2&&(e=wt,wt=n,e!==null&&Uc(e)),t}function Uc(t){wt===null?wt=t:wt.push.apply(wt,t)}function NS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!on(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function $n(t,e){for(e&=~Jd,e&=~Ra,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-nn(e),r=1<<n;t[n]=-1,e&=~r}}function xp(t){if(he&6)throw Error(q(327));Ei();var e=Ul(t,0);if(!(e&1))return xt(t,be()),null;var n=ea(t,e);if(t.tag!==0&&n===2){var r=lc(t);r!==0&&(e=r,n=Lc(t,r))}if(n===1)throw n=is,xr(t,0),$n(t,e),xt(t,be()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Cr(t,wt,vn),xt(t,be()),null}function Yd(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(Vi=be()+500,Ca&&dr())}}function Ur(t){Wn!==null&&Wn.tag===0&&!(he&6)&&Ei();var e=he;he|=1;var n=Ot.transition,r=ye;try{if(Ot.transition=null,ye=1,t)return t()}finally{ye=r,Ot.transition=n,he=e,!(he&6)&&dr()}}function Qd(){Nt=hi.current,Ae(hi)}function xr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,lS(n)),Oe!==null)for(n=Oe.return;n!==null;){var r=n;switch(kd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gl();break;case 3:Mi(),Ae(At),Ae(gt),Bd();break;case 5:bd(r);break;case 4:Mi();break;case 13:Ae(Ne);break;case 19:Ae(Ne);break;case 10:Vd(r.type._context);break;case 22:case 23:Qd()}n=n.return}if(Xe=t,Oe=t=er(t.current,null),ot=Nt=e,ze=0,is=null,Jd=Ra=Lr=0,wt=Vo=null,Ir!==null){for(e=0;e<Ir.length;e++)if(n=Ir[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Ir=null}return t}function tv(t,e){do{var n=Oe;try{if(Dd(),vl.current=Ql,Yl){for(var r=De.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Yl=!1}if(Vr=0,Ye=$e=De=null,Mo=!1,ts=0,Wd.current=null,n===null||n.return===null){ze=1,is=e,Oe=null;break}e:{var o=t,s=n.return,l=n,c=e;if(e=ot,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,h=l,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var E=mp(s);if(E!==null){E.flags&=-257,gp(E,s,l,o,e),E.mode&1&&pp(o,f,e),e=E,c=f;var I=e.updateQueue;if(I===null){var N=new Set;N.add(c),e.updateQueue=N}else I.add(c);break e}else{if(!(e&1)){pp(o,f,e),Xd();break e}c=Error(q(426))}}else if(xe&&l.mode&1){var V=mp(s);if(V!==null){!(V.flags&65536)&&(V.flags|=256),gp(V,s,l,o,e),Nd(Di(c,l));break e}}o=c=Di(c,l),ze!==4&&(ze=2),Vo===null?Vo=[o]:Vo.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var A=by(o,c,e);ap(o,A);break e;case 1:l=c;var S=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof S.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(jn===null||!jn.has(x)))){o.flags|=65536,e&=-e,o.lanes|=e;var D=By(o,l,e);ap(o,D);break e}}o=o.return}while(o!==null)}iv(n)}catch(b){e=b,Oe===n&&n!==null&&(Oe=n=n.return);continue}break}while(!0)}function nv(){var t=Xl.current;return Xl.current=Ql,t===null?Ql:t}function Xd(){(ze===0||ze===3||ze===2)&&(ze=4),Xe===null||!(Lr&268435455)&&!(Ra&268435455)||$n(Xe,ot)}function ea(t,e){var n=he;he|=2;var r=nv();(Xe!==t||ot!==e)&&(vn=null,xr(t,e));do try{MS();break}catch(i){tv(t,i)}while(!0);if(Dd(),he=n,Xl.current=r,Oe!==null)throw Error(q(261));return Xe=null,ot=0,ze}function MS(){for(;Oe!==null;)rv(Oe)}function DS(){for(;Oe!==null&&!i0();)rv(Oe)}function rv(t){var e=sv(t.alternate,t,Nt);t.memoizedProps=t.pendingProps,e===null?iv(t):Oe=e,Wd.current=null}function iv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=AS(n,e),n!==null){n.flags&=32767,Oe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ze=6,Oe=null;return}}else if(n=IS(n,e,Nt),n!==null){Oe=n;return}if(e=e.sibling,e!==null){Oe=e;return}Oe=e=t}while(e!==null);ze===0&&(ze=5)}function Cr(t,e,n){var r=ye,i=Ot.transition;try{Ot.transition=null,ye=1,VS(t,e,n,r)}finally{Ot.transition=i,ye=r}return null}function VS(t,e,n,r){do Ei();while(Wn!==null);if(he&6)throw Error(q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(p0(t,o),t===Xe&&(Oe=Xe=null,ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ol||(ol=!0,lv(Ll,function(){return Ei(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ot.transition,Ot.transition=null;var s=ye;ye=1;var l=he;he|=4,Wd.current=null,xS(t,n),jy(n,t),eS(hc),Fl=!!fc,hc=fc=null,t.current=n,PS(n),o0(),he=l,ye=s,Ot.transition=o}else t.current=n;if(ol&&(ol=!1,Wn=t,Zl=i),o=t.pendingLanes,o===0&&(jn=null),a0(n.stateNode),xt(t,be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(jl)throw jl=!1,t=Dc,Dc=null,t;return Zl&1&&t.tag!==0&&Ei(),o=t.pendingLanes,o&1?t===Vc?Lo++:(Lo=0,Vc=t):Lo=0,dr(),null}function Ei(){if(Wn!==null){var t=b_(Zl),e=Ot.transition,n=ye;try{if(Ot.transition=null,ye=16>t?16:t,Wn===null)var r=!1;else{if(t=Wn,Wn=null,Zl=0,he&6)throw Error(q(331));var i=he;for(he|=4,J=t.current;J!==null;){var o=J,s=o.child;if(J.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var f=l[c];for(J=f;J!==null;){var h=J;switch(h.tag){case 0:case 11:case 15:Do(8,h,o)}var p=h.child;if(p!==null)p.return=h,J=p;else for(;J!==null;){h=J;var g=h.sibling,E=h.return;if(Yy(h),h===f){J=null;break}if(g!==null){g.return=E,J=g;break}J=E}}}var I=o.alternate;if(I!==null){var N=I.child;if(N!==null){I.child=null;do{var V=N.sibling;N.sibling=null,N=V}while(N!==null)}}J=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,J=s;else e:for(;J!==null;){if(o=J,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Do(9,o,o.return)}var A=o.sibling;if(A!==null){A.return=o.return,J=A;break e}J=o.return}}var S=t.current;for(J=S;J!==null;){s=J;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,J=x;else e:for(s=S;J!==null;){if(l=J,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Aa(9,l)}}catch(b){Ue(l,l.return,b)}if(l===s){J=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,J=D;break e}J=l.return}}if(he=i,dr(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(ya,t)}catch{}r=!0}return r}finally{ye=n,Ot.transition=e}}return!1}function Pp(t,e,n){e=Di(n,e),e=by(t,e,1),t=Xn(t,e,1),e=yt(),t!==null&&(hs(t,1,e),xt(t,e))}function Ue(t,e,n){if(t.tag===3)Pp(t,t,n);else for(;e!==null;){if(e.tag===3){Pp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jn===null||!jn.has(r))){t=Di(n,t),t=By(e,t,1),e=Xn(e,t,1),t=yt(),e!==null&&(hs(e,1,t),xt(e,t));break}}e=e.return}}function LS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yt(),t.pingedLanes|=t.suspendedLanes&n,Xe===t&&(ot&n)===n&&(ze===4||ze===3&&(ot&130023424)===ot&&500>be()-Kd?xr(t,0):Jd|=n),xt(t,e)}function ov(t,e){e===0&&(t.mode&1?(e=Ys,Ys<<=1,!(Ys&130023424)&&(Ys=4194304)):e=1);var n=yt();t=Pn(t,e),t!==null&&(hs(t,e,n),xt(t,n))}function US(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ov(t,n)}function FS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),ov(t,n)}var sv;sv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||At.current)It=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return It=!1,wS(t,e,n);It=!!(t.flags&131072)}else It=!1,xe&&e.flags&1048576&&cy(e,$l,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Tl(t,e),t=e.pendingProps;var i=Pi(e,gt.current);vi(e,n),i=Gd(null,e,r,t,i,n);var o=qd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rt(r)?(o=!0,ql(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ud(e),i.updater=Ia,e.stateNode=i,i._reactInternals=e,Sc(e,r,t,n),e=Ic(null,e,r,!0,o,n)):(e.tag=0,xe&&o&&Pd(e),_t(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Tl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=BS(r),t=Kt(r,t),i){case 0:e=wc(null,e,r,t,n);break e;case 1:e=vp(null,e,r,t,n);break e;case 11:e=_p(null,e,r,t,n);break e;case 14:e=yp(null,e,r,Kt(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kt(r,i),wc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kt(r,i),vp(t,e,r,i,n);case 3:e:{if(Hy(e),t===null)throw Error(q(387));r=e.pendingProps,o=e.memoizedState,i=o.element,gy(t,e),Jl(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Di(Error(q(423)),e),e=Ep(t,e,r,n,i);break e}else if(r!==i){i=Di(Error(q(424)),e),e=Ep(t,e,r,n,i);break e}else for(Mt=Qn(e.stateNode.containerInfo.firstChild),Dt=e,xe=!0,Qt=null,n=py(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ki(),r===i){e=kn(t,e,n);break e}_t(t,e,r,n)}e=e.child}return e;case 5:return _y(e),t===null&&vc(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,pc(r,i)?s=null:o!==null&&pc(r,o)&&(e.flags|=32),qy(t,e),_t(t,e,s,n),e.child;case 6:return t===null&&vc(e),null;case 13:return $y(t,e,n);case 4:return Fd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ni(e,null,r,n):_t(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kt(r,i),_p(t,e,r,i,n);case 7:return _t(t,e,e.pendingProps,n),e.child;case 8:return _t(t,e,e.pendingProps.children,n),e.child;case 12:return _t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Te(zl,r._currentValue),r._currentValue=s,o!==null)if(on(o.value,s)){if(o.children===i.children&&!At.current){e=kn(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Cn(-1,n&-n),c.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var h=f.pending;h===null?c.next=c:(c.next=h.next,h.next=c),f.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Ec(o.return,n,e),l.lanes|=n;break}c=c.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(q(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Ec(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}_t(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,vi(e,n),i=qt(i),r=r(i),e.flags|=1,_t(t,e,r,n),e.child;case 14:return r=e.type,i=Kt(r,e.pendingProps),i=Kt(r.type,i),yp(t,e,r,i,n);case 15:return Oy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kt(r,i),Tl(t,e),e.tag=1,Rt(r)?(t=!0,ql(e)):t=!1,vi(e,n),Fy(e,r,i),Sc(e,r,i,n),Ic(null,e,r,!0,t,n);case 19:return zy(t,e,n);case 22:return Gy(t,e,n)}throw Error(q(156,e.tag))};function lv(t,e){return V_(t,e)}function bS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(t,e,n,r){return new bS(t,e,n,r)}function jd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function BS(t){if(typeof t=="function")return jd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_d)return 11;if(t===yd)return 14}return 2}function er(t,e){var n=t.alternate;return n===null?(n=Bt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function wl(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")jd(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case ri:return Pr(n.children,i,o,e);case gd:s=8,i|=8;break;case Wu:return t=Bt(12,n,e,i|2),t.elementType=Wu,t.lanes=o,t;case Ju:return t=Bt(13,n,e,i),t.elementType=Ju,t.lanes=o,t;case Ku:return t=Bt(19,n,e,i),t.elementType=Ku,t.lanes=o,t;case __:return xa(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case m_:s=10;break e;case g_:s=9;break e;case _d:s=11;break e;case yd:s=14;break e;case Gn:s=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=Bt(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Pr(t,e,n,r){return t=Bt(7,t,r,e),t.lanes=n,t}function xa(t,e,n,r){return t=Bt(22,t,r,e),t.elementType=__,t.lanes=n,t.stateNode={isHidden:!1},t}function Nu(t,e,n){return t=Bt(6,t,null,e),t.lanes=n,t}function Mu(t,e,n){return e=Bt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function OS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fu(0),this.expirationTimes=fu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Zd(t,e,n,r,i,o,s,l,c){return t=new OS(t,e,n,l,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Bt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ud(o),t}function GS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ni,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function av(t){if(!t)return ir;t=t._reactInternals;e:{if(Hr(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Rt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(Rt(n))return ay(t,n,e)}return e}function uv(t,e,n,r,i,o,s,l,c){return t=Zd(n,r,!0,t,i,o,s,l,c),t.context=av(null),n=t.current,r=yt(),i=Zn(n),o=Cn(r,i),o.callback=e??null,Xn(n,o,i),t.current.lanes=i,hs(t,i,r),xt(t,r),t}function Pa(t,e,n,r){var i=e.current,o=yt(),s=Zn(i);return n=av(n),e.context===null?e.context=n:e.pendingContext=n,e=Cn(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Xn(i,e,s),t!==null&&(rn(t,i,s,o),yl(t,i,s)),s}function ta(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function kp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ef(t,e){kp(t,e),(t=t.alternate)&&kp(t,e)}function qS(){return null}var cv=typeof reportError=="function"?reportError:function(t){console.error(t)};function tf(t){this._internalRoot=t}ka.prototype.render=tf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));Pa(t,e,null,null)};ka.prototype.unmount=tf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ur(function(){Pa(null,t,null,null)}),e[xn]=null}};function ka(t){this._internalRoot=t}ka.prototype.unstable_scheduleHydration=function(t){if(t){var e=G_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hn.length&&e!==0&&e<Hn[n].priority;n++);Hn.splice(n,0,t),n===0&&H_(t)}};function nf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Na(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Np(){}function HS(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var f=ta(s);o.call(f)}}var s=uv(e,r,t,0,null,!1,!1,"",Np);return t._reactRootContainer=s,t[xn]=s.current,Qo(t.nodeType===8?t.parentNode:t),Ur(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var f=ta(c);l.call(f)}}var c=Zd(t,0,!1,null,null,!1,!1,"",Np);return t._reactRootContainer=c,t[xn]=c.current,Qo(t.nodeType===8?t.parentNode:t),Ur(function(){Pa(e,c,n,r)}),c}function Ma(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var c=ta(s);l.call(c)}}Pa(e,s,t,i)}else s=HS(n,e,t,i,r);return ta(s)}B_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=wo(e.pendingLanes);n!==0&&(Td(e,n|1),xt(e,be()),!(he&6)&&(Vi=be()+500,dr()))}break;case 13:Ur(function(){var r=Pn(t,1);if(r!==null){var i=yt();rn(r,t,1,i)}}),ef(t,1)}};Sd=function(t){if(t.tag===13){var e=Pn(t,134217728);if(e!==null){var n=yt();rn(e,t,134217728,n)}ef(t,134217728)}};O_=function(t){if(t.tag===13){var e=Zn(t),n=Pn(t,e);if(n!==null){var r=yt();rn(n,t,e,r)}ef(t,e)}};G_=function(){return ye};q_=function(t,e){var n=ye;try{return ye=t,e()}finally{ye=n}};ic=function(t,e,n){switch(e){case"input":if(Xu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Sa(r);if(!i)throw Error(q(90));v_(r),Xu(r,i)}}}break;case"textarea":T_(t,n);break;case"select":e=n.value,e!=null&&mi(t,!!n.multiple,e,!1)}};x_=Yd;P_=Ur;var $S={usingClientEntryPoint:!1,Events:[ms,li,Sa,A_,R_,Yd]},vo={findFiberByHostInstance:wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zS={bundleType:vo.bundleType,version:vo.version,rendererPackageName:vo.rendererPackageName,rendererConfig:vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=M_(t),t===null?null:t.stateNode},findFiberByHostInstance:vo.findFiberByHostInstance||qS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sl.isDisabled&&sl.supportsFiber)try{ya=sl.inject(zS),mn=sl}catch{}}Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$S;Lt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nf(e))throw Error(q(200));return GS(t,e,null,n)};Lt.createRoot=function(t,e){if(!nf(t))throw Error(q(299));var n=!1,r="",i=cv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Zd(t,1,!1,null,null,n,!1,r,i),t[xn]=e.current,Qo(t.nodeType===8?t.parentNode:t),new tf(e)};Lt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=M_(e),t=t===null?null:t.stateNode,t};Lt.flushSync=function(t){return Ur(t)};Lt.hydrate=function(t,e,n){if(!Na(e))throw Error(q(200));return Ma(null,t,e,!0,n)};Lt.hydrateRoot=function(t,e,n){if(!nf(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=cv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=uv(e,null,t,1,n??null,i,!1,o,s),t[xn]=e.current,Qo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ka(e)};Lt.render=function(t,e,n){if(!Na(e))throw Error(q(200));return Ma(null,t,e,!1,n)};Lt.unmountComponentAtNode=function(t){if(!Na(t))throw Error(q(40));return t._reactRootContainer?(Ur(function(){Ma(null,null,t,!1,function(){t._reactRootContainer=null,t[xn]=null})}),!0):!1};Lt.unstable_batchedUpdates=Yd;Lt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Na(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return Ma(t,e,n,!1,r)};Lt.version="18.3.1-next-f1338f8080-20240426";function dv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dv)}catch(t){console.error(t)}}dv(),d_.exports=Lt;var WS=d_.exports,Mp=WS;$u.createRoot=Mp.createRoot,$u.hydrateRoot=Mp.hydrateRoot;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let JS,KS;function YS(){return{geminiUrl:JS,vertexUrl:KS}}function QS(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=YS();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $r{}function Y(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function d(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const l=s.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[l])){const c=t[l];if(Array.isArray(n))for(let f=0;f<c.length;f++){const h=c[f];d(h,e.slice(o+1),n[f])}else for(const f of c)d(f,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const l=s.slice(0,-3);l in t||(t[l]=[{}]);const c=t[l];d(c[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function a(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in t){const s=t[o];return Array.isArray(s)?s.map(l=>a(l,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function XS(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),o=r.split("."),s=new Set;let l=-1;for(let c=0;c<i.length;c++)if(i[c]==="*"){l=c;break}if(l!==-1&&o.length>l)for(let c=l;c<o.length;c++){const f=o[c];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&s.add(f)}Fc(t,i,o,0,s)}}function Fc(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const o=e[r];if(o.endsWith("[]")){const s=o.slice(0,-2),l=t;if(s in l&&Array.isArray(l[s]))for(const c of l[s])Fc(c,e,n,r+1,i)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,l=Object.keys(s).filter(f=>!f.startsWith("_")&&!i.has(f)),c={};for(const f of l)c[f]=s[f];for(const[f,h]of Object.entries(c)){const p=[];for(const g of n.slice(r))g==="*"?p.push(f):p.push(g);d(s,p,h)}for(const f of l)delete s[f]}}else{const s=t;o in s&&Fc(s[o],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rf(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jS(t){const e={},n=a(t,["operationName"]);n!=null&&d(e,["operationName"],n);const r=a(t,["resourceName"]);return r!=null&&d(e,["_url","resourceName"],r),e}function ZS(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const r=a(t,["metadata"]);r!=null&&d(e,["metadata"],r);const i=a(t,["done"]);i!=null&&d(e,["done"],i);const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["response","generateVideoResponse"]);return s!=null&&d(e,["response"],tC(s)),e}function eC(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const r=a(t,["metadata"]);r!=null&&d(e,["metadata"],r);const i=a(t,["done"]);i!=null&&d(e,["done"],i);const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["response"]);return s!=null&&d(e,["response"],nC(s)),e}function tC(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>rC(s))),d(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&d(e,["raiMediaFilteredReasons"],i),e}function nC(t){const e={},n=a(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>iC(s))),d(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&d(e,["raiMediaFilteredReasons"],i),e}function rC(t){const e={},n=a(t,["video"]);return n!=null&&d(e,["video"],lC(n)),e}function iC(t){const e={},n=a(t,["_self"]);return n!=null&&d(e,["video"],aC(n)),e}function oC(t){const e={},n=a(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function sC(t){const e={},n=a(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function lC(t){const e={},n=a(t,["uri"]);n!=null&&d(e,["uri"],n);const r=a(t,["encodedVideo"]);r!=null&&d(e,["videoBytes"],rf(r));const i=a(t,["encoding"]);return i!=null&&d(e,["mimeType"],i),e}function aC(t){const e={},n=a(t,["gcsUri"]);n!=null&&d(e,["uri"],n);const r=a(t,["bytesBase64Encoded"]);r!=null&&d(e,["videoBytes"],rf(r));const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Dp;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Dp||(Dp={}));var Vp;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Vp||(Vp={}));var en;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(en||(en={}));var Lp;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Lp||(Lp={}));var Up;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Up||(Up={}));var Fp;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Fp||(Fp={}));var bp;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(bp||(bp={}));var Bp;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Bp||(Bp={}));var Op;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Op||(Op={}));var Gp;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Gp||(Gp={}));var qp;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(qp||(qp={}));var Hp;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Hp||(Hp={}));var $p;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})($p||($p={}));var zp;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(zp||(zp={}));var Wp;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Wp||(Wp={}));var na;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(na||(na={}));var Jp;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Jp||(Jp={}));var bc;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(bc||(bc={}));var Kp;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Kp||(Kp={}));var Yp;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Yp||(Yp={}));var Qp;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V"})(Qp||(Qp={}));var Xp;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Xp||(Xp={}));var jp;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(jp||(jp={}));var Zp;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Zp||(Zp={}));var em;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(em||(em={}));var tm;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(tm||(tm={}));var nm;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(nm||(nm={}));var rm;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(rm||(rm={}));var im;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(im||(im={}));var om;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(om||(om={}));var sm;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(sm||(sm={}));var lm;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(lm||(lm={}));var am;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(am||(am={}));var um;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(um||(um={}));var cm;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(cm||(cm={}));var dm;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(dm||(dm={}));var fm;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(fm||(fm={}));var hm;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(hm||(hm={}));var pm;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(pm||(pm={}));var mm;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(mm||(mm={}));var gm;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(gm||(gm={}));var _m;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(_m||(_m={}));var ym;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ym||(ym={}));var vm;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(vm||(vm={}));var Em;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Em||(Em={}));var Tm;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Tm||(Tm={}));var Sm;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Sm||(Sm={}));var Cm;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Cm||(Cm={}));var pi;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(pi||(pi={}));class Bc{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Eo{get text(){var e,n,r,i,o,s,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",h=!1;const p=[];for(const g of(c=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[E,I]of Object.entries(g))E!=="text"&&E!=="thought"&&(I!==null||I!==void 0)&&p.push(E);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;h=!0,f+=g.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?f:void 0}get data(){var e,n,r,i,o,s,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const h=[];for(const p of(c=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[g,E]of Object.entries(p))g!=="inlineData"&&(E!==null||E!==void 0)&&h.push(g);p.inlineData&&typeof p.inlineData.data=="string"&&(f+=atob(p.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,r,i,o,s,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(c=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,n,r,i,o,s,l,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(c=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(f=h==null?void 0:h[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,r,i,o,s,l,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(c=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(f=h==null?void 0:h[0])===null||f===void 0?void 0:f.output}}class wm{}class Im{}class uC{}class cC{}class dC{}class fC{}class Am{}class Rm{}class xm{}class hC{}class ra{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new ra;let i;const o=e;return n?i=eC(o):i=ZS(o),Object.assign(r,i),r}}class Pm{}class km{}class Nm{}class pC{}class mC{}class gC{}class Mm{}class _C{get text(){var e,n,r;let i="",o=!1;const s=[];for(const l of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,f]of Object.entries(l))c!=="text"&&c!=="thought"&&f!==null&&s.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;o=!0,i+=l.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(s))l!=="inlineData"&&c!==null&&o.push(l);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class yC{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pe(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function fv(t,e){const n=pe(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function hv(t){return Array.isArray(t)?t.map(e=>ia(e)):[ia(t)]}function ia(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function pv(t){const e=ia(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function mv(t){const e=ia(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Dm(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function gv(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Dm(e)):[Dm(t)]}function Oc(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Vm(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Lm(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function pt(t){if(t==null)throw new Error("ContentUnion is required");return Oc(t)?t:{role:"user",parts:gv(t)}}function of(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=pt(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=pt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>pt(n)):[pt(e)]}function Gt(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Vm(t)||Lm(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[pt(t)]}const e=[],n=[],r=Oc(t[0]);for(const i of t){const o=Oc(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(Vm(i)||Lm(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:gv(n)}),e}function vC(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(en).includes(n[0].toUpperCase())?n[0].toUpperCase():en.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(en).includes(r.toUpperCase())?r.toUpperCase():en.TYPE_UNSPECIFIED})}}function Ti(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&vC(t.type,e);for(const[s,l]of Object.entries(t))if(l!=null)if(s=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(en).includes(l.toUpperCase())?l.toUpperCase():en.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Ti(l);else if(r.includes(s)){const c=[];for(const f of l){if(f.type=="null"){e.nullable=!0;continue}c.push(Ti(f))}e[s]=c}else if(i.includes(s)){const c={};for(const[f,h]of Object.entries(l))c[f]=Ti(h);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=l}return e}function sf(t){return Ti(t)}function lf(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function af(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Hi(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ti(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ti(e.response));return t}function $i(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function EC(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Dn(t,e){if(typeof e!="string")throw new Error("name must be a string");return EC(t,e,"cachedContents")}function _v(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function fr(t){return rf(t)}function TC(t){return t!=null&&typeof t=="object"&&"name"in t}function SC(t){return t!=null&&typeof t=="object"&&"video"in t}function CC(t){return t!=null&&typeof t=="object"&&"uri"in t}function yv(t){var e;let n;if(TC(t)&&(n=t.name),!(CC(t)&&(n=t.uri,n===void 0))&&!(SC(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function vv(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Ev(t){for(const e of["models","tunedModels","publisherModels"])if(wC(t,e))return t[e];return[]}function wC(t,e){return t!==null&&typeof t=="object"&&e in t}function IC(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function AC(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=IC(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function Tv(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function RC(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Sv(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const c=s.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function zi(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Cv(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xC(t){const e={},n=a(t,["responsesFile"]);n!=null&&d(e,["fileName"],n);const r=a(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>ow(s))),d(e,["inlinedResponses"],o)}const i=a(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["inlinedEmbedContentResponses"],o)}return e}function PC(t){const e={},n=a(t,["predictionsFormat"]);n!=null&&d(e,["format"],n);const r=a(t,["gcsDestination","outputUriPrefix"]);r!=null&&d(e,["gcsUri"],r);const i=a(t,["bigqueryDestination","outputUri"]);return i!=null&&d(e,["bigqueryUri"],i),e}function kC(t){const e={},n=a(t,["format"]);n!=null&&d(e,["predictionsFormat"],n);const r=a(t,["gcsUri"]);r!=null&&d(e,["gcsDestination","outputUriPrefix"],r);const i=a(t,["bigqueryUri"]);if(i!=null&&d(e,["bigqueryDestination","outputUri"],i),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Il(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const r=a(t,["metadata","displayName"]);r!=null&&d(e,["displayName"],r);const i=a(t,["metadata","state"]);i!=null&&d(e,["state"],Cv(i));const o=a(t,["metadata","createTime"]);o!=null&&d(e,["createTime"],o);const s=a(t,["metadata","endTime"]);s!=null&&d(e,["endTime"],s);const l=a(t,["metadata","updateTime"]);l!=null&&d(e,["updateTime"],l);const c=a(t,["metadata","model"]);c!=null&&d(e,["model"],c);const f=a(t,["metadata","output"]);return f!=null&&d(e,["dest"],xC(Sv(f))),e}function Gc(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const r=a(t,["displayName"]);r!=null&&d(e,["displayName"],r);const i=a(t,["state"]);i!=null&&d(e,["state"],Cv(i));const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["createTime"]);s!=null&&d(e,["createTime"],s);const l=a(t,["startTime"]);l!=null&&d(e,["startTime"],l);const c=a(t,["endTime"]);c!=null&&d(e,["endTime"],c);const f=a(t,["updateTime"]);f!=null&&d(e,["updateTime"],f);const h=a(t,["model"]);h!=null&&d(e,["model"],h);const p=a(t,["inputConfig"]);p!=null&&d(e,["src"],NC(p));const g=a(t,["outputConfig"]);return g!=null&&d(e,["dest"],PC(Sv(g))),e}function NC(t){const e={},n=a(t,["instancesFormat"]);n!=null&&d(e,["format"],n);const r=a(t,["gcsSource","uris"]);r!=null&&d(e,["gcsUri"],r);const i=a(t,["bigquerySource","inputUri"]);return i!=null&&d(e,["bigqueryUri"],i),e}function MC(t,e){const n={};if(a(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=a(e,["fileName"]);r!=null&&d(n,["fileName"],r);const i=a(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>iw(t,s))),d(n,["requests","requests"],o)}return n}function DC(t){const e={},n=a(t,["format"]);n!=null&&d(e,["instancesFormat"],n);const r=a(t,["gcsUri"]);r!=null&&d(e,["gcsSource","uris"],r);const i=a(t,["bigqueryUri"]);if(i!=null&&d(e,["bigquerySource","inputUri"],i),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function VC(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["data"]);n!=null&&d(e,["data"],n);const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function LC(t,e){const n={},r=a(e,["name"]);return r!=null&&d(n,["_url","name"],zi(t,r)),n}function UC(t,e){const n={},r=a(e,["name"]);return r!=null&&d(n,["_url","name"],zi(t,r)),n}function FC(t){const e={},n=a(t,["content"]);n!=null&&d(e,["content"],n);const r=a(t,["citationMetadata"]);r!=null&&d(e,["citationMetadata"],bC(r));const i=a(t,["tokenCount"]);i!=null&&d(e,["tokenCount"],i);const o=a(t,["finishReason"]);o!=null&&d(e,["finishReason"],o);const s=a(t,["urlContextMetadata"]);s!=null&&d(e,["urlContextMetadata"],s);const l=a(t,["avgLogprobs"]);l!=null&&d(e,["avgLogprobs"],l);const c=a(t,["groundingMetadata"]);c!=null&&d(e,["groundingMetadata"],c);const f=a(t,["index"]);f!=null&&d(e,["index"],f);const h=a(t,["logprobsResult"]);h!=null&&d(e,["logprobsResult"],h);const p=a(t,["safetyRatings"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(E=>E)),d(e,["safetyRatings"],g)}return e}function bC(t){const e={},n=a(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),d(e,["citations"],r)}return e}function wv(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>fw(o))),d(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&d(e,["role"],r),e}function BC(t,e){const n={},r=a(t,["displayName"]);if(e!==void 0&&r!=null&&d(e,["batch","displayName"],r),a(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function OC(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const i=a(t,["dest"]);return e!==void 0&&i!=null&&d(e,["outputConfig"],kC(RC(i))),n}function Um(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],pe(t,r));const i=a(e,["src"]);i!=null&&d(n,["batch","inputConfig"],MC(t,Tv(t,i)));const o=a(e,["config"]);return o!=null&&BC(o,n),n}function GC(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["model"],pe(t,r));const i=a(e,["src"]);i!=null&&d(n,["inputConfig"],DC(Tv(t,i)));const o=a(e,["config"]);return o!=null&&OC(o,n),n}function qC(t,e){const n={},r=a(t,["displayName"]);return e!==void 0&&r!=null&&d(e,["batch","displayName"],r),n}function HC(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],pe(t,r));const i=a(e,["src"]);i!=null&&d(n,["batch","inputConfig"],QC(t,i));const o=a(e,["config"]);return o!=null&&qC(o,n),n}function $C(t,e){const n={},r=a(e,["name"]);return r!=null&&d(n,["_url","name"],zi(t,r)),n}function zC(t,e){const n={},r=a(e,["name"]);return r!=null&&d(n,["_url","name"],zi(t,r)),n}function WC(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&d(e,["name"],r);const i=a(t,["done"]);i!=null&&d(e,["done"],i);const o=a(t,["error"]);return o!=null&&d(e,["error"],o),e}function JC(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&d(e,["name"],r);const i=a(t,["done"]);i!=null&&d(e,["done"],i);const o=a(t,["error"]);return o!=null&&d(e,["error"],o),e}function KC(t,e){const n={},r=a(e,["contents"]);if(r!=null){let o=of(t,r);Array.isArray(o)&&(o=o.map(s=>s)),d(n,["requests[]","request","content"],o)}const i=a(e,["config"]);return i!=null&&(d(n,["_self"],YC(i,n)),XS(n,{"requests[].*":"requests[].request.*"})),n}function YC(t,e){const n={},r=a(t,["taskType"]);e!==void 0&&r!=null&&d(e,["requests[]","taskType"],r);const i=a(t,["title"]);e!==void 0&&i!=null&&d(e,["requests[]","title"],i);const o=a(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&d(e,["requests[]","outputDimensionality"],o),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function QC(t,e){const n={},r=a(e,["fileName"]);r!=null&&d(n,["file_name"],r);const i=a(e,["inlinedRequests"]);return i!=null&&d(n,["requests"],KC(t,i)),n}function XC(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function jC(t,e,n){const r={},i=a(e,["systemInstruction"]);n!==void 0&&i!=null&&d(n,["systemInstruction"],wv(pt(i)));const o=a(e,["temperature"]);o!=null&&d(r,["temperature"],o);const s=a(e,["topP"]);s!=null&&d(r,["topP"],s);const l=a(e,["topK"]);l!=null&&d(r,["topK"],l);const c=a(e,["candidateCount"]);c!=null&&d(r,["candidateCount"],c);const f=a(e,["maxOutputTokens"]);f!=null&&d(r,["maxOutputTokens"],f);const h=a(e,["stopSequences"]);h!=null&&d(r,["stopSequences"],h);const p=a(e,["responseLogprobs"]);p!=null&&d(r,["responseLogprobs"],p);const g=a(e,["logprobs"]);g!=null&&d(r,["logprobs"],g);const E=a(e,["presencePenalty"]);E!=null&&d(r,["presencePenalty"],E);const I=a(e,["frequencyPenalty"]);I!=null&&d(r,["frequencyPenalty"],I);const N=a(e,["seed"]);N!=null&&d(r,["seed"],N);const V=a(e,["responseMimeType"]);V!=null&&d(r,["responseMimeType"],V);const A=a(e,["responseSchema"]);A!=null&&d(r,["responseSchema"],sf(A));const S=a(e,["responseJsonSchema"]);if(S!=null&&d(r,["responseJsonSchema"],S),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const x=a(e,["safetySettings"]);if(n!==void 0&&x!=null){let M=x;Array.isArray(M)&&(M=M.map(P=>hw(P))),d(n,["safetySettings"],M)}const D=a(e,["tools"]);if(n!==void 0&&D!=null){let M=$i(D);Array.isArray(M)&&(M=M.map(P=>pw(Hi(P)))),d(n,["tools"],M)}const b=a(e,["toolConfig"]);if(n!==void 0&&b!=null&&d(n,["toolConfig"],b),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=a(e,["cachedContent"]);n!==void 0&&F!=null&&d(n,["cachedContent"],Dn(t,F));const w=a(e,["responseModalities"]);w!=null&&d(r,["responseModalities"],w);const v=a(e,["mediaResolution"]);v!=null&&d(r,["mediaResolution"],v);const C=a(e,["speechConfig"]);if(C!=null&&d(r,["speechConfig"],lf(C)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=a(e,["thinkingConfig"]);R!=null&&d(r,["thinkingConfig"],R);const k=a(e,["imageConfig"]);return k!=null&&d(r,["imageConfig"],k),r}function ZC(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>FC(f))),d(e,["candidates"],c)}const i=a(t,["modelVersion"]);i!=null&&d(e,["modelVersion"],i);const o=a(t,["promptFeedback"]);o!=null&&d(e,["promptFeedback"],o);const s=a(t,["responseId"]);s!=null&&d(e,["responseId"],s);const l=a(t,["usageMetadata"]);return l!=null&&d(e,["usageMetadata"],l),e}function ew(t,e){const n={},r=a(e,["name"]);return r!=null&&d(n,["_url","name"],zi(t,r)),n}function tw(t,e){const n={},r=a(e,["name"]);return r!=null&&d(n,["_url","name"],zi(t,r)),n}function nw(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function rw(t){const e={},n=a(t,["timeRangeFilter"]);if(n!=null&&d(e,["timeRangeFilter"],n),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function iw(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["request","model"],pe(t,r));const i=a(e,["contents"]);if(i!=null){let l=Gt(i);Array.isArray(l)&&(l=l.map(c=>wv(c))),d(n,["request","contents"],l)}const o=a(e,["metadata"]);o!=null&&d(n,["metadata"],o);const s=a(e,["config"]);return s!=null&&d(n,["request","generationConfig"],jC(t,s,a(n,["request"],{}))),n}function ow(t){const e={},n=a(t,["response"]);n!=null&&d(e,["response"],ZC(n));const r=a(t,["error"]);return r!=null&&d(e,["error"],r),e}function sw(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);if(e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),a(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function lw(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);e!==void 0&&i!=null&&d(e,["_query","pageToken"],i);const o=a(t,["filter"]);return e!==void 0&&o!=null&&d(e,["_query","filter"],o),n}function aw(t){const e={},n=a(t,["config"]);return n!=null&&sw(n,e),e}function uw(t){const e={},n=a(t,["config"]);return n!=null&&lw(n,e),e}function cw(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=a(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Il(s))),d(e,["batchJobs"],o)}return e}function dw(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=a(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Gc(s))),d(e,["batchJobs"],o)}return e}function fw(t){const e={},n=a(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],n);const r=a(t,["thought"]);r!=null&&d(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&d(e,["inlineData"],VC(i));const o=a(t,["fileData"]);o!=null&&d(e,["fileData"],XC(o));const s=a(t,["thoughtSignature"]);s!=null&&d(e,["thoughtSignature"],s);const l=a(t,["functionCall"]);l!=null&&d(e,["functionCall"],l);const c=a(t,["codeExecutionResult"]);c!=null&&d(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&d(e,["executableCode"],f);const h=a(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const p=a(t,["text"]);return p!=null&&d(e,["text"],p),e}function hw(t){const e={};if(a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=a(t,["category"]);n!=null&&d(e,["category"],n);const r=a(t,["threshold"]);return r!=null&&d(e,["threshold"],r),e}function pw(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),d(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearch"]);r!=null&&d(e,["googleSearch"],rw(r));const i=a(t,["googleSearchRetrieval"]);if(i!=null&&d(e,["googleSearchRetrieval"],i),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["googleMaps"]);o!=null&&d(e,["googleMaps"],nw(o));const s=a(t,["urlContext"]);s!=null&&d(e,["urlContext"],s);const l=a(t,["computerUse"]);l!=null&&d(e,["computerUse"],l);const c=a(t,["codeExecution"]);return c!=null&&d(e,["codeExecution"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Fr;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Fr||(Fr={}));class _s{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mw extends $r{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new _s(Fr.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=Um(this.apiClient,e),r=n._url,i=Y("{model}:batchGenerateContent",r),l=n.batch.inputConfig.requests,c=l.requests,f=[];for(const h of c){const p=Object.assign({},h);if(p.systemInstruction){const g=p.systemInstruction;delete p.systemInstruction;const E=p.request;E.systemInstruction=g,p.request=E}f.push(p)}return l.requests=f,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=GC(this.apiClient,e);return l=Y("batchPredictionJobs",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Gc(h))}else{const f=Um(this.apiClient,e);return l=Y("{model}:batchGenerateContent",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Il(h))}}async createEmbeddingsInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=HC(this.apiClient,e);return o=Y("{model}:asyncBatchEmbedContent",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>Il(c))}}async get(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=tw(this.apiClient,e);return l=Y("batchPredictionJobs/{name}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Gc(h))}else{const f=ew(this.apiClient,e);return l=Y("batches/{name}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Il(h))}}async cancel(e){var n,r,i,o;let s="",l={};if(this.apiClient.isVertexAI()){const c=UC(this.apiClient,e);s=Y("batchPredictionJobs/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=LC(this.apiClient,e);s=Y("batches/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=uw(e);return l=Y("batchPredictionJobs",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=dw(h),g=new Mm;return Object.assign(g,p),g})}else{const f=aw(e);return l=Y("batches",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=cw(h),g=new Mm;return Object.assign(g,p),g})}}async delete(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=zC(this.apiClient,e);return l=Y("batchPredictionJobs/{name}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>JC(h))}else{const f=$C(this.apiClient,e);return l=Y("batches/{name}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>WC(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gw(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["data"]);n!=null&&d(e,["data"],n);const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Fm(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Fw(o))),d(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&d(e,["role"],r),e}function _w(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const i=a(t,["expireTime"]);e!==void 0&&i!=null&&d(e,["expireTime"],i);const o=a(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let h=Gt(s);Array.isArray(h)&&(h=h.map(p=>Fm(p))),d(e,["contents"],h)}const l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&d(e,["systemInstruction"],Fm(pt(l)));const c=a(t,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(p=>bw(p))),d(e,["tools"],h)}const f=a(t,["toolConfig"]);if(e!==void 0&&f!=null&&d(e,["toolConfig"],f),a(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function yw(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const i=a(t,["expireTime"]);e!==void 0&&i!=null&&d(e,["expireTime"],i);const o=a(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let p=Gt(s);Array.isArray(p)&&(p=p.map(g=>g)),d(e,["contents"],p)}const l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&d(e,["systemInstruction"],pt(l));const c=a(t,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(g=>Bw(g))),d(e,["tools"],p)}const f=a(t,["toolConfig"]);e!==void 0&&f!=null&&d(e,["toolConfig"],f);const h=a(t,["kmsKeyName"]);return e!==void 0&&h!=null&&d(e,["encryption_spec","kmsKeyName"],h),n}function vw(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["model"],fv(t,r));const i=a(e,["config"]);return i!=null&&_w(i,n),n}function Ew(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["model"],fv(t,r));const i=a(e,["config"]);return i!=null&&yw(i,n),n}function Tw(t,e){const n={},r=a(e,["name"]);return r!=null&&d(n,["_url","name"],Dn(t,r)),n}function Sw(t,e){const n={},r=a(e,["name"]);return r!=null&&d(n,["_url","name"],Dn(t,r)),n}function Cw(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function ww(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function Iw(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Aw(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&d(e,["description"],n);const r=a(t,["name"]);r!=null&&d(e,["name"],r);const i=a(t,["parameters"]);i!=null&&d(e,["parameters"],i);const o=a(t,["parametersJsonSchema"]);o!=null&&d(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&d(e,["response"],s);const l=a(t,["responseJsonSchema"]);return l!=null&&d(e,["responseJsonSchema"],l),e}function Rw(t,e){const n={},r=a(e,["name"]);return r!=null&&d(n,["_url","name"],Dn(t,r)),n}function xw(t,e){const n={},r=a(e,["name"]);return r!=null&&d(n,["_url","name"],Dn(t,r)),n}function Pw(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function kw(t){const e={},n=a(t,["timeRangeFilter"]);if(n!=null&&d(e,["timeRangeFilter"],n),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Nw(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),n}function Mw(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),n}function Dw(t){const e={},n=a(t,["config"]);return n!=null&&Nw(n,e),e}function Vw(t){const e={},n=a(t,["config"]);return n!=null&&Mw(n,e),e}function Lw(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=a(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["cachedContents"],o)}return e}function Uw(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=a(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["cachedContents"],o)}return e}function Fw(t){const e={},n=a(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],n);const r=a(t,["thought"]);r!=null&&d(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&d(e,["inlineData"],gw(i));const o=a(t,["fileData"]);o!=null&&d(e,["fileData"],Iw(o));const s=a(t,["thoughtSignature"]);s!=null&&d(e,["thoughtSignature"],s);const l=a(t,["functionCall"]);l!=null&&d(e,["functionCall"],l);const c=a(t,["codeExecutionResult"]);c!=null&&d(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&d(e,["executableCode"],f);const h=a(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const p=a(t,["text"]);return p!=null&&d(e,["text"],p),e}function bw(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),d(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearch"]);r!=null&&d(e,["googleSearch"],kw(r));const i=a(t,["googleSearchRetrieval"]);if(i!=null&&d(e,["googleSearchRetrieval"],i),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["googleMaps"]);o!=null&&d(e,["googleMaps"],Pw(o));const s=a(t,["urlContext"]);s!=null&&d(e,["urlContext"],s);const l=a(t,["computerUse"]);l!=null&&d(e,["computerUse"],l);const c=a(t,["codeExecution"]);return c!=null&&d(e,["codeExecution"],c),e}function Bw(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>Aw(g))),d(e,["functionDeclarations"],p)}const r=a(t,["retrieval"]);r!=null&&d(e,["retrieval"],r);const i=a(t,["googleSearch"]);i!=null&&d(e,["googleSearch"],i);const o=a(t,["googleSearchRetrieval"]);o!=null&&d(e,["googleSearchRetrieval"],o);const s=a(t,["enterpriseWebSearch"]);s!=null&&d(e,["enterpriseWebSearch"],s);const l=a(t,["googleMaps"]);l!=null&&d(e,["googleMaps"],l);const c=a(t,["urlContext"]);c!=null&&d(e,["urlContext"],c);const f=a(t,["computerUse"]);f!=null&&d(e,["computerUse"],f);const h=a(t,["codeExecution"]);return h!=null&&d(e,["codeExecution"],h),e}function Ow(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const i=a(t,["expireTime"]);return e!==void 0&&i!=null&&d(e,["expireTime"],i),n}function Gw(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const i=a(t,["expireTime"]);return e!==void 0&&i!=null&&d(e,["expireTime"],i),n}function qw(t,e){const n={},r=a(e,["name"]);r!=null&&d(n,["_url","name"],Dn(t,r));const i=a(e,["config"]);return i!=null&&Ow(i,n),n}function Hw(t,e){const n={},r=a(e,["name"]);r!=null&&d(n,["_url","name"],Dn(t,r));const i=a(e,["config"]);return i!=null&&Gw(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $w extends $r{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new _s(Fr.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=Ew(this.apiClient,e);return l=Y("cachedContents",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const f=vw(this.apiClient,e);return l=Y("cachedContents",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async get(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=xw(this.apiClient,e);return l=Y("{name}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const f=Rw(this.apiClient,e);return l=Y("{name}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=Sw(this.apiClient,e);return l=Y("{name}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=ww(h),g=new km;return Object.assign(g,p),g})}else{const f=Tw(this.apiClient,e);return l=Y("{name}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=Cw(h),g=new km;return Object.assign(g,p),g})}}async update(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=Hw(this.apiClient,e);return l=Y("{name}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const f=qw(this.apiClient,e);return l=Y("{name}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async listInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=Vw(e);return l=Y("cachedContents",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=Uw(h),g=new Nm;return Object.assign(g,p),g})}else{const f=Dw(e);return l=Y("cachedContents",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=Lw(h),g=new Nm;return Object.assign(g,p),g})}}}function bm(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ie(t){return this instanceof Ie?(this.v=t,this):new Ie(t)}function Si(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(E){return function(I){return Promise.resolve(I).then(E,p)}}function l(E,I){r[E]&&(i[E]=function(N){return new Promise(function(V,A){o.push([E,N,V,A])>1||c(E,N)})},I&&(i[E]=I(i[E])))}function c(E,I){try{f(r[E](I))}catch(N){g(o[0][3],N)}}function f(E){E.value instanceof Ie?Promise.resolve(E.value.v).then(h,p):g(o[0][2],E)}function h(E){c("next",E)}function p(E){c("throw",E)}function g(E,I){E(I),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Uo(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof bm=="function"?bm(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(l,c){s=t[o](s),i(l,c,s.done,s.value)})}}function i(o,s,l,c){Promise.resolve(c).then(function(f){o({value:f,done:l})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zw(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Iv(n)}function Iv(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Ww(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Bm(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!Iv(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class Jw{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Kw(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Kw{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),Ww(o)}async sendMessage(e){var n;await this.sendPromise;const r=pt(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,l;const c=await i,f=(s=(o=c.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,h=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let g=[];h!=null&&(g=(l=h.slice(p))!==null&&l!==void 0?l:[]);const E=f?[f]:[];this.recordHistory(r,E,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=pt(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?Bm(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return Si(this,arguments,function*(){var s,l,c,f;const h=[];try{for(var p=!0,g=Uo(e),E;E=yield Ie(g.next()),s=E.done,!s;p=!0){f=E.value,p=!1;const I=f;if(zw(I)){const N=(i=(r=I.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;N!==void 0&&h.push(N)}yield yield Ie(I)}}catch(I){l={error:I}}finally{try{!p&&!s&&(c=g.return)&&(yield Ie(c.call(g)))}finally{if(l)throw l.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Bm(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Da extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Da.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yw(t){const e={},n=a(t,["file"]);return n!=null&&d(e,["file"],n),e}function Qw(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function Xw(t){const e={},n=a(t,["name"]);return n!=null&&d(e,["_url","file"],yv(n)),e}function jw(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function Zw(t){const e={},n=a(t,["name"]);return n!=null&&d(e,["_url","file"],yv(n)),e}function eI(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),n}function tI(t){const e={},n=a(t,["config"]);return n!=null&&eI(n,e),e}function nI(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=a(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rI extends $r{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new _s(Fr.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=tI(e);return o=Y("files",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=nI(c),h=new pC;return Object.assign(h,f),h})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Yw(e);return o=Y("upload/v1beta/files",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=Qw(c),h=new mC;return Object.assign(h,f),h})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Zw(e);return o=Y("files/{file}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Xw(e);return o=Y("files/{file}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=jw(c),h=new gC;return Object.assign(h,f),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Al(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["data"]);n!=null&&d(e,["data"],n);const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function iI(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>vI(o))),d(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&d(e,["role"],r),e}function oI(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function sI(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&d(e,["description"],n);const r=a(t,["name"]);r!=null&&d(e,["name"],r);const i=a(t,["parameters"]);i!=null&&d(e,["parameters"],i);const o=a(t,["parametersJsonSchema"]);o!=null&&d(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&d(e,["response"],s);const l=a(t,["responseJsonSchema"]);return l!=null&&d(e,["responseJsonSchema"],l),e}function lI(t){const e={},n=a(t,["modelSelectionConfig"]);n!=null&&d(e,["modelConfig"],n);const r=a(t,["audioTimestamp"]);r!=null&&d(e,["audioTimestamp"],r);const i=a(t,["candidateCount"]);i!=null&&d(e,["candidateCount"],i);const o=a(t,["enableAffectiveDialog"]);o!=null&&d(e,["enableAffectiveDialog"],o);const s=a(t,["frequencyPenalty"]);s!=null&&d(e,["frequencyPenalty"],s);const l=a(t,["logprobs"]);l!=null&&d(e,["logprobs"],l);const c=a(t,["maxOutputTokens"]);c!=null&&d(e,["maxOutputTokens"],c);const f=a(t,["mediaResolution"]);f!=null&&d(e,["mediaResolution"],f);const h=a(t,["presencePenalty"]);h!=null&&d(e,["presencePenalty"],h);const p=a(t,["responseJsonSchema"]);p!=null&&d(e,["responseJsonSchema"],p);const g=a(t,["responseLogprobs"]);g!=null&&d(e,["responseLogprobs"],g);const E=a(t,["responseMimeType"]);E!=null&&d(e,["responseMimeType"],E);const I=a(t,["responseModalities"]);I!=null&&d(e,["responseModalities"],I);const N=a(t,["responseSchema"]);N!=null&&d(e,["responseSchema"],N);const V=a(t,["routingConfig"]);V!=null&&d(e,["routingConfig"],V);const A=a(t,["seed"]);A!=null&&d(e,["seed"],A);const S=a(t,["speechConfig"]);S!=null&&d(e,["speechConfig"],Av(S));const x=a(t,["stopSequences"]);x!=null&&d(e,["stopSequences"],x);const D=a(t,["temperature"]);D!=null&&d(e,["temperature"],D);const b=a(t,["thinkingConfig"]);b!=null&&d(e,["thinkingConfig"],b);const F=a(t,["topK"]);F!=null&&d(e,["topK"],F);const w=a(t,["topP"]);return w!=null&&d(e,["topP"],w),e}function aI(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function uI(t){const e={},n=a(t,["timeRangeFilter"]);if(n!=null&&d(e,["timeRangeFilter"],n),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function cI(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],r);const i=a(t,["responseModalities"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig","responseModalities"],i);const o=a(t,["temperature"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","topK"],l);const c=a(t,["maxOutputTokens"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","maxOutputTokens"],c);const f=a(t,["mediaResolution"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","mediaResolution"],f);const h=a(t,["seed"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","seed"],h);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","speechConfig"],af(p));const g=a(t,["thinkingConfig"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","thinkingConfig"],g);const E=a(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],E);const I=a(t,["systemInstruction"]);e!==void 0&&I!=null&&d(e,["setup","systemInstruction"],iI(pt(I)));const N=a(t,["tools"]);if(e!==void 0&&N!=null){let F=$i(N);Array.isArray(F)&&(F=F.map(w=>TI(Hi(w)))),d(e,["setup","tools"],F)}const V=a(t,["sessionResumption"]);e!==void 0&&V!=null&&d(e,["setup","sessionResumption"],EI(V));const A=a(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&d(e,["setup","inputAudioTranscription"],A);const S=a(t,["outputAudioTranscription"]);e!==void 0&&S!=null&&d(e,["setup","outputAudioTranscription"],S);const x=a(t,["realtimeInputConfig"]);e!==void 0&&x!=null&&d(e,["setup","realtimeInputConfig"],x);const D=a(t,["contextWindowCompression"]);e!==void 0&&D!=null&&d(e,["setup","contextWindowCompression"],D);const b=a(t,["proactivity"]);return e!==void 0&&b!=null&&d(e,["setup","proactivity"],b),n}function dI(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],lI(r));const i=a(t,["responseModalities"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig","responseModalities"],i);const o=a(t,["temperature"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","topK"],l);const c=a(t,["maxOutputTokens"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","maxOutputTokens"],c);const f=a(t,["mediaResolution"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","mediaResolution"],f);const h=a(t,["seed"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","seed"],h);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","speechConfig"],Av(af(p)));const g=a(t,["thinkingConfig"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","thinkingConfig"],g);const E=a(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],E);const I=a(t,["systemInstruction"]);e!==void 0&&I!=null&&d(e,["setup","systemInstruction"],pt(I));const N=a(t,["tools"]);if(e!==void 0&&N!=null){let F=$i(N);Array.isArray(F)&&(F=F.map(w=>SI(Hi(w)))),d(e,["setup","tools"],F)}const V=a(t,["sessionResumption"]);e!==void 0&&V!=null&&d(e,["setup","sessionResumption"],V);const A=a(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&d(e,["setup","inputAudioTranscription"],A);const S=a(t,["outputAudioTranscription"]);e!==void 0&&S!=null&&d(e,["setup","outputAudioTranscription"],S);const x=a(t,["realtimeInputConfig"]);e!==void 0&&x!=null&&d(e,["setup","realtimeInputConfig"],x);const D=a(t,["contextWindowCompression"]);e!==void 0&&D!=null&&d(e,["setup","contextWindowCompression"],D);const b=a(t,["proactivity"]);return e!==void 0&&b!=null&&d(e,["setup","proactivity"],b),n}function fI(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["setup","model"],pe(t,r));const i=a(e,["config"]);return i!=null&&d(n,["config"],cI(i,n)),n}function hI(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["setup","model"],pe(t,r));const i=a(e,["config"]);return i!=null&&d(n,["config"],dI(i,n)),n}function pI(t){const e={},n=a(t,["musicGenerationConfig"]);return n!=null&&d(e,["musicGenerationConfig"],n),e}function mI(t){const e={},n=a(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),d(e,["weightedPrompts"],r)}return e}function gI(t){const e={},n=a(t,["media"]);if(n!=null){let f=hv(n);Array.isArray(f)&&(f=f.map(h=>Al(h))),d(e,["mediaChunks"],f)}const r=a(t,["audio"]);r!=null&&d(e,["audio"],Al(mv(r)));const i=a(t,["audioStreamEnd"]);i!=null&&d(e,["audioStreamEnd"],i);const o=a(t,["video"]);o!=null&&d(e,["video"],Al(pv(o)));const s=a(t,["text"]);s!=null&&d(e,["text"],s);const l=a(t,["activityStart"]);l!=null&&d(e,["activityStart"],l);const c=a(t,["activityEnd"]);return c!=null&&d(e,["activityEnd"],c),e}function _I(t){const e={},n=a(t,["media"]);if(n!=null){let f=hv(n);Array.isArray(f)&&(f=f.map(h=>h)),d(e,["mediaChunks"],f)}const r=a(t,["audio"]);r!=null&&d(e,["audio"],mv(r));const i=a(t,["audioStreamEnd"]);i!=null&&d(e,["audioStreamEnd"],i);const o=a(t,["video"]);o!=null&&d(e,["video"],pv(o));const s=a(t,["text"]);s!=null&&d(e,["text"],s);const l=a(t,["activityStart"]);l!=null&&d(e,["activityStart"],l);const c=a(t,["activityEnd"]);return c!=null&&d(e,["activityEnd"],c),e}function yI(t){const e={},n=a(t,["setupComplete"]);n!=null&&d(e,["setupComplete"],n);const r=a(t,["serverContent"]);r!=null&&d(e,["serverContent"],r);const i=a(t,["toolCall"]);i!=null&&d(e,["toolCall"],i);const o=a(t,["toolCallCancellation"]);o!=null&&d(e,["toolCallCancellation"],o);const s=a(t,["usageMetadata"]);s!=null&&d(e,["usageMetadata"],CI(s));const l=a(t,["goAway"]);l!=null&&d(e,["goAway"],l);const c=a(t,["sessionResumptionUpdate"]);return c!=null&&d(e,["sessionResumptionUpdate"],c),e}function vI(t){const e={},n=a(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],n);const r=a(t,["thought"]);r!=null&&d(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&d(e,["inlineData"],Al(i));const o=a(t,["fileData"]);o!=null&&d(e,["fileData"],oI(o));const s=a(t,["thoughtSignature"]);s!=null&&d(e,["thoughtSignature"],s);const l=a(t,["functionCall"]);l!=null&&d(e,["functionCall"],l);const c=a(t,["codeExecutionResult"]);c!=null&&d(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&d(e,["executableCode"],f);const h=a(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const p=a(t,["text"]);return p!=null&&d(e,["text"],p),e}function EI(t){const e={},n=a(t,["handle"]);if(n!=null&&d(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Av(t){const e={},n=a(t,["voiceConfig"]);if(n!=null&&d(e,["voiceConfig"],n),a(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=a(t,["languageCode"]);return r!=null&&d(e,["languageCode"],r),e}function TI(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),d(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearch"]);r!=null&&d(e,["googleSearch"],uI(r));const i=a(t,["googleSearchRetrieval"]);if(i!=null&&d(e,["googleSearchRetrieval"],i),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["googleMaps"]);o!=null&&d(e,["googleMaps"],aI(o));const s=a(t,["urlContext"]);s!=null&&d(e,["urlContext"],s);const l=a(t,["computerUse"]);l!=null&&d(e,["computerUse"],l);const c=a(t,["codeExecution"]);return c!=null&&d(e,["codeExecution"],c),e}function SI(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>sI(g))),d(e,["functionDeclarations"],p)}const r=a(t,["retrieval"]);r!=null&&d(e,["retrieval"],r);const i=a(t,["googleSearch"]);i!=null&&d(e,["googleSearch"],i);const o=a(t,["googleSearchRetrieval"]);o!=null&&d(e,["googleSearchRetrieval"],o);const s=a(t,["enterpriseWebSearch"]);s!=null&&d(e,["enterpriseWebSearch"],s);const l=a(t,["googleMaps"]);l!=null&&d(e,["googleMaps"],l);const c=a(t,["urlContext"]);c!=null&&d(e,["urlContext"],c);const f=a(t,["computerUse"]);f!=null&&d(e,["computerUse"],f);const h=a(t,["codeExecution"]);return h!=null&&d(e,["codeExecution"],h),e}function CI(t){const e={},n=a(t,["promptTokenCount"]);n!=null&&d(e,["promptTokenCount"],n);const r=a(t,["cachedContentTokenCount"]);r!=null&&d(e,["cachedContentTokenCount"],r);const i=a(t,["candidatesTokenCount"]);i!=null&&d(e,["responseTokenCount"],i);const o=a(t,["toolUsePromptTokenCount"]);o!=null&&d(e,["toolUsePromptTokenCount"],o);const s=a(t,["thoughtsTokenCount"]);s!=null&&d(e,["thoughtsTokenCount"],s);const l=a(t,["totalTokenCount"]);l!=null&&d(e,["totalTokenCount"],l);const c=a(t,["promptTokensDetails"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(I=>I)),d(e,["promptTokensDetails"],E)}const f=a(t,["cacheTokensDetails"]);if(f!=null){let E=f;Array.isArray(E)&&(E=E.map(I=>I)),d(e,["cacheTokensDetails"],E)}const h=a(t,["candidatesTokensDetails"]);if(h!=null){let E=h;Array.isArray(E)&&(E=E.map(I=>I)),d(e,["responseTokensDetails"],E)}const p=a(t,["toolUsePromptTokensDetails"]);if(p!=null){let E=p;Array.isArray(E)&&(E=E.map(I=>I)),d(e,["toolUsePromptTokensDetails"],E)}const g=a(t,["trafficType"]);return g!=null&&d(e,["trafficType"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wI(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["data"]);n!=null&&d(e,["data"],n);const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function II(t){const e={},n=a(t,["content"]);n!=null&&d(e,["content"],n);const r=a(t,["citationMetadata"]);r!=null&&d(e,["citationMetadata"],AI(r));const i=a(t,["tokenCount"]);i!=null&&d(e,["tokenCount"],i);const o=a(t,["finishReason"]);o!=null&&d(e,["finishReason"],o);const s=a(t,["urlContextMetadata"]);s!=null&&d(e,["urlContextMetadata"],s);const l=a(t,["avgLogprobs"]);l!=null&&d(e,["avgLogprobs"],l);const c=a(t,["groundingMetadata"]);c!=null&&d(e,["groundingMetadata"],c);const f=a(t,["index"]);f!=null&&d(e,["index"],f);const h=a(t,["logprobsResult"]);h!=null&&d(e,["logprobsResult"],h);const p=a(t,["safetyRatings"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(E=>E)),d(e,["safetyRatings"],g)}return e}function AI(t){const e={},n=a(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),d(e,["citations"],r)}return e}function RI(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],pe(t,r));const i=a(e,["contents"]);if(i!=null){let o=Gt(i);Array.isArray(o)&&(o=o.map(s=>s)),d(n,["contents"],o)}return n}function xI(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),d(e,["tokensInfo"],i)}return e}function PI(t){const e={},n=a(t,["values"]);n!=null&&d(e,["values"],n);const r=a(t,["statistics"]);return r!=null&&d(e,["statistics"],kI(r)),e}function kI(t){const e={},n=a(t,["truncated"]);n!=null&&d(e,["truncated"],n);const r=a(t,["token_count"]);return r!=null&&d(e,["tokenCount"],r),e}function Va(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>LA(o))),d(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&d(e,["role"],r),e}function NI(t){const e={},n=a(t,["controlType"]);n!=null&&d(e,["controlType"],n);const r=a(t,["enableControlImageComputation"]);return r!=null&&d(e,["computeControl"],r),e}function MI(t){const e={};if(a(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function DI(t,e){const n={},r=a(t,["systemInstruction"]);e!==void 0&&r!=null&&d(e,["systemInstruction"],pt(r));const i=a(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>Nv(l))),d(e,["tools"],s)}const o=a(t,["generationConfig"]);return e!==void 0&&o!=null&&d(e,["generationConfig"],SA(o)),n}function VI(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],pe(t,r));const i=a(e,["contents"]);if(i!=null){let s=Gt(i);Array.isArray(s)&&(s=s.map(l=>Va(l))),d(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&MI(o),n}function LI(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],pe(t,r));const i=a(e,["contents"]);if(i!=null){let s=Gt(i);Array.isArray(s)&&(s=s.map(l=>l)),d(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&DI(o,n),n}function UI(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["totalTokens"]);r!=null&&d(e,["totalTokens"],r);const i=a(t,["cachedContentTokenCount"]);return i!=null&&d(e,["cachedContentTokenCount"],i),e}function FI(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["totalTokens"]);return r!=null&&d(e,["totalTokens"],r),e}function bI(t,e){const n={},r=a(e,["model"]);return r!=null&&d(n,["_url","name"],pe(t,r)),n}function BI(t,e){const n={},r=a(e,["model"]);return r!=null&&d(n,["_url","name"],pe(t,r)),n}function OI(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function GI(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function qI(t,e){const n={},r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const i=a(t,["negativePrompt"]);e!==void 0&&i!=null&&d(e,["parameters","negativePrompt"],i);const o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&d(e,["parameters","aspectRatio"],s);const l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&d(e,["parameters","guidanceScale"],l);const c=a(t,["seed"]);e!==void 0&&c!=null&&d(e,["parameters","seed"],c);const f=a(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&d(e,["parameters","safetySetting"],f);const h=a(t,["personGeneration"]);e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h);const p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&d(e,["parameters","includeSafetyAttributes"],p);const g=a(t,["includeRaiReason"]);e!==void 0&&g!=null&&d(e,["parameters","includeRaiReason"],g);const E=a(t,["language"]);e!==void 0&&E!=null&&d(e,["parameters","language"],E);const I=a(t,["outputMimeType"]);e!==void 0&&I!=null&&d(e,["parameters","outputOptions","mimeType"],I);const N=a(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&d(e,["parameters","outputOptions","compressionQuality"],N);const V=a(t,["addWatermark"]);e!==void 0&&V!=null&&d(e,["parameters","addWatermark"],V);const A=a(t,["labels"]);e!==void 0&&A!=null&&d(e,["labels"],A);const S=a(t,["editMode"]);e!==void 0&&S!=null&&d(e,["parameters","editMode"],S);const x=a(t,["baseSteps"]);return e!==void 0&&x!=null&&d(e,["parameters","editConfig","baseSteps"],x),n}function HI(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],pe(t,r));const i=a(e,["prompt"]);i!=null&&d(n,["instances[0]","prompt"],i);const o=a(e,["referenceImages"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>GA(c))),d(n,["instances[0]","referenceImages"],l)}const s=a(e,["config"]);return s!=null&&qI(s,n),n}function $I(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>La(o))),d(e,["generatedImages"],i)}return e}function zI(t,e){const n={},r=a(t,["taskType"]);e!==void 0&&r!=null&&d(e,["requests[]","taskType"],r);const i=a(t,["title"]);e!==void 0&&i!=null&&d(e,["requests[]","title"],i);const o=a(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&d(e,["requests[]","outputDimensionality"],o),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function WI(t,e){const n={},r=a(t,["taskType"]);e!==void 0&&r!=null&&d(e,["instances[]","task_type"],r);const i=a(t,["title"]);e!==void 0&&i!=null&&d(e,["instances[]","title"],i);const o=a(t,["outputDimensionality"]);e!==void 0&&o!=null&&d(e,["parameters","outputDimensionality"],o);const s=a(t,["mimeType"]);e!==void 0&&s!=null&&d(e,["instances[]","mimeType"],s);const l=a(t,["autoTruncate"]);return e!==void 0&&l!=null&&d(e,["parameters","autoTruncate"],l),n}function JI(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],pe(t,r));const i=a(e,["contents"]);if(i!=null){let l=of(t,i);Array.isArray(l)&&(l=l.map(c=>c)),d(n,["requests[]","content"],l)}const o=a(e,["config"]);o!=null&&zI(o,n);const s=a(e,["model"]);return s!==void 0&&d(n,["requests[]","model"],pe(t,s)),n}function KI(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],pe(t,r));const i=a(e,["contents"]);if(i!=null){let s=of(t,i);Array.isArray(s)&&(s=s.map(l=>l)),d(n,["instances[]","content"],s)}const o=a(e,["config"]);return o!=null&&WI(o,n),n}function YI(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["embeddings"],o)}const i=a(t,["metadata"]);return i!=null&&d(e,["metadata"],i),e}function QI(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>PI(s))),d(e,["embeddings"],o)}const i=a(t,["metadata"]);return i!=null&&d(e,["metadata"],i),e}function XI(t){const e={},n=a(t,["endpoint"]);n!=null&&d(e,["name"],n);const r=a(t,["deployedModelId"]);return r!=null&&d(e,["deployedModelId"],r),e}function jI(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function ZI(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&d(e,["description"],n);const r=a(t,["name"]);r!=null&&d(e,["name"],r);const i=a(t,["parameters"]);i!=null&&d(e,["parameters"],i);const o=a(t,["parametersJsonSchema"]);o!=null&&d(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&d(e,["response"],s);const l=a(t,["responseJsonSchema"]);return l!=null&&d(e,["responseJsonSchema"],l),e}function eA(t,e,n){const r={},i=a(e,["systemInstruction"]);n!==void 0&&i!=null&&d(n,["systemInstruction"],Va(pt(i)));const o=a(e,["temperature"]);o!=null&&d(r,["temperature"],o);const s=a(e,["topP"]);s!=null&&d(r,["topP"],s);const l=a(e,["topK"]);l!=null&&d(r,["topK"],l);const c=a(e,["candidateCount"]);c!=null&&d(r,["candidateCount"],c);const f=a(e,["maxOutputTokens"]);f!=null&&d(r,["maxOutputTokens"],f);const h=a(e,["stopSequences"]);h!=null&&d(r,["stopSequences"],h);const p=a(e,["responseLogprobs"]);p!=null&&d(r,["responseLogprobs"],p);const g=a(e,["logprobs"]);g!=null&&d(r,["logprobs"],g);const E=a(e,["presencePenalty"]);E!=null&&d(r,["presencePenalty"],E);const I=a(e,["frequencyPenalty"]);I!=null&&d(r,["frequencyPenalty"],I);const N=a(e,["seed"]);N!=null&&d(r,["seed"],N);const V=a(e,["responseMimeType"]);V!=null&&d(r,["responseMimeType"],V);const A=a(e,["responseSchema"]);A!=null&&d(r,["responseSchema"],sf(A));const S=a(e,["responseJsonSchema"]);if(S!=null&&d(r,["responseJsonSchema"],S),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const x=a(e,["safetySettings"]);if(n!==void 0&&x!=null){let M=x;Array.isArray(M)&&(M=M.map(P=>qA(P))),d(n,["safetySettings"],M)}const D=a(e,["tools"]);if(n!==void 0&&D!=null){let M=$i(D);Array.isArray(M)&&(M=M.map(P=>KA(Hi(P)))),d(n,["tools"],M)}const b=a(e,["toolConfig"]);if(n!==void 0&&b!=null&&d(n,["toolConfig"],b),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=a(e,["cachedContent"]);n!==void 0&&F!=null&&d(n,["cachedContent"],Dn(t,F));const w=a(e,["responseModalities"]);w!=null&&d(r,["responseModalities"],w);const v=a(e,["mediaResolution"]);v!=null&&d(r,["mediaResolution"],v);const C=a(e,["speechConfig"]);if(C!=null&&d(r,["speechConfig"],lf(C)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=a(e,["thinkingConfig"]);R!=null&&d(r,["thinkingConfig"],R);const k=a(e,["imageConfig"]);return k!=null&&d(r,["imageConfig"],k),r}function tA(t,e,n){const r={},i=a(e,["systemInstruction"]);n!==void 0&&i!=null&&d(n,["systemInstruction"],pt(i));const o=a(e,["temperature"]);o!=null&&d(r,["temperature"],o);const s=a(e,["topP"]);s!=null&&d(r,["topP"],s);const l=a(e,["topK"]);l!=null&&d(r,["topK"],l);const c=a(e,["candidateCount"]);c!=null&&d(r,["candidateCount"],c);const f=a(e,["maxOutputTokens"]);f!=null&&d(r,["maxOutputTokens"],f);const h=a(e,["stopSequences"]);h!=null&&d(r,["stopSequences"],h);const p=a(e,["responseLogprobs"]);p!=null&&d(r,["responseLogprobs"],p);const g=a(e,["logprobs"]);g!=null&&d(r,["logprobs"],g);const E=a(e,["presencePenalty"]);E!=null&&d(r,["presencePenalty"],E);const I=a(e,["frequencyPenalty"]);I!=null&&d(r,["frequencyPenalty"],I);const N=a(e,["seed"]);N!=null&&d(r,["seed"],N);const V=a(e,["responseMimeType"]);V!=null&&d(r,["responseMimeType"],V);const A=a(e,["responseSchema"]);A!=null&&d(r,["responseSchema"],sf(A));const S=a(e,["responseJsonSchema"]);S!=null&&d(r,["responseJsonSchema"],S);const x=a(e,["routingConfig"]);x!=null&&d(r,["routingConfig"],x);const D=a(e,["modelSelectionConfig"]);D!=null&&d(r,["modelConfig"],D);const b=a(e,["safetySettings"]);if(n!==void 0&&b!=null){let z=b;Array.isArray(z)&&(z=z.map(me=>me)),d(n,["safetySettings"],z)}const F=a(e,["tools"]);if(n!==void 0&&F!=null){let z=$i(F);Array.isArray(z)&&(z=z.map(me=>Nv(Hi(me)))),d(n,["tools"],z)}const w=a(e,["toolConfig"]);n!==void 0&&w!=null&&d(n,["toolConfig"],w);const v=a(e,["labels"]);n!==void 0&&v!=null&&d(n,["labels"],v);const C=a(e,["cachedContent"]);n!==void 0&&C!=null&&d(n,["cachedContent"],Dn(t,C));const R=a(e,["responseModalities"]);R!=null&&d(r,["responseModalities"],R);const k=a(e,["mediaResolution"]);k!=null&&d(r,["mediaResolution"],k);const M=a(e,["speechConfig"]);M!=null&&d(r,["speechConfig"],kv(lf(M)));const P=a(e,["audioTimestamp"]);P!=null&&d(r,["audioTimestamp"],P);const Z=a(e,["thinkingConfig"]);Z!=null&&d(r,["thinkingConfig"],Z);const ue=a(e,["imageConfig"]);return ue!=null&&d(r,["imageConfig"],ue),r}function Om(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],pe(t,r));const i=a(e,["contents"]);if(i!=null){let s=Gt(i);Array.isArray(s)&&(s=s.map(l=>Va(l))),d(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&d(n,["generationConfig"],eA(t,o,n)),n}function Gm(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],pe(t,r));const i=a(e,["contents"]);if(i!=null){let s=Gt(i);Array.isArray(s)&&(s=s.map(l=>l)),d(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&d(n,["generationConfig"],tA(t,o,n)),n}function qm(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>II(f))),d(e,["candidates"],c)}const i=a(t,["modelVersion"]);i!=null&&d(e,["modelVersion"],i);const o=a(t,["promptFeedback"]);o!=null&&d(e,["promptFeedback"],o);const s=a(t,["responseId"]);s!=null&&d(e,["responseId"],s);const l=a(t,["usageMetadata"]);return l!=null&&d(e,["usageMetadata"],l),e}function Hm(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(h=>h)),d(e,["candidates"],f)}const i=a(t,["createTime"]);i!=null&&d(e,["createTime"],i);const o=a(t,["modelVersion"]);o!=null&&d(e,["modelVersion"],o);const s=a(t,["promptFeedback"]);s!=null&&d(e,["promptFeedback"],s);const l=a(t,["responseId"]);l!=null&&d(e,["responseId"],l);const c=a(t,["usageMetadata"]);return c!=null&&d(e,["usageMetadata"],c),e}function nA(t,e){const n={};if(a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=a(t,["numberOfImages"]);e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r);const i=a(t,["aspectRatio"]);e!==void 0&&i!=null&&d(e,["parameters","aspectRatio"],i);const o=a(t,["guidanceScale"]);if(e!==void 0&&o!=null&&d(e,["parameters","guidanceScale"],o),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=a(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&d(e,["parameters","safetySetting"],s);const l=a(t,["personGeneration"]);e!==void 0&&l!=null&&d(e,["parameters","personGeneration"],l);const c=a(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&d(e,["parameters","includeSafetyAttributes"],c);const f=a(t,["includeRaiReason"]);e!==void 0&&f!=null&&d(e,["parameters","includeRaiReason"],f);const h=a(t,["language"]);e!==void 0&&h!=null&&d(e,["parameters","language"],h);const p=a(t,["outputMimeType"]);e!==void 0&&p!=null&&d(e,["parameters","outputOptions","mimeType"],p);const g=a(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&d(e,["parameters","outputOptions","compressionQuality"],g),a(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=a(t,["imageSize"]);if(e!==void 0&&E!=null&&d(e,["parameters","sampleImageSize"],E),a(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function rA(t,e){const n={},r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const i=a(t,["negativePrompt"]);e!==void 0&&i!=null&&d(e,["parameters","negativePrompt"],i);const o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&d(e,["parameters","aspectRatio"],s);const l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&d(e,["parameters","guidanceScale"],l);const c=a(t,["seed"]);e!==void 0&&c!=null&&d(e,["parameters","seed"],c);const f=a(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&d(e,["parameters","safetySetting"],f);const h=a(t,["personGeneration"]);e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h);const p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&d(e,["parameters","includeSafetyAttributes"],p);const g=a(t,["includeRaiReason"]);e!==void 0&&g!=null&&d(e,["parameters","includeRaiReason"],g);const E=a(t,["language"]);e!==void 0&&E!=null&&d(e,["parameters","language"],E);const I=a(t,["outputMimeType"]);e!==void 0&&I!=null&&d(e,["parameters","outputOptions","mimeType"],I);const N=a(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&d(e,["parameters","outputOptions","compressionQuality"],N);const V=a(t,["addWatermark"]);e!==void 0&&V!=null&&d(e,["parameters","addWatermark"],V);const A=a(t,["labels"]);e!==void 0&&A!=null&&d(e,["labels"],A);const S=a(t,["imageSize"]);e!==void 0&&S!=null&&d(e,["parameters","sampleImageSize"],S);const x=a(t,["enhancePrompt"]);return e!==void 0&&x!=null&&d(e,["parameters","enhancePrompt"],x),n}function iA(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],pe(t,r));const i=a(e,["prompt"]);i!=null&&d(n,["instances[0]","prompt"],i);const o=a(e,["config"]);return o!=null&&nA(o,n),n}function oA(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],pe(t,r));const i=a(e,["prompt"]);i!=null&&d(n,["instances[0]","prompt"],i);const o=a(e,["config"]);return o!=null&&rA(o,n),n}function sA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>yA(s))),d(e,["generatedImages"],o)}const i=a(t,["positivePromptSafetyAttributes"]);return i!=null&&d(e,["positivePromptSafetyAttributes"],xv(i)),e}function lA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>La(s))),d(e,["generatedImages"],o)}const i=a(t,["positivePromptSafetyAttributes"]);return i!=null&&d(e,["positivePromptSafetyAttributes"],Pv(i)),e}function aA(t,e){const n={},r=a(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r),a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=a(t,["durationSeconds"]);if(e!==void 0&&i!=null&&d(e,["parameters","durationSeconds"],i),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=a(t,["aspectRatio"]);e!==void 0&&o!=null&&d(e,["parameters","aspectRatio"],o);const s=a(t,["resolution"]);e!==void 0&&s!=null&&d(e,["parameters","resolution"],s);const l=a(t,["personGeneration"]);if(e!==void 0&&l!=null&&d(e,["parameters","personGeneration"],l),a(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=a(t,["negativePrompt"]);e!==void 0&&c!=null&&d(e,["parameters","negativePrompt"],c);const f=a(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&d(e,["parameters","enhancePrompt"],f),a(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const h=a(t,["lastFrame"]);e!==void 0&&h!=null&&d(e,["instances[0]","lastFrame"],Ua(h));const p=a(t,["referenceImages"]);if(e!==void 0&&p!=null){let g=p;Array.isArray(g)&&(g=g.map(E=>lR(E))),d(e,["instances[0]","referenceImages"],g)}if(a(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function uA(t,e){const n={},r=a(t,["numberOfVideos"]);e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r);const i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&d(e,["parameters","storageUri"],i);const o=a(t,["fps"]);e!==void 0&&o!=null&&d(e,["parameters","fps"],o);const s=a(t,["durationSeconds"]);e!==void 0&&s!=null&&d(e,["parameters","durationSeconds"],s);const l=a(t,["seed"]);e!==void 0&&l!=null&&d(e,["parameters","seed"],l);const c=a(t,["aspectRatio"]);e!==void 0&&c!=null&&d(e,["parameters","aspectRatio"],c);const f=a(t,["resolution"]);e!==void 0&&f!=null&&d(e,["parameters","resolution"],f);const h=a(t,["personGeneration"]);e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h);const p=a(t,["pubsubTopic"]);e!==void 0&&p!=null&&d(e,["parameters","pubsubTopic"],p);const g=a(t,["negativePrompt"]);e!==void 0&&g!=null&&d(e,["parameters","negativePrompt"],g);const E=a(t,["enhancePrompt"]);e!==void 0&&E!=null&&d(e,["parameters","enhancePrompt"],E);const I=a(t,["generateAudio"]);e!==void 0&&I!=null&&d(e,["parameters","generateAudio"],I);const N=a(t,["lastFrame"]);e!==void 0&&N!=null&&d(e,["instances[0]","lastFrame"],sn(N));const V=a(t,["referenceImages"]);if(e!==void 0&&V!=null){let x=V;Array.isArray(x)&&(x=x.map(D=>aR(D))),d(e,["instances[0]","referenceImages"],x)}const A=a(t,["mask"]);e!==void 0&&A!=null&&d(e,["instances[0]","mask"],sR(A));const S=a(t,["compressionQuality"]);return e!==void 0&&S!=null&&d(e,["parameters","compressionQuality"],S),n}function cA(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const r=a(t,["metadata"]);r!=null&&d(e,["metadata"],r);const i=a(t,["done"]);i!=null&&d(e,["done"],i);const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["response","generateVideoResponse"]);return s!=null&&d(e,["response"],pA(s)),e}function dA(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const r=a(t,["metadata"]);r!=null&&d(e,["metadata"],r);const i=a(t,["done"]);i!=null&&d(e,["done"],i);const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["response"]);return s!=null&&d(e,["response"],mA(s)),e}function fA(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],pe(t,r));const i=a(e,["prompt"]);i!=null&&d(n,["instances[0]","prompt"],i);const o=a(e,["image"]);o!=null&&d(n,["instances[0]","image"],Ua(o));const s=a(e,["video"]);s!=null&&d(n,["instances[0]","video"],Mv(s));const l=a(e,["source"]);l!=null&&gA(l,n);const c=a(e,["config"]);return c!=null&&aA(c,n),n}function hA(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],pe(t,r));const i=a(e,["prompt"]);i!=null&&d(n,["instances[0]","prompt"],i);const o=a(e,["image"]);o!=null&&d(n,["instances[0]","image"],sn(o));const s=a(e,["video"]);s!=null&&d(n,["instances[0]","video"],Dv(s));const l=a(e,["source"]);l!=null&&_A(l,n);const c=a(e,["config"]);return c!=null&&uA(c,n),n}function pA(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>EA(s))),d(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&d(e,["raiMediaFilteredReasons"],i),e}function mA(t){const e={},n=a(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>TA(s))),d(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&d(e,["raiMediaFilteredReasons"],i),e}function gA(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);const i=a(t,["image"]);e!==void 0&&i!=null&&d(e,["instances[0]","image"],Ua(i));const o=a(t,["video"]);return e!==void 0&&o!=null&&d(e,["instances[0]","video"],Mv(o)),n}function _A(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);const i=a(t,["image"]);e!==void 0&&i!=null&&d(e,["instances[0]","image"],sn(i));const o=a(t,["video"]);return e!==void 0&&o!=null&&d(e,["instances[0]","video"],Dv(o)),n}function yA(t){const e={},n=a(t,["_self"]);n!=null&&d(e,["image"],RA(n));const r=a(t,["raiFilteredReason"]);r!=null&&d(e,["raiFilteredReason"],r);const i=a(t,["_self"]);return i!=null&&d(e,["safetyAttributes"],xv(i)),e}function La(t){const e={},n=a(t,["_self"]);n!=null&&d(e,["image"],Rv(n));const r=a(t,["raiFilteredReason"]);r!=null&&d(e,["raiFilteredReason"],r);const i=a(t,["_self"]);i!=null&&d(e,["safetyAttributes"],Pv(i));const o=a(t,["prompt"]);return o!=null&&d(e,["enhancedPrompt"],o),e}function vA(t){const e={},n=a(t,["_self"]);n!=null&&d(e,["mask"],Rv(n));const r=a(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),d(e,["labels"],i)}return e}function EA(t){const e={},n=a(t,["video"]);return n!=null&&d(e,["video"],iR(n)),e}function TA(t){const e={},n=a(t,["_self"]);return n!=null&&d(e,["video"],oR(n)),e}function SA(t){const e={},n=a(t,["modelSelectionConfig"]);n!=null&&d(e,["modelConfig"],n);const r=a(t,["audioTimestamp"]);r!=null&&d(e,["audioTimestamp"],r);const i=a(t,["candidateCount"]);i!=null&&d(e,["candidateCount"],i);const o=a(t,["enableAffectiveDialog"]);o!=null&&d(e,["enableAffectiveDialog"],o);const s=a(t,["frequencyPenalty"]);s!=null&&d(e,["frequencyPenalty"],s);const l=a(t,["logprobs"]);l!=null&&d(e,["logprobs"],l);const c=a(t,["maxOutputTokens"]);c!=null&&d(e,["maxOutputTokens"],c);const f=a(t,["mediaResolution"]);f!=null&&d(e,["mediaResolution"],f);const h=a(t,["presencePenalty"]);h!=null&&d(e,["presencePenalty"],h);const p=a(t,["responseJsonSchema"]);p!=null&&d(e,["responseJsonSchema"],p);const g=a(t,["responseLogprobs"]);g!=null&&d(e,["responseLogprobs"],g);const E=a(t,["responseMimeType"]);E!=null&&d(e,["responseMimeType"],E);const I=a(t,["responseModalities"]);I!=null&&d(e,["responseModalities"],I);const N=a(t,["responseSchema"]);N!=null&&d(e,["responseSchema"],N);const V=a(t,["routingConfig"]);V!=null&&d(e,["routingConfig"],V);const A=a(t,["seed"]);A!=null&&d(e,["seed"],A);const S=a(t,["speechConfig"]);S!=null&&d(e,["speechConfig"],kv(S));const x=a(t,["stopSequences"]);x!=null&&d(e,["stopSequences"],x);const D=a(t,["temperature"]);D!=null&&d(e,["temperature"],D);const b=a(t,["thinkingConfig"]);b!=null&&d(e,["thinkingConfig"],b);const F=a(t,["topK"]);F!=null&&d(e,["topK"],F);const w=a(t,["topP"]);return w!=null&&d(e,["topP"],w),e}function CA(t,e){const n={},r=a(e,["model"]);return r!=null&&d(n,["_url","name"],pe(t,r)),n}function wA(t,e){const n={},r=a(e,["model"]);return r!=null&&d(n,["_url","name"],pe(t,r)),n}function IA(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function AA(t){const e={},n=a(t,["timeRangeFilter"]);if(n!=null&&d(e,["timeRangeFilter"],n),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function RA(t){const e={},n=a(t,["bytesBase64Encoded"]);n!=null&&d(e,["imageBytes"],fr(n));const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Rv(t){const e={},n=a(t,["gcsUri"]);n!=null&&d(e,["gcsUri"],n);const r=a(t,["bytesBase64Encoded"]);r!=null&&d(e,["imageBytes"],fr(r));const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function Ua(t){const e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=a(t,["imageBytes"]);n!=null&&d(e,["bytesBase64Encoded"],fr(n));const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function sn(t){const e={},n=a(t,["gcsUri"]);n!=null&&d(e,["gcsUri"],n);const r=a(t,["imageBytes"]);r!=null&&d(e,["bytesBase64Encoded"],fr(r));const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function xA(t,e,n){const r={},i=a(e,["pageSize"]);n!==void 0&&i!=null&&d(n,["_query","pageSize"],i);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&d(n,["_query","pageToken"],o);const s=a(e,["filter"]);n!==void 0&&s!=null&&d(n,["_query","filter"],s);const l=a(e,["queryBase"]);return n!==void 0&&l!=null&&d(n,["_url","models_url"],vv(t,l)),r}function PA(t,e,n){const r={},i=a(e,["pageSize"]);n!==void 0&&i!=null&&d(n,["_query","pageSize"],i);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&d(n,["_query","pageToken"],o);const s=a(e,["filter"]);n!==void 0&&s!=null&&d(n,["_query","filter"],s);const l=a(e,["queryBase"]);return n!==void 0&&l!=null&&d(n,["_url","models_url"],vv(t,l)),r}function kA(t,e){const n={},r=a(e,["config"]);return r!=null&&xA(t,r,n),n}function NA(t,e){const n={},r=a(e,["config"]);return r!=null&&PA(t,r,n),n}function MA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=a(t,["_self"]);if(i!=null){let o=Ev(i);Array.isArray(o)&&(o=o.map(s=>qc(s))),d(e,["models"],o)}return e}function DA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=a(t,["_self"]);if(i!=null){let o=Ev(i);Array.isArray(o)&&(o=o.map(s=>Hc(s))),d(e,["models"],o)}return e}function VA(t){const e={},n=a(t,["maskMode"]);n!=null&&d(e,["maskMode"],n);const r=a(t,["segmentationClasses"]);r!=null&&d(e,["maskClasses"],r);const i=a(t,["maskDilation"]);return i!=null&&d(e,["dilation"],i),e}function qc(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const r=a(t,["displayName"]);r!=null&&d(e,["displayName"],r);const i=a(t,["description"]);i!=null&&d(e,["description"],i);const o=a(t,["version"]);o!=null&&d(e,["version"],o);const s=a(t,["_self"]);s!=null&&d(e,["tunedModelInfo"],YA(s));const l=a(t,["inputTokenLimit"]);l!=null&&d(e,["inputTokenLimit"],l);const c=a(t,["outputTokenLimit"]);c!=null&&d(e,["outputTokenLimit"],c);const f=a(t,["supportedGenerationMethods"]);return f!=null&&d(e,["supportedActions"],f),e}function Hc(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const r=a(t,["displayName"]);r!=null&&d(e,["displayName"],r);const i=a(t,["description"]);i!=null&&d(e,["description"],i);const o=a(t,["versionId"]);o!=null&&d(e,["version"],o);const s=a(t,["deployedModels"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(g=>XI(g))),d(e,["endpoints"],p)}const l=a(t,["labels"]);l!=null&&d(e,["labels"],l);const c=a(t,["_self"]);c!=null&&d(e,["tunedModelInfo"],QA(c));const f=a(t,["defaultCheckpointId"]);f!=null&&d(e,["defaultCheckpointId"],f);const h=a(t,["checkpoints"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(g=>g)),d(e,["checkpoints"],p)}return e}function LA(t){const e={},n=a(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],n);const r=a(t,["thought"]);r!=null&&d(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&d(e,["inlineData"],wI(i));const o=a(t,["fileData"]);o!=null&&d(e,["fileData"],jI(o));const s=a(t,["thoughtSignature"]);s!=null&&d(e,["thoughtSignature"],s);const l=a(t,["functionCall"]);l!=null&&d(e,["functionCall"],l);const c=a(t,["codeExecutionResult"]);c!=null&&d(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&d(e,["executableCode"],f);const h=a(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const p=a(t,["text"]);return p!=null&&d(e,["text"],p),e}function UA(t){const e={},n=a(t,["productImage"]);return n!=null&&d(e,["image"],sn(n)),e}function FA(t,e){const n={},r=a(t,["numberOfImages"]);e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r);const i=a(t,["baseSteps"]);e!==void 0&&i!=null&&d(e,["parameters","editConfig","baseSteps"],i);const o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);const s=a(t,["seed"]);e!==void 0&&s!=null&&d(e,["parameters","seed"],s);const l=a(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&d(e,["parameters","safetySetting"],l);const c=a(t,["personGeneration"]);e!==void 0&&c!=null&&d(e,["parameters","personGeneration"],c);const f=a(t,["addWatermark"]);e!==void 0&&f!=null&&d(e,["parameters","addWatermark"],f);const h=a(t,["outputMimeType"]);e!==void 0&&h!=null&&d(e,["parameters","outputOptions","mimeType"],h);const p=a(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&d(e,["parameters","outputOptions","compressionQuality"],p);const g=a(t,["enhancePrompt"]);e!==void 0&&g!=null&&d(e,["parameters","enhancePrompt"],g);const E=a(t,["labels"]);return e!==void 0&&E!=null&&d(e,["labels"],E),n}function bA(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],pe(t,r));const i=a(e,["source"]);i!=null&&OA(i,n);const o=a(e,["config"]);return o!=null&&FA(o,n),n}function BA(t){const e={},n=a(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>La(i))),d(e,["generatedImages"],r)}return e}function OA(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);const i=a(t,["personImage"]);e!==void 0&&i!=null&&d(e,["instances[0]","personImage","image"],sn(i));const o=a(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>UA(l))),d(e,["instances[0]","productImages"],s)}return n}function GA(t){const e={},n=a(t,["referenceImage"]);n!=null&&d(e,["referenceImage"],sn(n));const r=a(t,["referenceId"]);r!=null&&d(e,["referenceId"],r);const i=a(t,["referenceType"]);i!=null&&d(e,["referenceType"],i);const o=a(t,["maskImageConfig"]);o!=null&&d(e,["maskImageConfig"],VA(o));const s=a(t,["controlImageConfig"]);s!=null&&d(e,["controlImageConfig"],NI(s));const l=a(t,["styleImageConfig"]);l!=null&&d(e,["styleImageConfig"],l);const c=a(t,["subjectImageConfig"]);return c!=null&&d(e,["subjectImageConfig"],c),e}function xv(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&d(e,["categories"],n);const r=a(t,["safetyAttributes","scores"]);r!=null&&d(e,["scores"],r);const i=a(t,["contentType"]);return i!=null&&d(e,["contentType"],i),e}function Pv(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&d(e,["categories"],n);const r=a(t,["safetyAttributes","scores"]);r!=null&&d(e,["scores"],r);const i=a(t,["contentType"]);return i!=null&&d(e,["contentType"],i),e}function qA(t){const e={};if(a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=a(t,["category"]);n!=null&&d(e,["category"],n);const r=a(t,["threshold"]);return r!=null&&d(e,["threshold"],r),e}function HA(t){const e={},n=a(t,["image"]);return n!=null&&d(e,["image"],sn(n)),e}function $A(t,e){const n={},r=a(t,["mode"]);e!==void 0&&r!=null&&d(e,["parameters","mode"],r);const i=a(t,["maxPredictions"]);e!==void 0&&i!=null&&d(e,["parameters","maxPredictions"],i);const o=a(t,["confidenceThreshold"]);e!==void 0&&o!=null&&d(e,["parameters","confidenceThreshold"],o);const s=a(t,["maskDilation"]);e!==void 0&&s!=null&&d(e,["parameters","maskDilation"],s);const l=a(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&d(e,["parameters","binaryColorThreshold"],l);const c=a(t,["labels"]);return e!==void 0&&c!=null&&d(e,["labels"],c),n}function zA(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],pe(t,r));const i=a(e,["source"]);i!=null&&JA(i,n);const o=a(e,["config"]);return o!=null&&$A(o,n),n}function WA(t){const e={},n=a(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>vA(i))),d(e,["generatedMasks"],r)}return e}function JA(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);const i=a(t,["image"]);e!==void 0&&i!=null&&d(e,["instances[0]","image"],sn(i));const o=a(t,["scribbleImage"]);return e!==void 0&&o!=null&&d(e,["instances[0]","scribble"],HA(o)),n}function kv(t){const e={},n=a(t,["voiceConfig"]);if(n!=null&&d(e,["voiceConfig"],n),a(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=a(t,["languageCode"]);return r!=null&&d(e,["languageCode"],r),e}function KA(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),d(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearch"]);r!=null&&d(e,["googleSearch"],AA(r));const i=a(t,["googleSearchRetrieval"]);if(i!=null&&d(e,["googleSearchRetrieval"],i),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["googleMaps"]);o!=null&&d(e,["googleMaps"],IA(o));const s=a(t,["urlContext"]);s!=null&&d(e,["urlContext"],s);const l=a(t,["computerUse"]);l!=null&&d(e,["computerUse"],l);const c=a(t,["codeExecution"]);return c!=null&&d(e,["codeExecution"],c),e}function Nv(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>ZI(g))),d(e,["functionDeclarations"],p)}const r=a(t,["retrieval"]);r!=null&&d(e,["retrieval"],r);const i=a(t,["googleSearch"]);i!=null&&d(e,["googleSearch"],i);const o=a(t,["googleSearchRetrieval"]);o!=null&&d(e,["googleSearchRetrieval"],o);const s=a(t,["enterpriseWebSearch"]);s!=null&&d(e,["enterpriseWebSearch"],s);const l=a(t,["googleMaps"]);l!=null&&d(e,["googleMaps"],l);const c=a(t,["urlContext"]);c!=null&&d(e,["urlContext"],c);const f=a(t,["computerUse"]);f!=null&&d(e,["computerUse"],f);const h=a(t,["codeExecution"]);return h!=null&&d(e,["codeExecution"],h),e}function YA(t){const e={},n=a(t,["baseModel"]);n!=null&&d(e,["baseModel"],n);const r=a(t,["createTime"]);r!=null&&d(e,["createTime"],r);const i=a(t,["updateTime"]);return i!=null&&d(e,["updateTime"],i),e}function QA(t){const e={},n=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&d(e,["baseModel"],n);const r=a(t,["createTime"]);r!=null&&d(e,["createTime"],r);const i=a(t,["updateTime"]);return i!=null&&d(e,["updateTime"],i),e}function XA(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const i=a(t,["description"]);e!==void 0&&i!=null&&d(e,["description"],i);const o=a(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&d(e,["defaultCheckpointId"],o),n}function jA(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const i=a(t,["description"]);e!==void 0&&i!=null&&d(e,["description"],i);const o=a(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&d(e,["defaultCheckpointId"],o),n}function ZA(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","name"],pe(t,r));const i=a(e,["config"]);return i!=null&&XA(i,n),n}function eR(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],pe(t,r));const i=a(e,["config"]);return i!=null&&jA(i,n),n}function tR(t,e){const n={},r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const i=a(t,["includeRaiReason"]);e!==void 0&&i!=null&&d(e,["parameters","includeRaiReason"],i);const o=a(t,["outputMimeType"]);e!==void 0&&o!=null&&d(e,["parameters","outputOptions","mimeType"],o);const s=a(t,["outputCompressionQuality"]);e!==void 0&&s!=null&&d(e,["parameters","outputOptions","compressionQuality"],s);const l=a(t,["enhanceInputImage"]);e!==void 0&&l!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],l);const c=a(t,["imagePreservationFactor"]);e!==void 0&&c!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],c);const f=a(t,["labels"]);e!==void 0&&f!=null&&d(e,["labels"],f);const h=a(t,["numberOfImages"]);e!==void 0&&h!=null&&d(e,["parameters","sampleCount"],h);const p=a(t,["mode"]);return e!==void 0&&p!=null&&d(e,["parameters","mode"],p),n}function nR(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],pe(t,r));const i=a(e,["image"]);i!=null&&d(n,["instances[0]","image"],sn(i));const o=a(e,["upscaleFactor"]);o!=null&&d(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=a(e,["config"]);return s!=null&&tR(s,n),n}function rR(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>La(o))),d(e,["generatedImages"],i)}return e}function iR(t){const e={},n=a(t,["uri"]);n!=null&&d(e,["uri"],n);const r=a(t,["encodedVideo"]);r!=null&&d(e,["videoBytes"],fr(r));const i=a(t,["encoding"]);return i!=null&&d(e,["mimeType"],i),e}function oR(t){const e={},n=a(t,["gcsUri"]);n!=null&&d(e,["uri"],n);const r=a(t,["bytesBase64Encoded"]);r!=null&&d(e,["videoBytes"],fr(r));const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function sR(t){const e={},n=a(t,["image"]);n!=null&&d(e,["_self"],sn(n));const r=a(t,["maskMode"]);return r!=null&&d(e,["maskMode"],r),e}function lR(t){const e={},n=a(t,["image"]);n!=null&&d(e,["image"],Ua(n));const r=a(t,["referenceType"]);return r!=null&&d(e,["referenceType"],r),e}function aR(t){const e={},n=a(t,["image"]);n!=null&&d(e,["image"],sn(n));const r=a(t,["referenceType"]);return r!=null&&d(e,["referenceType"],r),e}function Mv(t){const e={},n=a(t,["uri"]);n!=null&&d(e,["uri"],n);const r=a(t,["videoBytes"]);r!=null&&d(e,["encodedVideo"],fr(r));const i=a(t,["mimeType"]);return i!=null&&d(e,["encoding"],i),e}function Dv(t){const e={},n=a(t,["uri"]);n!=null&&d(e,["gcsUri"],n);const r=a(t,["videoBytes"]);r!=null&&d(e,["bytesBase64Encoded"],fr(r));const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uR="Content-Type",cR="X-Server-Timeout",dR="User-Agent",$c="x-goog-api-client",fR="1.25.0",hR=`google-genai-sdk/${fR}`,pR="v1beta1",mR="v1beta",$m=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class gR{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:pR,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:mR,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,l]of Object.entries(e.queryParams))i.searchParams.append(s,String(l));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const i=new AbortController,o=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const s=setTimeout(()=>i.abort(),n.timeout);s&&typeof s.unref=="function"&&s.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&_R(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await zm(i),new Bc(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await zm(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return Si(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";for(;;){const{done:l,value:c}=yield Ie(i.read());if(l){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=o.decode(c,{stream:!0});try{const p=JSON.parse(f);if("error"in p){const g=JSON.parse(JSON.stringify(p.error)),E=g.status,I=g.code,N=`got status: ${E}. ${JSON.stringify(p)}`;if(I>=400&&I<600)throw new Da({message:N,status:I})}}catch(p){if(p.name==="ApiError")throw p}s+=f;let h=s.match($m);for(;h;){const p=h[1];try{const g=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ie(new Bc(g)),s=s.slice(h[0].length),h=s.match($m)}catch(g){throw new Error(`exception parsing stream chunk ${p}. ${g}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=hR+" "+this.clientOptions.userAgentExtra;return e[dR]=n,e[$c]=n,e[uR]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))n.append(r,i);e.timeout&&e.timeout>0&&n.append(cR,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const l=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=l;const c=await this.fetchUploadUrl(i,n);return o.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},s=await this.request({path:Y("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:i});if(!s||!(s!=null&&s.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const l=(r=s==null?void 0:s.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(l===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return l}}async function zm(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new Da({message:i,status:n}):new Error(i)}}function _R(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const l=Object.assign({},o);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const f=s[c],h=l[c];f&&typeof f=="object"&&!Array.isArray(f)&&h&&typeof h=="object"&&!Array.isArray(h)?l[c]=r(h,f):(h&&f&&typeof h!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof h}, New type: ${typeof f}. Overwriting.`),l[c]=f)}return l}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yR="mcp_used/unknown";let vR=!1;function Vv(t){for(const e of t)if(ER(e)||typeof e=="object"&&"inputSchema"in e)return!0;return vR}function Lv(t){var e;const n=(e=t[$c])!==null&&e!==void 0?e:"";t[$c]=(n+` ${yR}`).trimStart()}function ER(t){return t!==null&&typeof t=="object"&&t instanceof uf}function TR(t,e=100){return Si(this,arguments,function*(){let r,i=0;for(;i<e;){const o=yield Ie(t.listTools({cursor:r}));for(const s of o.tools)yield yield Ie(s),i++;if(!o.nextCursor)break;r=o.nextCursor}})}class uf{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new uf(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const h of this.mcpClients)try{for(var l=!0,c=(n=void 0,Uo(TR(h))),f;f=await c.next(),e=f.done,!e;l=!0){i=f.value,l=!1;const p=i;s.push(p);const g=p.name;if(o[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);o[g]=h}}catch(p){n={error:p}}finally{try{!l&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),AC(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function SR(t,e,n){const r=new yC;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class CR{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=AR(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),c=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${l}`;let f=()=>{};const h=new Promise(x=>{f=x}),p=e.callbacks,g=function(){f({})},E=this.apiClient,I={onopen:g,onmessage:x=>{SR(E,p.onmessage,x)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(x){},onclose:(r=p==null?void 0:p.onclose)!==null&&r!==void 0?r:function(x){}},N=this.webSocketFactory.create(c,IR(s),I);N.connect(),await h;const S={setup:{model:pe(this.apiClient,e.model)}};return N.send(JSON.stringify(S)),new wR(N,this.apiClient)}}class wR{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=mI(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=pI(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(pi.PLAY)}pause(){this.sendPlaybackControl(pi.PAUSE)}stop(){this.sendPlaybackControl(pi.STOP)}resetContext(){this.sendPlaybackControl(pi.RESET_CONTEXT)}close(){this.conn.close()}}function IR(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function AR(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RR="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function xR(t,e,n){const r=new _C;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=yI(o);Object.assign(r,s)}else Object.assign(r,o);e(r)}class PR{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new CR(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let h;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&Vv(e.config.tools)&&Lv(p);const g=DR(p);if(this.apiClient.isVertexAI())h=`${c}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g);else{const C=this.apiClient.getApiKey();let R="BidiGenerateContent",k="key";C!=null&&C.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),R="BidiGenerateContentConstrained",k="access_token"),h=`${c}/ws/google.ai.generativelanguage.${f}.GenerativeService.${R}?${k}=${C}`}let E=()=>{};const I=new Promise(C=>{E=C}),N=e.callbacks,V=function(){var C;(C=N==null?void 0:N.onopen)===null||C===void 0||C.call(N),E({})},A=this.apiClient,S={onopen:V,onmessage:C=>{xR(A,N.onmessage,C)},onerror:(n=N==null?void 0:N.onerror)!==null&&n!==void 0?n:function(C){},onclose:(r=N==null?void 0:N.onclose)!==null&&r!==void 0?r:function(C){}},x=this.webSocketFactory.create(h,MR(g),S);x.connect(),await I;let D=pe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&D.startsWith("publishers/")){const C=this.apiClient.getProject(),R=this.apiClient.getLocation();D=`projects/${C}/locations/${R}/`+D}let b={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[na.AUDIO]}:e.config.responseModalities=[na.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const F=(l=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[],w=[];for(const C of F)if(this.isCallableTool(C)){const R=C;w.push(await R.tool())}else w.push(C);w.length>0&&(e.config.tools=w);const v={model:D,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?b=hI(this.apiClient,v):b=fI(this.apiClient,v),delete b.config,x.send(JSON.stringify(b)),new NR(x,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const kR={turnComplete:!0};class NR{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Gt(n.turns),e.isVertexAI()||(r=r.map(i=>Va(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(RR)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},kR),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:_I(e)}:n={realtimeInput:gI(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function MR(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function DR(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wm=10;function Jm(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Ci(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Ci(t){return"callTool"in t&&typeof t.callTool=="function"}function VR(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Ci(i)))!==null&&r!==void 0?r:!1}function LR(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>!Ci(i)))!==null&&r!==void 0?r:!1}function Km(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class UR extends $r{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,l;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!VR(n)||Jm(n.config))return await this.generateContentInternal(c);if(LR(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let f,h;const p=Gt(c.contents),g=(o=(i=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:Wm;let E=0;for(;E<g&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const I=f.candidates[0].content,N=[];for(const V of(l=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[])if(Ci(V)){const S=await V.callTool(f.functionCalls);N.push(...S)}E++,h={role:"user",parts:N},c.contents=Gt(c.contents),c.contents.push(I),c.contents.push(h),Km(c.config)&&(p.push(I),p.push(h))}return Km(c.config)&&(f.automaticFunctionCallingHistory=p),f},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),Jm(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const c of r.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((i=c==null?void 0:c.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=c==null?void 0:c.safetyAttributes:s.push(c);let l;return o?l={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:l={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},l}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new _s(Fr.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,o,s,l,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(o=n.source)===null||o===void 0?void 0:o.video)===null||s===void 0)&&s.uri&&(!((c=(l=n.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async c=>Ci(c)?await c.tool():c)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(l.config.tools=s,e.config&&e.config.tools&&Vv(e.config.tools)){const c=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let f=Object.assign({},c);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),Lv(f),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return l}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Ci(s)){const l=s,c=await l.tool();for(const f of(i=c.functionDeclarations)!==null&&i!==void 0?i:[]){if(!f.name)throw new Error("Function declaration name is required.");if(o.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);o.set(f.name,l)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:Wm;let s=!1,l=0;const c=await this.initAfcToolsMap(e);return function(f,h,p){var g,E;return Si(this,arguments,function*(){for(var I,N,V,A;l<o;){s&&(l++,s=!1);const b=yield Ie(f.processParamsMaybeAddMcpUsage(p)),F=yield Ie(f.generateContentStreamInternal(b)),w=[],v=[];try{for(var S=!0,x=(N=void 0,Uo(F)),D;D=yield Ie(x.next()),I=D.done,!I;S=!0){A=D.value,S=!1;const C=A;if(yield yield Ie(C),C.candidates&&(!((g=C.candidates[0])===null||g===void 0)&&g.content)){v.push(C.candidates[0].content);for(const R of(E=C.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(l<o&&R.functionCall){if(!R.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(R.functionCall.name)){const k=yield Ie(h.get(R.functionCall.name).callTool([R.functionCall]));w.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${R.functionCall.name}`)}}}}catch(C){N={error:C}}finally{try{!S&&!I&&(V=x.return)&&(yield Ie(V.call(x)))}finally{if(N)throw N.error}}if(w.length>0){s=!0;const C=new Eo;C.candidates=[{content:{role:"user",parts:w}}],yield yield Ie(C);const R=[];R.push(...v),R.push({role:"user",parts:w});const k=Gt(p.contents).concat(R);p.contents=k}else break}})}(this,c,e)}async generateContentInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=Gm(this.apiClient,e);return l=Y("{model}:generateContent",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=Hm(h),g=new Eo;return Object.assign(g,p),g})}else{const f=Om(this.apiClient,e);return l=Y("{model}:generateContent",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=qm(h),g=new Eo;return Object.assign(g,p),g})}}async generateContentStreamInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=Gm(this.apiClient,e);return l=Y("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return Si(this,arguments,function*(){var g,E,I,N;try{for(var V=!0,A=Uo(p),S;S=yield Ie(A.next()),g=S.done,!g;V=!0){N=S.value,V=!1;const x=N,D=Hm(yield Ie(x.json()));D.sdkHttpResponse={headers:x.headers};const b=new Eo;Object.assign(b,D),yield yield Ie(b)}}catch(x){E={error:x}}finally{try{!V&&!g&&(I=A.return)&&(yield Ie(I.call(A)))}finally{if(E)throw E.error}}})})}else{const f=Om(this.apiClient,e);return l=Y("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(p){return Si(this,arguments,function*(){var g,E,I,N;try{for(var V=!0,A=Uo(p),S;S=yield Ie(A.next()),g=S.done,!g;V=!0){N=S.value,V=!1;const x=N,D=qm(yield Ie(x.json()));D.sdkHttpResponse={headers:x.headers};const b=new Eo;Object.assign(b,D),yield yield Ie(b)}}catch(x){E={error:x}}finally{try{!V&&!g&&(I=A.return)&&(yield Ie(I.call(A)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=KI(this.apiClient,e);return l=Y("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=QI(h),g=new wm;return Object.assign(g,p),g})}else{const f=JI(this.apiClient,e);return l=Y("{model}:batchEmbedContents",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=YI(h),g=new wm;return Object.assign(g,p),g})}}async generateImagesInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=oA(this.apiClient,e);return l=Y("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=lA(h),g=new Im;return Object.assign(g,p),g})}else{const f=iA(this.apiClient,e);return l=Y("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=sA(h),g=new Im;return Object.assign(g,p),g})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=HI(this.apiClient,e);return o=Y("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=$I(c),h=new uC;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=nR(this.apiClient,e);return o=Y("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=rR(c),h=new cC;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=bA(this.apiClient,e);return o=Y("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=BA(c),h=new dC;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=zA(this.apiClient,e);return o=Y("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=WA(c),h=new fC;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=wA(this.apiClient,e);return l=Y("{name}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Hc(h))}else{const f=CA(this.apiClient,e);return l=Y("{name}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>qc(h))}}async listInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=NA(this.apiClient,e);return l=Y("{models_url}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=DA(h),g=new Am;return Object.assign(g,p),g})}else{const f=kA(this.apiClient,e);return l=Y("{models_url}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=MA(h),g=new Am;return Object.assign(g,p),g})}}async update(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=eR(this.apiClient,e);return l=Y("{model}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Hc(h))}else{const f=ZA(this.apiClient,e);return l=Y("{name}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>qc(h))}}async delete(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=BI(this.apiClient,e);return l=Y("{name}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=GI(h),g=new Rm;return Object.assign(g,p),g})}else{const f=bI(this.apiClient,e);return l=Y("{name}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=OI(h),g=new Rm;return Object.assign(g,p),g})}}async countTokens(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=LI(this.apiClient,e);return l=Y("{model}:countTokens",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=FI(h),g=new xm;return Object.assign(g,p),g})}else{const f=VI(this.apiClient,e);return l=Y("{model}:countTokens",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=UI(h),g=new xm;return Object.assign(g,p),g})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=RI(this.apiClient,e);return o=Y("{model}:computeTokens",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=xI(c),h=new hC;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=hA(this.apiClient,e);return l=Y("{model}:predictLongRunning",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const p=dA(h),g=new ra;return Object.assign(g,p),g})}else{const f=fA(this.apiClient,e);return l=Y("{model}:predictLongRunning",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const p=cA(h),g=new ra;return Object.assign(g,p),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FR extends $r{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=sC(e);return l=Y("{operationName}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s}else{const f=oC(e);return l=Y("{operationName}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=jS(e);return o=Y("{resourceName}:fetchPredictOperation",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bR(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["data"]);n!=null&&d(e,["data"],n);const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function BR(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>JR(o))),d(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&d(e,["role"],r),e}function OR(t,e,n){const r={},i=a(e,["expireTime"]);n!==void 0&&i!=null&&d(n,["expireTime"],i);const o=a(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&d(n,["newSessionExpireTime"],o);const s=a(e,["uses"]);n!==void 0&&s!=null&&d(n,["uses"],s);const l=a(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&d(n,["bidiGenerateContentSetup"],WR(t,l));const c=a(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&d(n,["fieldMask"],c),r}function GR(t,e){const n={},r=a(e,["config"]);return r!=null&&d(n,["config"],OR(t,r,n)),n}function qR(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function HR(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function $R(t){const e={},n=a(t,["timeRangeFilter"]);if(n!=null&&d(e,["timeRangeFilter"],n),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function zR(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],r);const i=a(t,["responseModalities"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig","responseModalities"],i);const o=a(t,["temperature"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","topK"],l);const c=a(t,["maxOutputTokens"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","maxOutputTokens"],c);const f=a(t,["mediaResolution"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","mediaResolution"],f);const h=a(t,["seed"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","seed"],h);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","speechConfig"],af(p));const g=a(t,["thinkingConfig"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","thinkingConfig"],g);const E=a(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],E);const I=a(t,["systemInstruction"]);e!==void 0&&I!=null&&d(e,["setup","systemInstruction"],BR(pt(I)));const N=a(t,["tools"]);if(e!==void 0&&N!=null){let F=$i(N);Array.isArray(F)&&(F=F.map(w=>YR(Hi(w)))),d(e,["setup","tools"],F)}const V=a(t,["sessionResumption"]);e!==void 0&&V!=null&&d(e,["setup","sessionResumption"],KR(V));const A=a(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&d(e,["setup","inputAudioTranscription"],A);const S=a(t,["outputAudioTranscription"]);e!==void 0&&S!=null&&d(e,["setup","outputAudioTranscription"],S);const x=a(t,["realtimeInputConfig"]);e!==void 0&&x!=null&&d(e,["setup","realtimeInputConfig"],x);const D=a(t,["contextWindowCompression"]);e!==void 0&&D!=null&&d(e,["setup","contextWindowCompression"],D);const b=a(t,["proactivity"]);return e!==void 0&&b!=null&&d(e,["setup","proactivity"],b),n}function WR(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["setup","model"],pe(t,r));const i=a(e,["config"]);return i!=null&&d(n,["config"],zR(i,n)),n}function JR(t){const e={},n=a(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],n);const r=a(t,["thought"]);r!=null&&d(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&d(e,["inlineData"],bR(i));const o=a(t,["fileData"]);o!=null&&d(e,["fileData"],qR(o));const s=a(t,["thoughtSignature"]);s!=null&&d(e,["thoughtSignature"],s);const l=a(t,["functionCall"]);l!=null&&d(e,["functionCall"],l);const c=a(t,["codeExecutionResult"]);c!=null&&d(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&d(e,["executableCode"],f);const h=a(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const p=a(t,["text"]);return p!=null&&d(e,["text"],p),e}function KR(t){const e={},n=a(t,["handle"]);if(n!=null&&d(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function YR(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),d(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearch"]);r!=null&&d(e,["googleSearch"],$R(r));const i=a(t,["googleSearchRetrieval"]);if(i!=null&&d(e,["googleSearchRetrieval"],i),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["googleMaps"]);o!=null&&d(e,["googleMaps"],HR(o));const s=a(t,["urlContext"]);s!=null&&d(e,["urlContext"],s);const l=a(t,["computerUse"]);l!=null&&d(e,["computerUse"],l);const c=a(t,["codeExecution"]);return c!=null&&d(e,["codeExecution"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QR(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function XR(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=QR(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];i.length>0&&(l=i.map(f=>s.includes(f)?`generationConfig.${f}`:f));const c=[];o&&c.push(o),l.length>0&&c.push(...l),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class jR extends $r{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=GR(this.apiClient,e);o=Y("auth_tokens",l._url),s=l._query,delete l.config,delete l._url,delete l._query;const c=XR(l,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZR(t){const e={},n=a(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function ex(t){const e={},n=a(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function tx(t,e){const n={};if(a(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=a(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&d(e,["displayName"],r),a(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=a(t,["epochCount"]);e!==void 0&&i!=null&&d(e,["tuningTask","hyperparameters","epochCount"],i);const o=a(t,["learningRateMultiplier"]);if(o!=null&&d(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),a(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=a(t,["batchSize"]);e!==void 0&&s!=null&&d(e,["tuningTask","hyperparameters","batchSize"],s);const l=a(t,["learningRate"]);if(e!==void 0&&l!=null&&d(e,["tuningTask","hyperparameters","learningRate"],l),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return n}function nx(t,e){const n={},r=a(t,["validationDataset"]);e!==void 0&&r!=null&&d(e,["supervisedTuningSpec"],_x(r,n));const i=a(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&d(e,["tunedModelDisplayName"],i);const o=a(t,["description"]);e!==void 0&&o!=null&&d(e,["description"],o);const s=a(t,["epochCount"]);e!==void 0&&s!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],s);const l=a(t,["learningRateMultiplier"]);e!==void 0&&l!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],l);const c=a(t,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const f=a(t,["adapterSize"]);if(e!==void 0&&f!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],f),a(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=a(t,["labels"]);return e!==void 0&&h!=null&&d(e,["labels"],h),n}function rx(t){const e={},n=a(t,["baseModel"]);n!=null&&d(e,["baseModel"],n);const r=a(t,["preTunedModel"]);r!=null&&d(e,["preTunedModel"],r);const i=a(t,["trainingDataset"]);i!=null&&d(e,["tuningTask","trainingData"],px(i));const o=a(t,["config"]);return o!=null&&tx(o,e),e}function ix(t){const e={},n=a(t,["baseModel"]);n!=null&&d(e,["baseModel"],n);const r=a(t,["preTunedModel"]);r!=null&&d(e,["preTunedModel"],r);const i=a(t,["trainingDataset"]);i!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],mx(i,e));const o=a(t,["config"]);return o!=null&&nx(o,e),e}function ox(t){const e={},n=a(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function sx(t){const e={},n=a(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function lx(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);e!==void 0&&i!=null&&d(e,["_query","pageToken"],i);const o=a(t,["filter"]);return e!==void 0&&o!=null&&d(e,["_query","filter"],o),n}function ax(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);e!==void 0&&i!=null&&d(e,["_query","pageToken"],i);const o=a(t,["filter"]);return e!==void 0&&o!=null&&d(e,["_query","filter"],o),n}function ux(t){const e={},n=a(t,["config"]);return n!=null&&lx(n,e),e}function cx(t){const e={},n=a(t,["config"]);return n!=null&&ax(n,e),e}function dx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=a(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Uv(s))),d(e,["tuningJobs"],o)}return e}function fx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=a(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>zc(s))),d(e,["tuningJobs"],o)}return e}function hx(t){const e={},n=a(t,["name"]);n!=null&&d(e,["model"],n);const r=a(t,["name"]);return r!=null&&d(e,["endpoint"],r),e}function px(t){const e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=a(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),d(e,["examples","examples"],r)}return e}function mx(t,e){const n={},r=a(t,["gcsUri"]);e!==void 0&&r!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],r);const i=a(t,["vertexDatasetResource"]);if(e!==void 0&&i!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],i),a(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function Uv(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&d(e,["name"],r);const i=a(t,["state"]);i!=null&&d(e,["state"],_v(i));const o=a(t,["createTime"]);o!=null&&d(e,["createTime"],o);const s=a(t,["tuningTask","startTime"]);s!=null&&d(e,["startTime"],s);const l=a(t,["tuningTask","completeTime"]);l!=null&&d(e,["endTime"],l);const c=a(t,["updateTime"]);c!=null&&d(e,["updateTime"],c);const f=a(t,["description"]);f!=null&&d(e,["description"],f);const h=a(t,["baseModel"]);h!=null&&d(e,["baseModel"],h);const p=a(t,["_self"]);p!=null&&d(e,["tunedModel"],hx(p));const g=a(t,["customBaseModel"]);g!=null&&d(e,["customBaseModel"],g);const E=a(t,["experiment"]);E!=null&&d(e,["experiment"],E);const I=a(t,["labels"]);I!=null&&d(e,["labels"],I);const N=a(t,["outputUri"]);N!=null&&d(e,["outputUri"],N);const V=a(t,["pipelineJob"]);V!=null&&d(e,["pipelineJob"],V);const A=a(t,["serviceAccount"]);A!=null&&d(e,["serviceAccount"],A);const S=a(t,["tunedModelDisplayName"]);S!=null&&d(e,["tunedModelDisplayName"],S);const x=a(t,["veoTuningSpec"]);return x!=null&&d(e,["veoTuningSpec"],x),e}function zc(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&d(e,["name"],r);const i=a(t,["state"]);i!=null&&d(e,["state"],_v(i));const o=a(t,["createTime"]);o!=null&&d(e,["createTime"],o);const s=a(t,["startTime"]);s!=null&&d(e,["startTime"],s);const l=a(t,["endTime"]);l!=null&&d(e,["endTime"],l);const c=a(t,["updateTime"]);c!=null&&d(e,["updateTime"],c);const f=a(t,["error"]);f!=null&&d(e,["error"],f);const h=a(t,["description"]);h!=null&&d(e,["description"],h);const p=a(t,["baseModel"]);p!=null&&d(e,["baseModel"],p);const g=a(t,["tunedModel"]);g!=null&&d(e,["tunedModel"],g);const E=a(t,["preTunedModel"]);E!=null&&d(e,["preTunedModel"],E);const I=a(t,["supervisedTuningSpec"]);I!=null&&d(e,["supervisedTuningSpec"],I);const N=a(t,["tuningDataStats"]);N!=null&&d(e,["tuningDataStats"],N);const V=a(t,["encryptionSpec"]);V!=null&&d(e,["encryptionSpec"],V);const A=a(t,["partnerModelTuningSpec"]);A!=null&&d(e,["partnerModelTuningSpec"],A);const S=a(t,["customBaseModel"]);S!=null&&d(e,["customBaseModel"],S);const x=a(t,["experiment"]);x!=null&&d(e,["experiment"],x);const D=a(t,["labels"]);D!=null&&d(e,["labels"],D);const b=a(t,["outputUri"]);b!=null&&d(e,["outputUri"],b);const F=a(t,["pipelineJob"]);F!=null&&d(e,["pipelineJob"],F);const w=a(t,["serviceAccount"]);w!=null&&d(e,["serviceAccount"],w);const v=a(t,["tunedModelDisplayName"]);v!=null&&d(e,["tunedModelDisplayName"],v);const C=a(t,["veoTuningSpec"]);return C!=null&&d(e,["veoTuningSpec"],C),e}function gx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&d(e,["name"],r);const i=a(t,["metadata"]);i!=null&&d(e,["metadata"],i);const o=a(t,["done"]);o!=null&&d(e,["done"],o);const s=a(t,["error"]);return s!=null&&d(e,["error"],s),e}function _x(t,e){const n={},r=a(t,["gcsUri"]);r!=null&&d(n,["validationDatasetUri"],r);const i=a(t,["vertexDatasetResource"]);return e!==void 0&&i!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yx extends $r{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new _s(Fr.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),o=await this.tuneMldevInternal(i);let s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:bc.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=sx(e);return l=Y("{name}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>zc(h))}else{const f=ox(e);return l=Y("{name}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>Uv(h))}}async listInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=cx(e);return l=Y("tuningJobs",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=fx(h),g=new Pm;return Object.assign(g,p),g})}else{const f=ux(e);return l=Y("tunedModels",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=dx(h),g=new Pm;return Object.assign(g,p),g})}}async cancel(e){var n,r,i,o;let s="",l={};if(this.apiClient.isVertexAI()){const c=ex(e);s=Y("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=ZR(e);s=Y("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=ix(e);return o=Y("tuningJobs",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>zc(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=rx(e);return o=Y("tunedModels",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>gx(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vx{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Ex=1024*1024*8,Tx=3,Sx=1e3,Cx=2,Du="x-goog-upload-status";async function wx(t,e,n){var r,i,o;let s=0,l=0,c=new Bc(new Response),f="upload";for(s=t.size;l<s;){const p=Math.min(Ex,s-l),g=t.slice(l,l+p);l+p>=s&&(f+=", finalize");let E=0,I=Sx;for(;E<Tx&&(c=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(l),"Content-Length":String(p)}}}),!(!((r=c==null?void 0:c.headers)===null||r===void 0)&&r[Du]));)E++,await Ax(I),I=I*Cx;if(l+=p,((i=c==null?void 0:c.headers)===null||i===void 0?void 0:i[Du])!=="active")break;if(s<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(c==null?void 0:c.json());if(((o=c==null?void 0:c.headers)===null||o===void 0?void 0:o[Du])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function Ix(t){return{size:t.size,type:t.type}}function Ax(t){return new Promise(e=>setTimeout(e,t))}class Rx{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await wx(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Ix(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xx{create(e,n,r){return new Px(e,n,r)}}class Px{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ym="x-goog-api-key";class kx{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(Ym)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Ym,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nx="gl-node/";class Mx{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=QS(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new kx(this.apiKey);this.apiClient=new gR({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Nx+"web",uploader:new Rx,downloader:new vx}),this.models=new UR(this.apiClient),this.live=new PR(this.apiClient,i,new xx),this.batches=new mw(this.apiClient),this.chats=new Jw(this.models,this.apiClient),this.caches=new $w(this.apiClient),this.files=new rI(this.apiClient),this.operations=new FR(this.apiClient),this.authTokens=new jR(this.apiClient),this.tunings=new yx(this.apiClient)}}const Dx=()=>{};var Qm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Vx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],l=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},bv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,l=s?t[i+1]:0,c=i+2<t.length,f=c?t[i+2]:0,h=o>>2,p=(o&3)<<4|l>>4;let g=(l&15)<<2|f>>6,E=f&63;c||(E=64,s||(g=64)),r.push(n[h],n[p],n[g],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Fv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Vx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||l==null||f==null||p==null)throw new Lx;const g=o<<2|l>>4;if(r.push(g),f!==64){const E=l<<4&240|f>>2;if(r.push(E),p!==64){const I=f<<6&192|p;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Lx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ux=function(t){const e=Fv(t);return bv.encodeByteArray(e,!0)},Bv=function(t){return Ux(t).replace(/\./g,"")},Fx=function(t){try{return bv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=()=>bx().__FIREBASE_DEFAULTS__,Ox=()=>{if(typeof process>"u"||typeof Qm>"u")return;const t=Qm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Gx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Fx(t[1]);return e&&JSON.parse(e)},qx=()=>{try{return Dx()||Bx()||Ox()||Gx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zx(){var e;const t=(e=qx())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Wx(){return!zx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Jx(){try{return typeof indexedDB=="object"}catch{return!1}}function Kx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="FirebaseError";class Wi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Yx,Object.setPrototypeOf(this,Wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ov.prototype.create)}}class Ov{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?Qx(o,r):"Error",l=`${this.serviceName}: ${s} (${i}).`;return new Wi(i,l,r)}}function Qx(t,e){return t.replace(Xx,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Xx=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(t){return t&&t._delegate?t._delegate:t}class oa{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(fe||(fe={}));const jx={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},Zx=fe.INFO,eP={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},tP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=eP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gv{constructor(e){this.name=e,this._logLevel=Zx,this._logHandler=tP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}}const nP=(t,e)=>e.some(n=>t instanceof n);let Xm,jm;function rP(){return Xm||(Xm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iP(){return jm||(jm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qv=new WeakMap,Wc=new WeakMap,Hv=new WeakMap,Vu=new WeakMap,cf=new WeakMap;function oP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(tr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&qv.set(n,t)}).catch(()=>{}),cf.set(e,t),e}function sP(t){if(Wc.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Wc.set(t,e)}let Jc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Hv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lP(t){Jc=t(Jc)}function aP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Lu(this),e,...n);return Hv.set(r,e.sort?e.sort():[e]),tr(r)}:iP().includes(t)?function(...e){return t.apply(Lu(this),e),tr(qv.get(this))}:function(...e){return tr(t.apply(Lu(this),e))}}function uP(t){return typeof t=="function"?aP(t):(t instanceof IDBTransaction&&sP(t),nP(t,rP())?new Proxy(t,Jc):t)}function tr(t){if(t instanceof IDBRequest)return oP(t);if(Vu.has(t))return Vu.get(t);const e=uP(t);return e!==t&&(Vu.set(t,e),cf.set(e,t)),e}const Lu=t=>cf.get(t);function cP(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),l=tr(s);return r&&s.addEventListener("upgradeneeded",c=>{r(tr(s.result),c.oldVersion,c.newVersion,tr(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const dP=["get","getKey","getAll","getAllKeys","count"],fP=["put","add","delete","clear"],Uu=new Map;function Zm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Uu.get(e))return Uu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=fP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||dP.includes(n)))return;const o=async function(s,...l){const c=this.transaction(s,i?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),i&&c.done]))[0]};return Uu.set(e,o),o}lP(t=>({...t,get:(e,n,r)=>Zm(e,n)||t.get(e,n,r),has:(e,n)=>!!Zm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function pP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kc="@firebase/app",eg="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn=new Gv("@firebase/app"),mP="@firebase/app-compat",gP="@firebase/analytics-compat",_P="@firebase/analytics",yP="@firebase/app-check-compat",vP="@firebase/app-check",EP="@firebase/auth",TP="@firebase/auth-compat",SP="@firebase/database",CP="@firebase/data-connect",wP="@firebase/database-compat",IP="@firebase/functions",AP="@firebase/functions-compat",RP="@firebase/installations",xP="@firebase/installations-compat",PP="@firebase/messaging",kP="@firebase/messaging-compat",NP="@firebase/performance",MP="@firebase/performance-compat",DP="@firebase/remote-config",VP="@firebase/remote-config-compat",LP="@firebase/storage",UP="@firebase/storage-compat",FP="@firebase/firestore",bP="@firebase/ai",BP="@firebase/firestore-compat",OP="firebase",GP="12.4.0",qP={[Kc]:"fire-core",[mP]:"fire-core-compat",[_P]:"fire-analytics",[gP]:"fire-analytics-compat",[vP]:"fire-app-check",[yP]:"fire-app-check-compat",[EP]:"fire-auth",[TP]:"fire-auth-compat",[SP]:"fire-rtdb",[CP]:"fire-data-connect",[wP]:"fire-rtdb-compat",[IP]:"fire-fn",[AP]:"fire-fn-compat",[RP]:"fire-iid",[xP]:"fire-iid-compat",[PP]:"fire-fcm",[kP]:"fire-fcm-compat",[NP]:"fire-perf",[MP]:"fire-perf-compat",[DP]:"fire-rc",[VP]:"fire-rc-compat",[LP]:"fire-gcs",[UP]:"fire-gcs-compat",[FP]:"fire-fst",[BP]:"fire-fst-compat",[bP]:"fire-vertex","fire-js":"fire-js",[OP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP=new Map,$P=new Map,tg=new Map;function ng(t,e){try{t.container.addComponent(e)}catch(n){Nn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function sa(t){const e=t.name;if(tg.has(e))return Nn.debug(`There were multiple attempts to register component ${e}.`),!1;tg.set(e,t);for(const n of HP.values())ng(n,t);for(const n of $P.values())ng(n,t);return!0}function zP(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},df=new Ov("app","Firebase",WP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP=GP;function wi(t,e,n){let r=qP[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nn.warn(s.join(" "));return}sa(new oa(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="firebase-heartbeat-database",YP=1,ss="firebase-heartbeat-store";let Fu=null;function $v(){return Fu||(Fu=cP(KP,YP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ss)}catch(n){console.warn(n)}}}}).catch(t=>{throw df.create("idb-open",{originalErrorMessage:t.message})})),Fu}async function QP(t){try{const n=(await $v()).transaction(ss),r=await n.objectStore(ss).get(zv(t));return await n.done,r}catch(e){if(e instanceof Wi)Nn.warn(e.message);else{const n=df.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Nn.warn(n.message)}}}async function rg(t,e){try{const r=(await $v()).transaction(ss,"readwrite");await r.objectStore(ss).put(e,zv(t)),await r.done}catch(n){if(n instanceof Wi)Nn.warn(n.message);else{const r=df.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Nn.warn(r.message)}}}function zv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=1024,jP=30;class ZP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new tk(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ig();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>jP){const s=nk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Nn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ig(),{heartbeatsToSend:r,unsentEntries:i}=ek(this._heartbeatsCache.heartbeats),o=Bv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Nn.warn(n),""}}}function ig(){return new Date().toISOString().substring(0,10)}function ek(t,e=XP){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),og(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),og(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class tk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Jx()?Kx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await QP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function og(t){return Bv(JSON.stringify({version:2,heartbeats:t})).length}function nk(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(t){sa(new oa("platform-logger",e=>new hP(e),"PRIVATE")),sa(new oa("heartbeat",e=>new ZP(e),"PRIVATE")),wi(Kc,eg,t),wi(Kc,eg,"esm2020"),wi("fire-js","")}rk("");var ik="firebase",ok="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wi(ik,ok,"app");var sg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ff;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,v){function C(){}C.prototype=v.prototype,w.F=v.prototype,w.prototype=new C,w.prototype.constructor=w,w.D=function(R,k,M){for(var P=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)P[Z-2]=arguments[Z];return v.prototype[k].apply(R,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,C){C||(C=0);const R=Array(16);if(typeof v=="string")for(var k=0;k<16;++k)R[k]=v.charCodeAt(C++)|v.charCodeAt(C++)<<8|v.charCodeAt(C++)<<16|v.charCodeAt(C++)<<24;else for(k=0;k<16;++k)R[k]=v[C++]|v[C++]<<8|v[C++]<<16|v[C++]<<24;v=w.g[0],C=w.g[1],k=w.g[2];let M=w.g[3],P;P=v+(M^C&(k^M))+R[0]+3614090360&4294967295,v=C+(P<<7&4294967295|P>>>25),P=M+(k^v&(C^k))+R[1]+3905402710&4294967295,M=v+(P<<12&4294967295|P>>>20),P=k+(C^M&(v^C))+R[2]+606105819&4294967295,k=M+(P<<17&4294967295|P>>>15),P=C+(v^k&(M^v))+R[3]+3250441966&4294967295,C=k+(P<<22&4294967295|P>>>10),P=v+(M^C&(k^M))+R[4]+4118548399&4294967295,v=C+(P<<7&4294967295|P>>>25),P=M+(k^v&(C^k))+R[5]+1200080426&4294967295,M=v+(P<<12&4294967295|P>>>20),P=k+(C^M&(v^C))+R[6]+2821735955&4294967295,k=M+(P<<17&4294967295|P>>>15),P=C+(v^k&(M^v))+R[7]+4249261313&4294967295,C=k+(P<<22&4294967295|P>>>10),P=v+(M^C&(k^M))+R[8]+1770035416&4294967295,v=C+(P<<7&4294967295|P>>>25),P=M+(k^v&(C^k))+R[9]+2336552879&4294967295,M=v+(P<<12&4294967295|P>>>20),P=k+(C^M&(v^C))+R[10]+4294925233&4294967295,k=M+(P<<17&4294967295|P>>>15),P=C+(v^k&(M^v))+R[11]+2304563134&4294967295,C=k+(P<<22&4294967295|P>>>10),P=v+(M^C&(k^M))+R[12]+1804603682&4294967295,v=C+(P<<7&4294967295|P>>>25),P=M+(k^v&(C^k))+R[13]+4254626195&4294967295,M=v+(P<<12&4294967295|P>>>20),P=k+(C^M&(v^C))+R[14]+2792965006&4294967295,k=M+(P<<17&4294967295|P>>>15),P=C+(v^k&(M^v))+R[15]+1236535329&4294967295,C=k+(P<<22&4294967295|P>>>10),P=v+(k^M&(C^k))+R[1]+4129170786&4294967295,v=C+(P<<5&4294967295|P>>>27),P=M+(C^k&(v^C))+R[6]+3225465664&4294967295,M=v+(P<<9&4294967295|P>>>23),P=k+(v^C&(M^v))+R[11]+643717713&4294967295,k=M+(P<<14&4294967295|P>>>18),P=C+(M^v&(k^M))+R[0]+3921069994&4294967295,C=k+(P<<20&4294967295|P>>>12),P=v+(k^M&(C^k))+R[5]+3593408605&4294967295,v=C+(P<<5&4294967295|P>>>27),P=M+(C^k&(v^C))+R[10]+38016083&4294967295,M=v+(P<<9&4294967295|P>>>23),P=k+(v^C&(M^v))+R[15]+3634488961&4294967295,k=M+(P<<14&4294967295|P>>>18),P=C+(M^v&(k^M))+R[4]+3889429448&4294967295,C=k+(P<<20&4294967295|P>>>12),P=v+(k^M&(C^k))+R[9]+568446438&4294967295,v=C+(P<<5&4294967295|P>>>27),P=M+(C^k&(v^C))+R[14]+3275163606&4294967295,M=v+(P<<9&4294967295|P>>>23),P=k+(v^C&(M^v))+R[3]+4107603335&4294967295,k=M+(P<<14&4294967295|P>>>18),P=C+(M^v&(k^M))+R[8]+1163531501&4294967295,C=k+(P<<20&4294967295|P>>>12),P=v+(k^M&(C^k))+R[13]+2850285829&4294967295,v=C+(P<<5&4294967295|P>>>27),P=M+(C^k&(v^C))+R[2]+4243563512&4294967295,M=v+(P<<9&4294967295|P>>>23),P=k+(v^C&(M^v))+R[7]+1735328473&4294967295,k=M+(P<<14&4294967295|P>>>18),P=C+(M^v&(k^M))+R[12]+2368359562&4294967295,C=k+(P<<20&4294967295|P>>>12),P=v+(C^k^M)+R[5]+4294588738&4294967295,v=C+(P<<4&4294967295|P>>>28),P=M+(v^C^k)+R[8]+2272392833&4294967295,M=v+(P<<11&4294967295|P>>>21),P=k+(M^v^C)+R[11]+1839030562&4294967295,k=M+(P<<16&4294967295|P>>>16),P=C+(k^M^v)+R[14]+4259657740&4294967295,C=k+(P<<23&4294967295|P>>>9),P=v+(C^k^M)+R[1]+2763975236&4294967295,v=C+(P<<4&4294967295|P>>>28),P=M+(v^C^k)+R[4]+1272893353&4294967295,M=v+(P<<11&4294967295|P>>>21),P=k+(M^v^C)+R[7]+4139469664&4294967295,k=M+(P<<16&4294967295|P>>>16),P=C+(k^M^v)+R[10]+3200236656&4294967295,C=k+(P<<23&4294967295|P>>>9),P=v+(C^k^M)+R[13]+681279174&4294967295,v=C+(P<<4&4294967295|P>>>28),P=M+(v^C^k)+R[0]+3936430074&4294967295,M=v+(P<<11&4294967295|P>>>21),P=k+(M^v^C)+R[3]+3572445317&4294967295,k=M+(P<<16&4294967295|P>>>16),P=C+(k^M^v)+R[6]+76029189&4294967295,C=k+(P<<23&4294967295|P>>>9),P=v+(C^k^M)+R[9]+3654602809&4294967295,v=C+(P<<4&4294967295|P>>>28),P=M+(v^C^k)+R[12]+3873151461&4294967295,M=v+(P<<11&4294967295|P>>>21),P=k+(M^v^C)+R[15]+530742520&4294967295,k=M+(P<<16&4294967295|P>>>16),P=C+(k^M^v)+R[2]+3299628645&4294967295,C=k+(P<<23&4294967295|P>>>9),P=v+(k^(C|~M))+R[0]+4096336452&4294967295,v=C+(P<<6&4294967295|P>>>26),P=M+(C^(v|~k))+R[7]+1126891415&4294967295,M=v+(P<<10&4294967295|P>>>22),P=k+(v^(M|~C))+R[14]+2878612391&4294967295,k=M+(P<<15&4294967295|P>>>17),P=C+(M^(k|~v))+R[5]+4237533241&4294967295,C=k+(P<<21&4294967295|P>>>11),P=v+(k^(C|~M))+R[12]+1700485571&4294967295,v=C+(P<<6&4294967295|P>>>26),P=M+(C^(v|~k))+R[3]+2399980690&4294967295,M=v+(P<<10&4294967295|P>>>22),P=k+(v^(M|~C))+R[10]+4293915773&4294967295,k=M+(P<<15&4294967295|P>>>17),P=C+(M^(k|~v))+R[1]+2240044497&4294967295,C=k+(P<<21&4294967295|P>>>11),P=v+(k^(C|~M))+R[8]+1873313359&4294967295,v=C+(P<<6&4294967295|P>>>26),P=M+(C^(v|~k))+R[15]+4264355552&4294967295,M=v+(P<<10&4294967295|P>>>22),P=k+(v^(M|~C))+R[6]+2734768916&4294967295,k=M+(P<<15&4294967295|P>>>17),P=C+(M^(k|~v))+R[13]+1309151649&4294967295,C=k+(P<<21&4294967295|P>>>11),P=v+(k^(C|~M))+R[4]+4149444226&4294967295,v=C+(P<<6&4294967295|P>>>26),P=M+(C^(v|~k))+R[11]+3174756917&4294967295,M=v+(P<<10&4294967295|P>>>22),P=k+(v^(M|~C))+R[2]+718787259&4294967295,k=M+(P<<15&4294967295|P>>>17),P=C+(M^(k|~v))+R[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(k+(P<<21&4294967295|P>>>11))&4294967295,w.g[2]=w.g[2]+k&4294967295,w.g[3]=w.g[3]+M&4294967295}r.prototype.v=function(w,v){v===void 0&&(v=w.length);const C=v-this.blockSize,R=this.C;let k=this.h,M=0;for(;M<v;){if(k==0)for(;M<=C;)i(this,w,M),M+=this.blockSize;if(typeof w=="string"){for(;M<v;)if(R[k++]=w.charCodeAt(M++),k==this.blockSize){i(this,R),k=0;break}}else for(;M<v;)if(R[k++]=w[M++],k==this.blockSize){i(this,R),k=0;break}}this.h=k,this.o+=v},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;v=this.o*8;for(var C=w.length-8;C<w.length;++C)w[C]=v&255,v/=256;for(this.v(w),w=Array(16),v=0,C=0;C<4;++C)for(let R=0;R<32;R+=8)w[v++]=this.g[C]>>>R&255;return w};function o(w,v){var C=l;return Object.prototype.hasOwnProperty.call(C,w)?C[w]:C[w]=v(w)}function s(w,v){this.h=v;const C=[];let R=!0;for(let k=w.length-1;k>=0;k--){const M=w[k]|0;R&&M==v||(C[k]=M,R=!1)}this.g=C}var l={};function c(w){return-128<=w&&w<128?o(w,function(v){return new s([v|0],v<0?-1:0)}):new s([w|0],w<0?-1:0)}function f(w){if(isNaN(w)||!isFinite(w))return p;if(w<0)return V(f(-w));const v=[];let C=1;for(let R=0;w>=C;R++)v[R]=w/C|0,C*=4294967296;return new s(v,0)}function h(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return V(h(w.substring(1),v));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=f(Math.pow(v,8));let R=p;for(let M=0;M<w.length;M+=8){var k=Math.min(8,w.length-M);const P=parseInt(w.substring(M,M+k),v);k<8?(k=f(Math.pow(v,k)),R=R.j(k).add(f(P))):(R=R.j(C),R=R.add(f(P)))}return R}var p=c(0),g=c(1),E=c(16777216);t=s.prototype,t.m=function(){if(N(this))return-V(this).m();let w=0,v=1;for(let C=0;C<this.g.length;C++){const R=this.i(C);w+=(R>=0?R:4294967296+R)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(I(this))return"0";if(N(this))return"-"+V(this).toString(w);const v=f(Math.pow(w,6));var C=this;let R="";for(;;){const k=D(C,v).g;C=A(C,k.j(v));let M=((C.g.length>0?C.g[0]:C.h)>>>0).toString(w);if(C=k,I(C))return M+R;for(;M.length<6;)M="0"+M;R=M+R}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function I(w){if(w.h!=0)return!1;for(let v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function N(w){return w.h==-1}t.l=function(w){return w=A(this,w),N(w)?-1:I(w)?0:1};function V(w){const v=w.g.length,C=[];for(let R=0;R<v;R++)C[R]=~w.g[R];return new s(C,~w.h).add(g)}t.abs=function(){return N(this)?V(this):this},t.add=function(w){const v=Math.max(this.g.length,w.g.length),C=[];let R=0;for(let k=0;k<=v;k++){let M=R+(this.i(k)&65535)+(w.i(k)&65535),P=(M>>>16)+(this.i(k)>>>16)+(w.i(k)>>>16);R=P>>>16,M&=65535,P&=65535,C[k]=P<<16|M}return new s(C,C[C.length-1]&-2147483648?-1:0)};function A(w,v){return w.add(V(v))}t.j=function(w){if(I(this)||I(w))return p;if(N(this))return N(w)?V(this).j(V(w)):V(V(this).j(w));if(N(w))return V(this.j(V(w)));if(this.l(E)<0&&w.l(E)<0)return f(this.m()*w.m());const v=this.g.length+w.g.length,C=[];for(var R=0;R<2*v;R++)C[R]=0;for(R=0;R<this.g.length;R++)for(let k=0;k<w.g.length;k++){const M=this.i(R)>>>16,P=this.i(R)&65535,Z=w.i(k)>>>16,ue=w.i(k)&65535;C[2*R+2*k]+=P*ue,S(C,2*R+2*k),C[2*R+2*k+1]+=M*ue,S(C,2*R+2*k+1),C[2*R+2*k+1]+=P*Z,S(C,2*R+2*k+1),C[2*R+2*k+2]+=M*Z,S(C,2*R+2*k+2)}for(w=0;w<v;w++)C[w]=C[2*w+1]<<16|C[2*w];for(w=v;w<2*v;w++)C[w]=0;return new s(C,0)};function S(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function x(w,v){this.g=w,this.h=v}function D(w,v){if(I(v))throw Error("division by zero");if(I(w))return new x(p,p);if(N(w))return v=D(V(w),v),new x(V(v.g),V(v.h));if(N(v))return v=D(w,V(v)),new x(V(v.g),v.h);if(w.g.length>30){if(N(w)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var C=g,R=v;R.l(w)<=0;)C=b(C),R=b(R);var k=F(C,1),M=F(R,1);for(R=F(R,2),C=F(C,2);!I(R);){var P=M.add(R);P.l(w)<=0&&(k=k.add(C),M=P),R=F(R,1),C=F(C,1)}return v=A(w,k.j(v)),new x(k,v)}for(k=p;w.l(v)>=0;){for(C=Math.max(1,Math.floor(w.m()/v.m())),R=Math.ceil(Math.log(C)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),M=f(C),P=M.j(v);N(P)||P.l(w)>0;)C-=R,M=f(C),P=M.j(v);I(M)&&(M=g),k=k.add(M),w=A(w,P)}return new x(k,w)}t.B=function(w){return D(this,w).h},t.and=function(w){const v=Math.max(this.g.length,w.g.length),C=[];for(let R=0;R<v;R++)C[R]=this.i(R)&w.i(R);return new s(C,this.h&w.h)},t.or=function(w){const v=Math.max(this.g.length,w.g.length),C=[];for(let R=0;R<v;R++)C[R]=this.i(R)|w.i(R);return new s(C,this.h|w.h)},t.xor=function(w){const v=Math.max(this.g.length,w.g.length),C=[];for(let R=0;R<v;R++)C[R]=this.i(R)^w.i(R);return new s(C,this.h^w.h)};function b(w){const v=w.g.length+1,C=[];for(let R=0;R<v;R++)C[R]=w.i(R)<<1|w.i(R-1)>>>31;return new s(C,w.h)}function F(w,v){const C=v>>5;v%=32;const R=w.g.length-C,k=[];for(let M=0;M<R;M++)k[M]=v>0?w.i(M+C)>>>v|w.i(M+C+1)<<32-v:w.i(M+C);return new s(k,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=h,ff=s}).apply(typeof sg<"u"?sg:typeof self<"u"?self:typeof window<"u"?window:{});var ll=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wv,Ao,Jv,Rl,Yc,Kv,Yv,Qv;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ll=="object"&&ll];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function i(u,m){if(m)e:{var y=r;u=u.split(".");for(var T=0;T<u.length-1;T++){var L=u[T];if(!(L in y))break e;y=y[L]}u=u[u.length-1],T=y[u],m=m(T),m!=T&&m!=null&&e(y,u,{configurable:!0,writable:!0,value:m})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(m){var y=[],T;for(T in m)Object.prototype.hasOwnProperty.call(m,T)&&y.push([T,m[T]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},s=this||self;function l(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function c(u,m,y){return u.call.apply(u.bind,arguments)}function f(u,m,y){return f=c,f.apply(null,arguments)}function h(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function p(u,m){function y(){}y.prototype=m.prototype,u.Z=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Ob=function(T,L,U){for(var $=Array(arguments.length-2),se=2;se<arguments.length;se++)$[se-2]=arguments[se];return m.prototype[L].apply(T,$)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function E(u){const m=u.length;if(m>0){const y=Array(m);for(let T=0;T<m;T++)y[T]=u[T];return y}return[]}function I(u,m){for(let T=1;T<arguments.length;T++){const L=arguments[T];var y=typeof L;if(y=y!="object"?y:L?Array.isArray(L)?"array":y:"null",y=="array"||y=="object"&&typeof L.length=="number"){y=u.length||0;const U=L.length||0;u.length=y+U;for(let $=0;$<U;$++)u[y+$]=L[$]}else u.push(L)}}class N{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function V(u){s.setTimeout(()=>{throw u},0)}function A(){var u=w;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class S{constructor(){this.h=this.g=null}add(m,y){const T=x.get();T.set(m,y),this.h?this.h.next=T:this.g=T,this.h=T}}var x=new N(()=>new D,u=>u.reset());class D{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let b,F=!1,w=new S,v=()=>{const u=Promise.resolve(void 0);b=()=>{u.then(C)}};function C(){for(var u;u=A();){try{u.h.call(u.g)}catch(y){V(y)}var m=x;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}F=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};s.addEventListener("test",y,m),s.removeEventListener("test",y,m)}catch{}return u}();function P(u){return/^[\s\xa0]*$/.test(u)}function Z(u,m){k.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}p(Z,k),Z.prototype.init=function(u,m){const y=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Z.Z.h.call(this)},Z.prototype.h=function(){Z.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ue="closure_listenable_"+(Math.random()*1e6|0),z=0;function me(u,m,y,T,L){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!T,this.ha=L,this.key=++z,this.da=this.fa=!1}function H(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function K(u,m,y){for(const T in u)m.call(y,u[T],T,u)}function ne(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function X(u){const m={};for(const y in u)m[y]=u[y];return m}const ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ge(u,m){let y,T;for(let L=1;L<arguments.length;L++){T=arguments[L];for(y in T)u[y]=T[y];for(let U=0;U<ce.length;U++)y=ce[U],Object.prototype.hasOwnProperty.call(T,y)&&(u[y]=T[y])}}function ke(u){this.src=u,this.g={},this.h=0}ke.prototype.add=function(u,m,y,T,L){const U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);const $=je(u,m,T,L);return $>-1?(m=u[$],y||(m.fa=!1)):(m=new me(m,this.src,U,!!T,L),m.fa=y,u.push(m)),m};function ln(u,m){const y=m.type;if(y in u.g){var T=u.g[y],L=Array.prototype.indexOf.call(T,m,void 0),U;(U=L>=0)&&Array.prototype.splice.call(T,L,1),U&&(H(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function je(u,m,y,T){for(let L=0;L<u.length;++L){const U=u[L];if(!U.da&&U.listener==m&&U.capture==!!y&&U.ha==T)return L}return-1}var an="closure_lm_"+(Math.random()*1e6|0),$t={};function As(u,m,y,T,L){if(Array.isArray(m)){for(let U=0;U<m.length;U++)As(u,m[U],y,T,L);return null}return y=Ps(y),u&&u[ue]?u.J(m,y,l(T)?!!T.capture:!1,L):ie(u,m,y,!1,T,L)}function ie(u,m,y,T,L,U){if(!m)throw Error("Invalid event type");const $=l(L)?!!L.capture:!!L;let se=Yi(u);if(se||(u[an]=se=new ke(u)),y=se.add(m,y,T,$,U),y.proxy)return y;if(T=Jr(),y.proxy=T,T.src=u,T.listener=y,u.addEventListener)M||(L=$),L===void 0&&(L=!1),u.addEventListener(m.toString(),T,L);else if(u.attachEvent)u.attachEvent(xs(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Jr(){function u(y){return m.call(u.src,u.listener,y)}const m=$a;return u}function Rs(u,m,y,T,L){if(Array.isArray(m))for(var U=0;U<m.length;U++)Rs(u,m[U],y,T,L);else T=l(T)?!!T.capture:!!T,y=Ps(y),u&&u[ue]?(u=u.i,U=String(m).toString(),U in u.g&&(m=u.g[U],y=je(m,y,T,L),y>-1&&(H(m[y]),Array.prototype.splice.call(m,y,1),m.length==0&&(delete u.g[U],u.h--)))):u&&(u=Yi(u))&&(m=u.g[m.toString()],u=-1,m&&(u=je(m,y,T,L)),(y=u>-1?m[u]:null)&&hr(y))}function hr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[ue])ln(m.i,u);else{var y=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(y,T,u.capture):m.detachEvent?m.detachEvent(xs(y),T):m.addListener&&m.removeListener&&m.removeListener(T),(y=Yi(m))?(ln(y,u),y.h==0&&(y.src=null,m[an]=null)):H(u)}}}function xs(u){return u in $t?$t[u]:$t[u]="on"+u}function $a(u,m){if(u.da)u=!0;else{m=new Z(m,this);const y=u.listener,T=u.ha||u.src;u.fa&&hr(u),u=y.call(T,m)}return u}function Yi(u){return u=u[an],u instanceof ke?u:null}var Qi="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ps(u){return typeof u=="function"?u:(u[Qi]||(u[Qi]=function(m){return u.handleEvent(m)}),u[Qi])}function We(){R.call(this),this.i=new ke(this),this.M=this,this.G=null}p(We,R),We.prototype[ue]=!0,We.prototype.removeEventListener=function(u,m,y,T){Rs(this,u,m,y,T)};function Ze(u,m){var y,T=u.G;if(T)for(y=[];T;T=T.G)y.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new k(m,u);else if(m instanceof k)m.target=m.target||u;else{var L=m;m=new k(T,u),ge(m,L)}L=!0;let U,$;if(y)for($=y.length-1;$>=0;$--)U=m.g=y[$],L=Kr(U,T,!0,m)&&L;if(U=m.g=u,L=Kr(U,T,!0,m)&&L,L=Kr(U,T,!1,m)&&L,y)for($=0;$<y.length;$++)U=m.g=y[$],L=Kr(U,T,!1,m)&&L}We.prototype.N=function(){if(We.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const y=u.g[m];for(let T=0;T<y.length;T++)H(y[T]);delete u.g[m],u.h--}}this.G=null},We.prototype.J=function(u,m,y,T){return this.i.add(String(u),m,!1,y,T)},We.prototype.K=function(u,m,y,T){return this.i.add(String(u),m,!0,y,T)};function Kr(u,m,y,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let L=!0;for(let U=0;U<m.length;++U){const $=m[U];if($&&!$.da&&$.capture==y){const se=$.listener,He=$.ha||$.src;$.fa&&ln(u.i,$),L=se.call(He,T)!==!1&&L}}return L&&!T.defaultPrevented}function za(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:s.setTimeout(u,m||0)}function Xi(u){u.g=za(()=>{u.g=null,u.i&&(u.i=!1,Xi(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Wa extends R{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Xi(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pr(u){R.call(this),this.h=u,this.g={}}p(pr,R);var ks=[];function Ns(u){K(u.g,function(m,y){this.g.hasOwnProperty(y)&&hr(m)},u),u.g={}}pr.prototype.N=function(){pr.Z.N.call(this),Ns(this)},pr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ji=s.JSON.stringify,W=s.JSON.parse,j=class{stringify(u){return s.JSON.stringify(u,void 0)}parse(u){return s.JSON.parse(u,void 0)}};function ee(){}function ve(){}var at={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function zt(){k.call(this,"d")}p(zt,k);function Wt(){k.call(this,"c")}p(Wt,k);var qe={},mr=null;function Yr(){return mr=mr||new We}qe.Ia="serverreachability";function Tt(u){k.call(this,qe.Ia,u)}p(Tt,k);function gr(u){const m=Yr();Ze(m,new Tt(m))}qe.STAT_EVENT="statevent";function Ms(u,m){k.call(this,qe.STAT_EVENT,u),this.stat=m}p(Ms,k);function et(u){const m=Yr();Ze(m,new Ms(m,u))}qe.Ja="timingevent";function Ds(u,m){k.call(this,qe.Ja,u),this.size=m}p(Ds,k);function _r(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){u()},m)}function Zi(){this.g=!0}Zi.prototype.ua=function(){this.g=!1};function jE(u,m,y,T,L,U){u.info(function(){if(u.g)if(U){var $="",se=U.split("&");for(let Ee=0;Ee<se.length;Ee++){var He=se[Ee].split("=");if(He.length>1){const Je=He[0];He=He[1];const cn=Je.split("_");$=cn.length>=2&&cn[1]=="type"?$+(Je+"="+He+"&"):$+(Je+"=redacted&")}}}else $=null;else $=U;return"XMLHTTP REQ ("+T+") [attempt "+L+"]: "+m+`
`+y+`
`+$})}function ZE(u,m,y,T,L,U,$){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+L+"]: "+m+`
`+y+`
`+U+" "+$})}function Qr(u,m,y,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+tT(u,y)+(T?" "+T:"")})}function eT(u,m){u.info(function(){return"TIMEOUT: "+m})}Zi.prototype.info=function(){};function tT(u,m){if(!u.g)return m;if(!m)return null;try{const U=JSON.parse(m);if(U){for(u=0;u<U.length;u++)if(Array.isArray(U[u])){var y=U[u];if(!(y.length<2)){var T=y[1];if(Array.isArray(T)&&!(T.length<1)){var L=T[0];if(L!="noop"&&L!="stop"&&L!="close")for(let $=1;$<T.length;$++)T[$]=""}}}}return ji(U)}catch{return m}}var Vs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Bf={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Of;function Ja(){}p(Ja,ee),Ja.prototype.g=function(){return new XMLHttpRequest},Of=new Ja;function eo(u){return encodeURIComponent(String(u))}function nT(u){var m=1;u=u.split(":");const y=[];for(;m>0&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function Vn(u,m,y,T){this.j=u,this.i=m,this.l=y,this.S=T||1,this.V=new pr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Gf}function Gf(){this.i=null,this.g="",this.h=!1}var qf={},Ka={};function Ya(u,m,y){u.M=1,u.A=Us(un(m)),u.u=y,u.R=!0,Hf(u,null)}function Hf(u,m){u.F=Date.now(),Ls(u),u.B=un(u.A);var y=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),nh(y.i,"t",T),u.C=0,y=u.j.L,u.h=new Gf,u.g=Eh(u.j,y?m:null,!u.u),u.P>0&&(u.O=new Wa(f(u.Y,u,u.g),u.P)),m=u.V,y=u.g,T=u.ba;var L="readystatechange";Array.isArray(L)||(L&&(ks[0]=L.toString()),L=ks);for(let U=0;U<L.length;U++){const $=As(y,L[U],T||m.handleEvent,!1,m.h||m);if(!$)break;m.g[$.key]=$}m=u.J?X(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),gr(),jE(u.i,u.v,u.B,u.l,u.S,u.u)}Vn.prototype.ba=function(u){u=u.target;const m=this.O;m&&Fn(u)==3?m.j():this.Y(u)},Vn.prototype.Y=function(u){try{if(u==this.g)e:{const se=Fn(this.g),He=this.g.ya(),Ee=this.g.ca();if(!(se<3)&&(se!=3||this.g&&(this.h.h||this.g.la()||uh(this.g)))){this.K||se!=4||He==7||(He==8||Ee<=0?gr(3):gr(2)),Qa(this);var m=this.g.ca();this.X=m;var y=rT(this);if(this.o=m==200,ZE(this.i,this.v,this.B,this.l,this.S,se,m),this.o){if(this.U&&!this.L){t:{if(this.g){var T,L=this.g;if((T=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(T)){var U=T;break t}}U=null}if(u=U)Qr(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Xa(this,u);else{this.o=!1,this.m=3,et(12),yr(this),to(this);break e}}if(this.R){u=!0;let Je;for(;!this.K&&this.C<y.length;)if(Je=iT(this,y),Je==Ka){se==4&&(this.m=4,et(14),u=!1),Qr(this.i,this.l,null,"[Incomplete Response]");break}else if(Je==qf){this.m=4,et(15),Qr(this.i,this.l,y,"[Invalid Chunk]"),u=!1;break}else Qr(this.i,this.l,Je,null),Xa(this,Je);if($f(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),se!=4||y.length!=0||this.h.h||(this.m=1,et(16),u=!1),this.o=this.o&&u,!u)Qr(this.i,this.l,y,"[Invalid Chunked Response]"),yr(this),to(this);else if(y.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),ou($),$.P=!0,et(11))}}else Qr(this.i,this.l,y,null),Xa(this,y);se==4&&yr(this),this.o&&!this.K&&(se==4?gh(this.j,this):(this.o=!1,Ls(this)))}else yT(this.g),m==400&&y.indexOf("Unknown SID")>0?(this.m=3,et(12)):(this.m=0,et(13)),yr(this),to(this)}}}catch{}finally{}};function rT(u){if(!$f(u))return u.g.la();const m=uh(u.g);if(m==="")return"";let y="";const T=m.length,L=Fn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return yr(u),to(u),"";u.h.i=new s.TextDecoder}for(let U=0;U<T;U++)u.h.h=!0,y+=u.h.i.decode(m[U],{stream:!(L&&U==T-1)});return m.length=0,u.h.g+=y,u.C=0,u.h.g}function $f(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function iT(u,m){var y=u.C,T=m.indexOf(`
`,y);return T==-1?Ka:(y=Number(m.substring(y,T)),isNaN(y)?qf:(T+=1,T+y>m.length?Ka:(m=m.slice(T,T+y),u.C=T+y,m)))}Vn.prototype.cancel=function(){this.K=!0,yr(this)};function Ls(u){u.T=Date.now()+u.H,zf(u,u.H)}function zf(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=_r(f(u.aa,u),m)}function Qa(u){u.D&&(s.clearTimeout(u.D),u.D=null)}Vn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(eT(this.i,this.B),this.M!=2&&(gr(),et(17)),yr(this),this.m=2,to(this)):zf(this,this.T-u)};function to(u){u.j.I==0||u.K||gh(u.j,u)}function yr(u){Qa(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Ns(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Xa(u,m){try{var y=u.j;if(y.I!=0&&(y.g==u||ja(y.h,u))){if(!u.L&&ja(y.h,u)&&y.I==3){try{var T=y.Ba.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var L=T;if(L[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<u.F)Gs(y),Bs(y);else break e;iu(y),et(18)}}else y.xa=L[1],0<y.xa-y.K&&L[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=_r(f(y.Va,y),6e3));Kf(y.h)<=1&&y.ta&&(y.ta=void 0)}else Er(y,11)}else if((u.L||y.g==u)&&Gs(y),!P(m))for(L=y.Ba.g.parse(m),m=0;m<L.length;m++){let Ee=L[m];const Je=Ee[0];if(!(Je<=y.K))if(y.K=Je,Ee=Ee[1],y.I==2)if(Ee[0]=="c"){y.M=Ee[1],y.ba=Ee[2];const cn=Ee[3];cn!=null&&(y.ka=cn,y.j.info("VER="+y.ka));const Tr=Ee[4];Tr!=null&&(y.za=Tr,y.j.info("SVER="+y.za));const bn=Ee[5];bn!=null&&typeof bn=="number"&&bn>0&&(T=1.5*bn,y.O=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const Bn=u.g;if(Bn){const Hs=Bn.g?Bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hs){var U=T.h;U.g||Hs.indexOf("spdy")==-1&&Hs.indexOf("quic")==-1&&Hs.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Za(U,U.h),U.h=null))}if(T.G){const su=Bn.g?Bn.g.getResponseHeader("X-HTTP-Session-Id"):null;su&&(T.wa=su,Ce(T.J,T.G,su))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-u.F,y.j.info("Handshake RTT: "+y.T+"ms")),T=y;var $=u;if(T.na=vh(T,T.L?T.ba:null,T.W),$.L){Yf(T.h,$);var se=$,He=T.O;He&&(se.H=He),se.D&&(Qa(se),Ls(se)),T.g=$}else ph(T);y.i.length>0&&Os(y)}else Ee[0]!="stop"&&Ee[0]!="close"||Er(y,7);else y.I==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?Er(y,7):ru(y):Ee[0]!="noop"&&y.l&&y.l.qa(Ee),y.A=0)}}gr(4)}catch{}}var oT=class{constructor(u,m){this.g=u,this.map=m}};function Wf(u){this.l=u||10,s.PerformanceNavigationTiming?(u=s.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Jf(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Kf(u){return u.h?1:u.g?u.g.size:0}function ja(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Za(u,m){u.g?u.g.add(m):u.h=m}function Yf(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Wf.prototype.cancel=function(){if(this.i=Qf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Qf(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.G);return m}return E(u.i)}var Xf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sT(u,m){if(u){u=u.split("&");for(let y=0;y<u.length;y++){const T=u[y].indexOf("=");let L,U=null;T>=0?(L=u[y].substring(0,T),U=u[y].substring(T+1)):L=u[y],m(L,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Ln(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Ln?(this.l=u.l,no(this,u.j),this.o=u.o,this.g=u.g,ro(this,u.u),this.h=u.h,eu(this,rh(u.i)),this.m=u.m):u&&(m=String(u).match(Xf))?(this.l=!1,no(this,m[1]||"",!0),this.o=io(m[2]||""),this.g=io(m[3]||"",!0),ro(this,m[4]),this.h=io(m[5]||"",!0),eu(this,m[6]||"",!0),this.m=io(m[7]||"")):(this.l=!1,this.i=new so(null,this.l))}Ln.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(oo(m,jf,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(oo(m,jf,!0),"@"),u.push(eo(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&u.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(oo(y,y.charAt(0)=="/"?uT:aT,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",oo(y,dT)),u.join("")},Ln.prototype.resolve=function(u){const m=un(this);let y=!!u.j;y?no(m,u.j):y=!!u.o,y?m.o=u.o:y=!!u.g,y?m.g=u.g:y=u.u!=null;var T=u.h;if(y)ro(m,u.u);else if(y=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var L=m.h.lastIndexOf("/");L!=-1&&(T=m.h.slice(0,L+1)+T)}if(L=T,L==".."||L==".")T="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){T=L.lastIndexOf("/",0)==0,L=L.split("/");const U=[];for(let $=0;$<L.length;){const se=L[$++];se=="."?T&&$==L.length&&U.push(""):se==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),T&&$==L.length&&U.push("")):(U.push(se),T=!0)}T=U.join("/")}else T=L}return y?m.h=T:y=u.i.toString()!=="",y?eu(m,rh(u.i)):y=!!u.m,y&&(m.m=u.m),m};function un(u){return new Ln(u)}function no(u,m,y){u.j=y?io(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function ro(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function eu(u,m,y){m instanceof so?(u.i=m,fT(u.i,u.l)):(y||(m=oo(m,cT)),u.i=new so(m,u.l))}function Ce(u,m,y){u.i.set(m,y)}function Us(u){return Ce(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function io(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function oo(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,lT),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function lT(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var jf=/[#\/\?@]/g,aT=/[#\?:]/g,uT=/[#\?]/g,cT=/[#\?@]/g,dT=/#/g;function so(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function vr(u){u.g||(u.g=new Map,u.h=0,u.i&&sT(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}t=so.prototype,t.add=function(u,m){vr(this),this.i=null,u=Xr(this,u);let y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function Zf(u,m){vr(u),m=Xr(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function eh(u,m){return vr(u),m=Xr(u,m),u.g.has(m)}t.forEach=function(u,m){vr(this),this.g.forEach(function(y,T){y.forEach(function(L){u.call(m,L,T,this)},this)},this)};function th(u,m){vr(u);let y=[];if(typeof m=="string")eh(u,m)&&(y=y.concat(u.g.get(Xr(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)y=y.concat(u[m]);return y}t.set=function(u,m){return vr(this),this.i=null,u=Xr(this,u),eh(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=th(this,u),u.length>0?String(u[0]):m):m};function nh(u,m,y){Zf(u,m),y.length>0&&(u.i=null,u.g.set(Xr(u,m),E(y)),u.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let T=0;T<m.length;T++){var y=m[T];const L=eo(y);y=th(this,y);for(let U=0;U<y.length;U++){let $=L;y[U]!==""&&($+="="+eo(y[U])),u.push($)}}return this.i=u.join("&")};function rh(u){const m=new so;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Xr(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function fT(u,m){m&&!u.j&&(vr(u),u.i=null,u.g.forEach(function(y,T){const L=T.toLowerCase();T!=L&&(Zf(this,T),nh(this,L,y))},u)),u.j=m}function hT(u,m){const y=new Zi;if(s.Image){const T=new Image;T.onload=h(Un,y,"TestLoadImage: loaded",!0,m,T),T.onerror=h(Un,y,"TestLoadImage: error",!1,m,T),T.onabort=h(Un,y,"TestLoadImage: abort",!1,m,T),T.ontimeout=h(Un,y,"TestLoadImage: timeout",!1,m,T),s.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function pT(u,m){const y=new Zi,T=new AbortController,L=setTimeout(()=>{T.abort(),Un(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(U=>{clearTimeout(L),U.ok?Un(y,"TestPingServer: ok",!0,m):Un(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),Un(y,"TestPingServer: error",!1,m)})}function Un(u,m,y,T,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),T(y)}catch{}}function mT(){this.g=new j}function tu(u){this.i=u.Sb||null,this.h=u.ab||!1}p(tu,ee),tu.prototype.g=function(){return new Fs(this.i,this.h)};function Fs(u,m){We.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Fs,We),t=Fs.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,ao(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||s).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,lo(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ao(this)),this.g&&(this.readyState=3,ao(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ih(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ih(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?lo(this):ao(this),this.readyState==3&&ih(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,lo(this))},t.Na=function(u){this.g&&(this.response=u,lo(this))},t.ga=function(){this.g&&lo(this)};function lo(u){u.readyState=4,u.l=null,u.j=null,u.B=null,ao(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function ao(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function oh(u){let m="";return K(u,function(y,T){m+=T,m+=":",m+=y,m+=`\r
`}),m}function nu(u,m,y){e:{for(T in y){var T=!1;break e}T=!0}T||(y=oh(y),typeof u=="string"?y!=null&&eo(y):Ce(u,m,y))}function Le(u){We.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Le,We);var gT=/^https?$/i,_T=["POST","PUT"];t=Le.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Of.g(),this.g.onreadystatechange=g(f(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(U){sh(this,U);return}if(u=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var L in T)y.set(L,T[L]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const U of T.keys())y.set(U,T.get(U));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find(U=>U.toLowerCase()=="content-type"),L=s.FormData&&u instanceof s.FormData,!(Array.prototype.indexOf.call(_T,m,void 0)>=0)||T||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,$]of y)this.g.setRequestHeader(U,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(U){sh(this,U)}};function sh(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,lh(u),bs(u)}function lh(u){u.A||(u.A=!0,Ze(u,"complete"),Ze(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ze(this,"complete"),Ze(this,"abort"),bs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bs(this,!0)),Le.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ah(this):this.Xa())},t.Xa=function(){ah(this)};function ah(u){if(u.h&&typeof o<"u"){if(u.v&&Fn(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ze(u,"readystatechange"),Fn(u)==4){u.h=!1;try{const U=u.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var T;if(T=U===0){let $=String(u.D).match(Xf)[1]||null;!$&&s.self&&s.self.location&&($=s.self.location.protocol.slice(0,-1)),T=!gT.test($?$.toLowerCase():"")}y=T}if(y)Ze(u,"complete"),Ze(u,"success");else{u.o=6;try{var L=Fn(u)>2?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.ca()+"]",lh(u)}}finally{bs(u)}}}}function bs(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const y=u.g;u.g=null,m||Ze(u,"ready");try{y.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Fn(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Fn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),W(m)}};function uh(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function yT(u){const m={};u=(u.g&&Fn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(P(u[T]))continue;var y=nT(u[T]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const U=m[L]||[];m[L]=U,U.push(y)}ne(m,function(T){return T.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function uo(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function ch(u){this.za=0,this.i=[],this.j=new Zi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=uo("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=uo("baseRetryDelayMs",5e3,u),this.Za=uo("retryDelaySeedMs",1e4,u),this.Ta=uo("forwardChannelMaxRetries",2,u),this.va=uo("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Wf(u&&u.concurrentRequestLimit),this.Ba=new mT,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ch.prototype,t.ka=8,t.I=1,t.connect=function(u,m,y,T){et(0),this.W=u,this.H=m||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.J=vh(this,null,this.W),Os(this)};function ru(u){if(dh(u),u.I==3){var m=u.V++,y=un(u.J);if(Ce(y,"SID",u.M),Ce(y,"RID",m),Ce(y,"TYPE","terminate"),co(u,y),m=new Vn(u,u.j,m),m.M=2,m.A=Us(un(y)),y=!1,s.navigator&&s.navigator.sendBeacon)try{y=s.navigator.sendBeacon(m.A.toString(),"")}catch{}!y&&s.Image&&(new Image().src=m.A,y=!0),y||(m.g=Eh(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Ls(m)}yh(u)}function Bs(u){u.g&&(ou(u),u.g.cancel(),u.g=null)}function dh(u){Bs(u),u.v&&(s.clearTimeout(u.v),u.v=null),Gs(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&s.clearTimeout(u.m),u.m=null)}function Os(u){if(!Jf(u.h)&&!u.m){u.m=!0;var m=u.Ea;b||v(),F||(b(),F=!0),w.add(m,u),u.D=0}}function vT(u,m){return Kf(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=_r(f(u.Ea,u,m),_h(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const L=new Vn(this,this.j,u);let U=this.o;if(this.U&&(U?(U=X(U),ge(U,this.U)):U=this.U),this.u!==null||this.R||(L.J=U,U=null),this.S)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,m>4096){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=hh(this,L,m),y=un(this.J),Ce(y,"RID",u),Ce(y,"CVER",22),this.G&&Ce(y,"X-HTTP-Session-Id",this.G),co(this,y),U&&(this.R?m="headers="+eo(oh(U))+"&"+m:this.u&&nu(y,this.u,U)),Za(this.h,L),this.Ra&&Ce(y,"TYPE","init"),this.S?(Ce(y,"$req",m),Ce(y,"SID","null"),L.U=!0,Ya(L,y,null)):Ya(L,y,m),this.I=2}}else this.I==3&&(u?fh(this,u):this.i.length==0||Jf(this.h)||fh(this))};function fh(u,m){var y;m?y=m.l:y=u.V++;const T=un(u.J);Ce(T,"SID",u.M),Ce(T,"RID",y),Ce(T,"AID",u.K),co(u,T),u.u&&u.o&&nu(T,u.u,u.o),y=new Vn(u,u.j,y,u.D+1),u.u===null&&(y.J=u.o),m&&(u.i=m.G.concat(u.i)),m=hh(u,y,1e3),y.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Za(u.h,y),Ya(y,T,m)}function co(u,m){u.H&&K(u.H,function(y,T){Ce(m,T,y)}),u.l&&K({},function(y,T){Ce(m,T,y)})}function hh(u,m,y){y=Math.min(u.i.length,y);const T=u.l?f(u.l.Ka,u.l,u):null;e:{var L=u.i;let se=-1;for(;;){const He=["count="+y];se==-1?y>0?(se=L[0].g,He.push("ofs="+se)):se=0:He.push("ofs="+se);let Ee=!0;for(let Je=0;Je<y;Je++){var U=L[Je].g;const cn=L[Je].map;if(U-=se,U<0)se=Math.max(0,L[Je].g-100),Ee=!1;else try{U="req"+U+"_"||"";try{var $=cn instanceof Map?cn:Object.entries(cn);for(const[Tr,bn]of $){let Bn=bn;l(bn)&&(Bn=ji(bn)),He.push(U+Tr+"="+encodeURIComponent(Bn))}}catch(Tr){throw He.push(U+"type="+encodeURIComponent("_badmap")),Tr}}catch{T&&T(cn)}}if(Ee){$=He.join("&");break e}}$=void 0}return u=u.i.splice(0,y),m.G=u,$}function ph(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;b||v(),F||(b(),F=!0),w.add(m,u),u.A=0}}function iu(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=_r(f(u.Da,u),_h(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,mh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=_r(f(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,et(10),Bs(this),mh(this))};function ou(u){u.B!=null&&(s.clearTimeout(u.B),u.B=null)}function mh(u){u.g=new Vn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=un(u.na);Ce(m,"RID","rpc"),Ce(m,"SID",u.M),Ce(m,"AID",u.K),Ce(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ce(m,"TO",u.ia),Ce(m,"TYPE","xmlhttp"),co(u,m),u.u&&u.o&&nu(m,u.u,u.o),u.O&&(u.g.H=u.O);var y=u.g;u=u.ba,y.M=1,y.A=Us(un(m)),y.u=null,y.R=!0,Hf(y,u)}t.Va=function(){this.C!=null&&(this.C=null,Bs(this),iu(this),et(19))};function Gs(u){u.C!=null&&(s.clearTimeout(u.C),u.C=null)}function gh(u,m){var y=null;if(u.g==m){Gs(u),ou(u),u.g=null;var T=2}else if(ja(u.h,m))y=m.G,Yf(u.h,m),T=1;else return;if(u.I!=0){if(m.o)if(T==1){y=m.u?m.u.length:0,m=Date.now()-m.F;var L=u.D;T=Yr(),Ze(T,new Ds(T,y)),Os(u)}else ph(u);else if(L=m.m,L==3||L==0&&m.X>0||!(T==1&&vT(u,m)||T==2&&iu(u)))switch(y&&y.length>0&&(m=u.h,m.i=m.i.concat(y)),L){case 1:Er(u,5);break;case 4:Er(u,10);break;case 3:Er(u,6);break;default:Er(u,2)}}}function _h(u,m){let y=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(y*=2),y*m}function Er(u,m){if(u.j.info("Error code "+m),m==2){var y=f(u.bb,u),T=u.Ua;const L=!T;T=new Ln(T||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||no(T,"https"),Us(T),L?hT(T.toString(),y):pT(T.toString(),y)}else et(2);u.I=0,u.l&&u.l.pa(m),yh(u),dh(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function yh(u){if(u.I=0,u.ja=[],u.l){const m=Qf(u.h);(m.length!=0||u.i.length!=0)&&(I(u.ja,m),I(u.ja,u.i),u.h.i.length=0,E(u.i),u.i.length=0),u.l.oa()}}function vh(u,m,y){var T=y instanceof Ln?un(y):new Ln(y);if(T.g!="")m&&(T.g=m+"."+T.g),ro(T,T.u);else{var L=s.location;T=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;const U=new Ln(null);T&&no(U,T),m&&(U.g=m),L&&ro(U,L),y&&(U.h=y),T=U}return y=u.G,m=u.wa,y&&m&&Ce(T,y,m),Ce(T,"VER",u.ka),co(u,T),T}function Eh(u,m,y){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Le(new tu({ab:y})):new Le(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Th(){}t=Th.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function qs(){}qs.prototype.g=function(u,m){return new kt(u,m)};function kt(u,m){We.call(this),this.g=new ch(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!P(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!P(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new jr(this)}p(kt,We),kt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},kt.prototype.close=function(){ru(this.g)},kt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.v&&(y={},y.__data__=ji(u),u=y);m.i.push(new oT(m.Ya++,u)),m.I==3&&Os(m)},kt.prototype.N=function(){this.g.l=null,delete this.j,ru(this.g),delete this.g,kt.Z.N.call(this)};function Sh(u){zt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const y in m){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}p(Sh,zt);function Ch(){Wt.call(this),this.status=1}p(Ch,Wt);function jr(u){this.g=u}p(jr,Th),jr.prototype.ra=function(){Ze(this.g,"a")},jr.prototype.qa=function(u){Ze(this.g,new Sh(u))},jr.prototype.pa=function(u){Ze(this.g,new Ch)},jr.prototype.oa=function(){Ze(this.g,"b")},qs.prototype.createWebChannel=qs.prototype.g,kt.prototype.send=kt.prototype.o,kt.prototype.open=kt.prototype.m,kt.prototype.close=kt.prototype.close,Qv=function(){return new qs},Yv=function(){return Yr()},Kv=qe,Yc={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Vs.NO_ERROR=0,Vs.TIMEOUT=8,Vs.HTTP_ERROR=6,Rl=Vs,Bf.COMPLETE="complete",Jv=Bf,ve.EventType=at,at.OPEN="a",at.CLOSE="b",at.ERROR="c",at.MESSAGE="d",We.prototype.listen=We.prototype.J,Ao=ve,Le.prototype.listenOnce=Le.prototype.K,Le.prototype.getLastError=Le.prototype.Ha,Le.prototype.getLastErrorCode=Le.prototype.ya,Le.prototype.getStatus=Le.prototype.ca,Le.prototype.getResponseJson=Le.prototype.La,Le.prototype.getResponseText=Le.prototype.la,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Fa,Wv=Le}).apply(typeof ll<"u"?ll:typeof self<"u"?self:typeof window<"u"?window:{});const lg="@firebase/firestore",ag="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}St.UNAUTHENTICATED=new St(null),St.GOOGLE_CREDENTIALS=new St("google-credentials-uid"),St.FIRST_PARTY=new St("first-party-uid"),St.MOCK_USER=new St("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ji="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br=new Gv("@firebase/firestore");function ei(){return br.logLevel}function Q(t,...e){if(br.logLevel<=fe.DEBUG){const n=e.map(pf);br.debug(`Firestore (${Ji}): ${t}`,...n)}}function Br(t,...e){if(br.logLevel<=fe.ERROR){const n=e.map(pf);br.error(`Firestore (${Ji}): ${t}`,...n)}}function hf(t,...e){if(br.logLevel<=fe.WARN){const n=e.map(pf);br.warn(`Firestore (${Ji}): ${t}`,...n)}}function pf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Xv(t,r,n)}function Xv(t,e,n){let r=`FIRESTORE (${Ji}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Br(r),new Error(r)}function Fe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Xv(e,i,r)}function Se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends Wi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(St.UNAUTHENTICATED))}shutdown(){}}class ak{constructor(e){this.t=e,this.currentUser=St.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fe(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let o=new kr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new kr,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new kr)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Fe(typeof r.accessToken=="string",31837,{l:r}),new sk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string",2055,{h:e}),new St(e)}}class uk{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=St.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ck{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new uk(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(St.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ug{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dk{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zP(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Fe(this.o===void 0,3512);const r=o=>{o.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,Q("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ug(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ug(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=fk(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function _e(t,e){return t<e?-1:t>e?1:0}function Qc(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return bu(i)===bu(o)?_e(i,o):bu(i)?1:-1}return _e(t.length,e.length)}const hk=55296,pk=57343;function bu(t){const e=t.charCodeAt(0);return e>=hk&&e<=pk}function Li(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="__name__";class hn{constructor(e,n,r){n===void 0?n=0:n>e.length&&le(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&le(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return hn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof hn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=hn.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return _e(e.length,n.length)}static compareSegments(e,n){const r=hn.isNumericId(e),i=hn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?hn.extractNumericId(e).compare(hn.extractNumericId(n)):Qc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ff.fromString(e.substring(4,e.length-2))}}class Me extends hn{construct(e,n,r){return new Me(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new te(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Me(n)}static emptyPath(){return new Me([])}}const mk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class it extends hn{construct(e,n,r){return new it(e,n,r)}static isValidIdentifier(e){return mk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),it.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cg}static keyField(){return new it([cg])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new te(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new te(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new te(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(s=!s,i++):l!=="."||s?(r+=l,i++):(o(),i++)}if(o(),s)throw new te(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new it(n)}static emptyPath(){return new it([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(Me.fromString(e))}static fromName(e){return new oe(Me.fromString(e).popFirst(5))}static empty(){return new oe(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new Me(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(t,e,n){if(!n)throw new te(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gk(t,e,n,r){if(e===!0&&r===!0)throw new te(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dg(t){if(!oe.isDocumentKey(t))throw new te(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fg(t){if(oe.isDocumentKey(t))throw new te(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Zv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function gf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le(12329,{type:typeof t})}function _k(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gf(t);throw new te(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t,e){const n={typeString:t};return e&&(n.value=e),n}function ys(t,e){if(!Zv(t))throw new te(G.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new te(G.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg=-62135596800,pg=1e6;class Pe{static now(){return Pe.fromMillis(Date.now())}static fromDate(e){return Pe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*pg);return new Pe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<hg)throw new te(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pg}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ys(e,Pe._jsonSchema))return new Pe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-hg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pe._jsonSchemaVersion="firestore/timestamp/1.0",Pe._jsonSchema={type:Ge("string",Pe._jsonSchemaVersion),seconds:Ge("number"),nanoseconds:Ge("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new Pe(0,0))}static max(){return new Re(new Pe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls=-1;function yk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Re.fromTimestamp(r===1e9?new Pe(n+1,0):new Pe(n,r));return new or(i,oe.empty(),e)}function vk(t){return new or(t.readTime,t.key,ls)}class or{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new or(Re.min(),oe.empty(),ls)}static max(){return new or(Re.max(),oe.empty(),ls)}}function Ek(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Sk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _f(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==Tk)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,o=0,s=!1;e.forEach(l=>{++i,l.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const o=e.length,s=new Array(o);let l=0;for(let c=0;c<o;c++){const f=c;n(e[f]).next(h=>{s[f]=h,++l,l===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new B((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function Ck(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function vs(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}yf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf=-1;function Ef(t){return t==null}function la(t){return t===0&&1/t==-1/0}function wk(t){return typeof t=="number"&&Number.isInteger(t)&&!la(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="";function Ik(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=mg(e)),e=Ak(t.get(n),e);return mg(e)}function Ak(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case eE:n+="";break;default:n+=o}}return n}function mg(t){return t+eE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ki(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n){this.comparator=e,this.root=n||nt.EMPTY}insert(e,n){return new Pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nt.BLACK,null,null))}remove(e){return new Pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new al(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new al(this.root,e,this.comparator,!1)}getReverseIterator(){return new al(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new al(this.root,e,this.comparator,!0)}}class al{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nt{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??nt.RED,this.left=i??nt.EMPTY,this.right=o??nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new nt(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return nt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw le(27949);return e+(this.isRed()?0:1)}}nt.EMPTY=null,nt.RED=!0,nt.BLACK=!1;nt.EMPTY=new class{constructor(){this.size=0}get key(){throw le(57766)}get value(){throw le(16141)}get color(){throw le(16727)}get left(){throw le(29726)}get right(){throw le(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.comparator=e,this.data=new Pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _g(this.data.getIterator())}getIteratorFrom(e){return new _g(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof st)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new st(this.comparator);return n.data=e,n}}class _g{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.fields=e,e.sort(it.comparator)}static empty(){return new tn([])}unionWith(e){let n=new st(it.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new tn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Li(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Rk("Invalid base64 string: "+o):o}}(e);return new _n(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new _n(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_n.EMPTY_BYTE_STRING=new _n("");const xk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(t){if(Fe(!!t,39018),typeof t=="string"){let e=0;const n=xk.exec(t);if(Fe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rt(t.seconds),nanos:rt(t.nanos)}}function rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ui(t){return typeof t=="string"?_n.fromBase64String(t):_n.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="server_timestamp",rE="__type__",iE="__previous_value__",oE="__local_write_time__";function Tf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[rE])==null?void 0:r.stringValue)===nE}function Sf(t){const e=t.mapValue.fields[iE];return Tf(e)?Sf(e):e}function aa(t){const e=Or(t.mapValue.fields[oE].timestampValue);return new Pe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,n,r,i,o,s,l,c,f,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=h}}const Xc="(default)";class ua{constructor(e,n){this.projectId=e,this.database=n||Xc}static empty(){return new ua("","")}get isDefaultDatabase(){return this.database===Xc}isEqual(e){return e instanceof ua&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="__type__",kk="__max__",ul={mapValue:{}},lE="__vector__",jc="value";function Gr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Tf(t)?4:Mk(t)?9007199254740991:Nk(t)?10:11:le(28295,{value:t})}function yn(t,e){if(t===e)return!0;const n=Gr(t);if(n!==Gr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return aa(t).isEqual(aa(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Or(i.timestampValue),l=Or(o.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Ui(i.bytesValue).isEqual(Ui(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return rt(i.geoPointValue.latitude)===rt(o.geoPointValue.latitude)&&rt(i.geoPointValue.longitude)===rt(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return rt(i.integerValue)===rt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=rt(i.doubleValue),l=rt(o.doubleValue);return s===l?la(s)===la(l):isNaN(s)&&isNaN(l)}return!1}(t,e);case 9:return Li(t.arrayValue.values||[],e.arrayValue.values||[],yn);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},l=o.mapValue.fields||{};if(gg(s)!==gg(l))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(l[c]===void 0||!yn(s[c],l[c])))return!1;return!0}(t,e);default:return le(52216,{left:t})}}function as(t,e){return(t.values||[]).find(n=>yn(n,e))!==void 0}function Fi(t,e){if(t===e)return 0;const n=Gr(t),r=Gr(e);if(n!==r)return _e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return function(o,s){const l=rt(o.integerValue||o.doubleValue),c=rt(s.integerValue||s.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return yg(t.timestampValue,e.timestampValue);case 4:return yg(aa(t),aa(e));case 5:return Qc(t.stringValue,e.stringValue);case 6:return function(o,s){const l=Ui(o),c=Ui(s);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const l=o.split("/"),c=s.split("/");for(let f=0;f<l.length&&f<c.length;f++){const h=_e(l[f],c[f]);if(h!==0)return h}return _e(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const l=_e(rt(o.latitude),rt(s.latitude));return l!==0?l:_e(rt(o.longitude),rt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return vg(t.arrayValue,e.arrayValue);case 10:return function(o,s){var g,E,I,N;const l=o.fields||{},c=s.fields||{},f=(g=l[jc])==null?void 0:g.arrayValue,h=(E=c[jc])==null?void 0:E.arrayValue,p=_e(((I=f==null?void 0:f.values)==null?void 0:I.length)||0,((N=h==null?void 0:h.values)==null?void 0:N.length)||0);return p!==0?p:vg(f,h)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===ul.mapValue&&s===ul.mapValue)return 0;if(o===ul.mapValue)return 1;if(s===ul.mapValue)return-1;const l=o.fields||{},c=Object.keys(l),f=s.fields||{},h=Object.keys(f);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){const g=Qc(c[p],h[p]);if(g!==0)return g;const E=Fi(l[c[p]],f[h[p]]);if(E!==0)return E}return _e(c.length,h.length)}(t.mapValue,e.mapValue);default:throw le(23264,{he:n})}}function yg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);const n=Or(t),r=Or(e),i=_e(n.seconds,r.seconds);return i!==0?i:_e(n.nanos,r.nanos)}function vg(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Fi(n[i],r[i]);if(o)return o}return _e(n.length,r.length)}function bi(t){return Zc(t)}function Zc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Or(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ui(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Zc(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${Zc(n.fields[s])}`;return i+"}"}(t.mapValue):le(61005,{value:t})}function xl(t){switch(Gr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sf(t);return e?16+xl(e):16;case 5:return 2*t.stringValue.length;case 6:return Ui(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+xl(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ki(r.fields,(o,s)=>{i+=o.length+xl(s)}),i}(t.mapValue);default:throw le(13486,{value:t})}}function ed(t){return!!t&&"integerValue"in t}function Cf(t){return!!t&&"arrayValue"in t}function Pl(t){return!!t&&"mapValue"in t}function Nk(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[sE])==null?void 0:r.stringValue)===lE}function Fo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ki(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Fo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fo(t.arrayValue.values[n]);return e}return{...t}}function Mk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===kk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.value=e}static empty(){return new jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Pl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fo(n)}setAll(e){let n=it.emptyPath(),r={},i=[];e.forEach((s,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}s?r[l.lastSegment()]=Fo(s):i.push(l.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Pl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return yn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Pl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ki(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new jt(Fo(this.value))}}function aE(t){const e=[];return Ki(t.fields,(n,r)=>{const i=new it([n]);if(Pl(r)){const o=aE(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new tn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n,r,i,o,s,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=l}static newInvalidDocument(e){return new Xt(e,0,Re.min(),Re.min(),Re.min(),jt.empty(),0)}static newFoundDocument(e,n,r,i){return new Xt(e,1,n,Re.min(),r,i,0)}static newNoDocument(e,n){return new Xt(e,2,n,Re.min(),Re.min(),jt.empty(),0)}static newUnknownDocument(e,n){return new Xt(e,3,n,Re.min(),Re.min(),jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n){this.position=e,this.inclusive=n}}function Eg(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=oe.comparator(oe.fromName(s.referenceValue),n.key):r=Fi(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Tg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!yn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n="asc"){this.field=e,this.dir=n}}function Dk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{}class Qe extends uE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Lk(e,n,r):n==="array-contains"?new bk(e,r):n==="in"?new Bk(e,r):n==="not-in"?new Ok(e,r):n==="array-contains-any"?new Gk(e,r):new Qe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Uk(e,r):new Fk(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Fi(n,this.value)):n!==null&&Gr(this.value)===Gr(n)&&this.matchesComparison(Fi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sr extends uE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new sr(e,n)}matches(e){return cE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function cE(t){return t.op==="and"}function dE(t){return Vk(t)&&cE(t)}function Vk(t){for(const e of t.filters)if(e instanceof sr)return!1;return!0}function td(t){if(t instanceof Qe)return t.field.canonicalString()+t.op.toString()+bi(t.value);if(dE(t))return t.filters.map(e=>td(e)).join(",");{const e=t.filters.map(n=>td(n)).join(",");return`${t.op}(${e})`}}function fE(t,e){return t instanceof Qe?function(r,i){return i instanceof Qe&&r.op===i.op&&r.field.isEqual(i.field)&&yn(r.value,i.value)}(t,e):t instanceof sr?function(r,i){return i instanceof sr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,l)=>o&&fE(s,i.filters[l]),!0):!1}(t,e):void le(19439)}function hE(t){return t instanceof Qe?function(n){return`${n.field.canonicalString()} ${n.op} ${bi(n.value)}`}(t):t instanceof sr?function(n){return n.op.toString()+" {"+n.getFilters().map(hE).join(" ,")+"}"}(t):"Filter"}class Lk extends Qe{constructor(e,n,r){super(e,n,r),this.key=oe.fromName(r.referenceValue)}matches(e){const n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class Uk extends Qe{constructor(e,n){super(e,"in",n),this.keys=pE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Fk extends Qe{constructor(e,n){super(e,"not-in",n),this.keys=pE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function pE(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>oe.fromName(r.referenceValue))}class bk extends Qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Cf(n)&&as(n.arrayValue,this.value)}}class Bk extends Qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&as(this.value.arrayValue,n)}}class Ok extends Qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(as(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!as(this.value.arrayValue,n)}}class Gk extends Qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Cf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>as(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,n=null,r=[],i=[],o=null,s=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=l,this.Te=null}}function Sg(t,e=null,n=[],r=[],i=null,o=null,s=null){return new qk(t,e,n,r,i,o,s)}function wf(t){const e=Se(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>td(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Ef(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>bi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>bi(r)).join(",")),e.Te=n}return e.Te}function If(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Dk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!fE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Tg(t.startAt,e.startAt)&&Tg(t.endAt,e.endAt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,n=null,r=[],i=[],o=null,s="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Hk(t,e,n,r,i,o,s,l){return new Fa(t,e,n,r,i,o,s,l)}function $k(t){return new Fa(t)}function Cg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zk(t){return t.collectionGroup!==null}function bo(t){const e=Se(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new st(it.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new da(o,r))}),n.has(it.keyField().canonicalString())||e.Ie.push(new da(it.keyField(),r))}return e.Ie}function Nr(t){const e=Se(t);return e.Ee||(e.Ee=Wk(e,bo(t))),e.Ee}function Wk(t,e){if(t.limitType==="F")return Sg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new da(i.field,o)});const n=t.endAt?new ca(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ca(t.startAt.position,t.startAt.inclusive):null;return Sg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function nd(t,e,n){return new Fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function mE(t,e){return If(Nr(t),Nr(e))&&t.limitType===e.limitType}function gE(t){return`${wf(Nr(t))}|lt:${t.limitType}`}function To(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>hE(i)).join(", ")}]`),Ef(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>bi(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>bi(i)).join(",")),`Target(${r})`}(Nr(t))}; limitType=${t.limitType})`}function Af(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):oe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of bo(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,l,c){const f=Eg(s,l,c);return s.inclusive?f<=0:f<0}(r.startAt,bo(r),i)||r.endAt&&!function(s,l,c){const f=Eg(s,l,c);return s.inclusive?f>=0:f>0}(r.endAt,bo(r),i))}(t,e)}function Jk(t){return(e,n)=>{let r=!1;for(const i of bo(t)){const o=Kk(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Kk(t,e,n){const r=t.field.isKeyField()?oe.comparator(e.key,n.key):function(o,s,l){const c=s.data.field(o),f=l.data.field(o);return c!==null&&f!==null?Fi(c,f):le(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ki(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return tE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=new Pt(oe.comparator);function fa(){return Yk}const _E=new Pt(oe.comparator);function cl(...t){let e=_E;for(const n of t)e=e.insert(n.key,n);return e}function yE(t){let e=_E;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Rr(){return Bo()}function vE(){return Bo()}function Bo(){return new zr(t=>t.toString(),(t,e)=>t.isEqual(e))}const Qk=new Pt(oe.comparator),Xk=new st(oe.comparator);function ht(...t){let e=Xk;for(const n of t)e=e.add(n);return e}const jk=new st(_e);function Zk(){return jk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:la(e)?"-0":e}}function EE(t){return{integerValue:""+t}}function eN(t,e){return wk(e)?EE(e):Rf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(){this._=void 0}}function tN(t,e,n){return t instanceof us?function(i,o){const s={fields:{[rE]:{stringValue:nE},[oE]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Tf(o)&&(o=Sf(o)),o&&(s.fields[iE]=o),{mapValue:s}}(n,e):t instanceof cs?SE(t,e):t instanceof ds?CE(t,e):function(i,o){const s=TE(i,o),l=wg(s)+wg(i.Ae);return ed(s)&&ed(i.Ae)?EE(l):Rf(i.serializer,l)}(t,e)}function nN(t,e,n){return t instanceof cs?SE(t,e):t instanceof ds?CE(t,e):n}function TE(t,e){return t instanceof ha?function(r){return ed(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class us extends ba{}class cs extends ba{constructor(e){super(),this.elements=e}}function SE(t,e){const n=wE(e);for(const r of t.elements)n.some(i=>yn(i,r))||n.push(r);return{arrayValue:{values:n}}}class ds extends ba{constructor(e){super(),this.elements=e}}function CE(t,e){let n=wE(e);for(const r of t.elements)n=n.filter(i=>!yn(i,r));return{arrayValue:{values:n}}}class ha extends ba{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function wg(t){return rt(t.integerValue||t.doubleValue)}function wE(t){return Cf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,n){this.field=e,this.transform=n}}function iN(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof cs&&i instanceof cs||r instanceof ds&&i instanceof ds?Li(r.elements,i.elements,yn):r instanceof ha&&i instanceof ha?yn(r.Ae,i.Ae):r instanceof us&&i instanceof us}(t.transform,e.transform)}class oN{constructor(e,n){this.version=e,this.transformResults=n}}class wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wn}static exists(e){return new wn(void 0,e)}static updateTime(e){return new wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ba{}function IE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new RE(t.key,wn.none()):new Es(t.key,t.data,wn.none());{const n=t.data,r=jt.empty();let i=new st(it.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Wr(t.key,r,new tn(i.toArray()),wn.none())}}function sN(t,e,n){t instanceof Es?function(i,o,s){const l=i.value.clone(),c=Ag(i.fieldTransforms,o,s.transformResults);l.setAll(c),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Wr?function(i,o,s){if(!kl(i.precondition,o))return void o.convertToUnknownDocument(s.version);const l=Ag(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(AE(i)),c.setAll(l),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Oo(t,e,n,r){return t instanceof Es?function(o,s,l,c){if(!kl(o.precondition,s))return l;const f=o.value.clone(),h=Rg(o.fieldTransforms,c,s);return f.setAll(h),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof Wr?function(o,s,l,c){if(!kl(o.precondition,s))return l;const f=Rg(o.fieldTransforms,c,s),h=s.data;return h.setAll(AE(o)),h.setAll(f),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,l){return kl(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l}(t,e,n)}function lN(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=TE(r.transform,i||null);o!=null&&(n===null&&(n=jt.empty()),n.set(r.field,o))}return n||null}function Ig(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Li(r,i,(o,s)=>iN(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Es extends Ba{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Wr extends Ba{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function AE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ag(t,e,n){const r=new Map;Fe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,l=e.data.field(o.field);r.set(o.field,nN(s,l,n[i]))}return r}function Rg(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,tN(o,s,e))}return r}class RE extends Ba{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aN extends Ba{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&sN(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Oo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Oo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=vE();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let l=this.applyToLocalView(s,o.mutatedFields);l=n.has(i.key)?null:l;const c=IE(s,l);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ht())}isEqual(e){return this.batchId===e.batchId&&Li(this.mutations,e.mutations,(n,r)=>Ig(n,r))&&Li(this.baseMutations,e.baseMutations,(n,r)=>Ig(n,r))}}class xf{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Fe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return Qk}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new xf(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be,de;function dN(t){switch(t){case G.OK:return le(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return le(15467,{code:t})}}function fN(t){if(t===void 0)return Br("GRPC error has no .code"),G.UNKNOWN;switch(t){case Be.OK:return G.OK;case Be.CANCELLED:return G.CANCELLED;case Be.UNKNOWN:return G.UNKNOWN;case Be.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case Be.INTERNAL:return G.INTERNAL;case Be.UNAVAILABLE:return G.UNAVAILABLE;case Be.UNAUTHENTICATED:return G.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case Be.NOT_FOUND:return G.NOT_FOUND;case Be.ALREADY_EXISTS:return G.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return G.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case Be.ABORTED:return G.ABORTED;case Be.OUT_OF_RANGE:return G.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return G.UNIMPLEMENTED;case Be.DATA_LOSS:return G.DATA_LOSS;default:return le(39323,{code:t})}}(de=Be||(Be={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new ff([4294967295,4294967295],0);class hN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function rd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function mN(t,e){return rd(t,e.toTimestamp())}function Ii(t){return Fe(!!t,49232),Re.fromTimestamp(function(n){const r=Or(n);return new Pe(r.seconds,r.nanos)}(t))}function xE(t,e){return id(t,e).canonicalString()}function id(t,e){const n=function(i){return new Me(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function gN(t){const e=Me.fromString(t);return Fe(wN(e),10190,{key:e.toString()}),e}function od(t,e){return xE(t.databaseId,e.path)}function _N(t){const e=gN(t);return e.length===4?Me.emptyPath():vN(e)}function yN(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function vN(t){return Fe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function xg(t,e,n){return{name:od(t,e),fields:n.value.mapValue.fields}}function EN(t,e){let n;if(e instanceof Es)n={update:xg(t,e.key,e.value)};else if(e instanceof RE)n={delete:od(t,e.key)};else if(e instanceof Wr)n={update:xg(t,e.key,e.data),updateMask:CN(e.fieldMask)};else{if(!(e instanceof aN))return le(16599,{Vt:e.type});n={verify:od(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const l=s.transform;if(l instanceof us)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof cs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ds)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ha)return{fieldPath:s.field.canonicalString(),increment:l.Ae};throw le(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:mN(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:le(27497)}(t,e.precondition)),n}function TN(t,e){return t&&t.length>0?(Fe(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?Ii(i.updateTime):Ii(o);return s.isEqual(Re.min())&&(s=Ii(o)),new oN(s,i.transformResults||[])}(n,e))):[]}function SN(t){let e=_N(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Fe(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){const g=PE(p);return g instanceof sr&&dE(g)?g.getFilters():[g]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(g=>function(I){return new da(ti(I.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,Ef(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,E=p.values||[];return new ca(E,g)}(n.startAt));let f=null;return n.endAt&&(f=function(p){const g=!p.before,E=p.values||[];return new ca(E,g)}(n.endAt)),Hk(e,i,s,o,l,"F",c,f)}function PE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ti(n.unaryFilter.field);return Qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ti(n.unaryFilter.field);return Qe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ti(n.unaryFilter.field);return Qe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=ti(n.unaryFilter.field);return Qe.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return le(61313);default:return le(60726)}}(t):t.fieldFilter!==void 0?function(n){return Qe.create(ti(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return le(58110);default:return le(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return sr.create(n.compositeFilter.filters.map(r=>PE(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return le(1026)}}(n.compositeFilter.op))}(t):le(30097,{filter:t})}function ti(t){return it.fromServerFormat(t.fieldPath)}function CN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.yt=e}}function AN(t){const e=SN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?nd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(){this.Cn=new xN}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(or.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(or.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class xN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new st(Me.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new st(Me.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kE=41943040;class Ct{static withCacheSize(e){return new Ct(e,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ct.DEFAULT_COLLECTION_PERCENTILE=10,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ct.DEFAULT=new Ct(kE,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ct.DISABLED=new Ct(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Bi(0)}static cr(){return new Bi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="LruGarbageCollector",PN=1048576;function Ng([t,e],[n,r]){const i=_e(t,n);return i===0?_e(e,r):i}class kN{constructor(e){this.Ir=e,this.buffer=new st(Ng),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Ng(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class NN{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Q(kg,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){vs(n)?Q(kg,"Ignoring IndexedDB error during garbage collection: ",n):await _f(n)}await this.Vr(3e5)})}}class MN{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(yf.ce);const r=new kN(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(Pg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Pg):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,s,l,c,f;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(f=Date.now(),ei()<=fe.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(l-s)+`ms
	Removed ${o} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(f-c)+`ms
Total Duration: ${f-h}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}}function DN(t,e){return new MN(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(){this.changes=new zr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Oo(r.mutation,i,tn.empty(),Pe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ht()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ht()){const i=Rr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=cl();return o.forEach((l,c)=>{s=s.insert(l,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Rr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ht()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,l)=>{n.set(s,l)})})}computeViews(e,n,r,i){let o=fa();const s=Bo(),l=function(){return Bo()}();return n.forEach((c,f)=>{const h=r.get(f.key);i.has(f.key)&&(h===void 0||h.mutation instanceof Wr)?o=o.insert(f.key,f):h!==void 0?(s.set(f.key,h.mutation.getFieldMask()),Oo(h.mutation,f,h.mutation.getFieldMask(),Pe.now())):s.set(f.key,tn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((f,h)=>s.set(f,h)),n.forEach((f,h)=>l.set(f,new LN(h,s.get(f)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Bo();let i=new Pt((s,l)=>s-l),o=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const l of s)l.keys().forEach(c=>{const f=n.get(c);if(f===null)return;let h=r.get(c)||tn.empty();h=l.applyToLocalView(f,h),r.set(c,h);const p=(i.get(l.batchId)||ht()).add(c);i=i.insert(l.batchId,p)})}).next(()=>{const s=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),f=c.key,h=c.value,p=vE();h.forEach(g=>{if(!o.has(g)){const E=IE(n.get(g),r.get(g));E!==null&&p.set(g,E),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,f,p))}return B.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return oe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):B.resolve(Rr());let l=ls,c=o;return s.next(f=>B.forEach(f,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),o.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{c=c.insert(h,g)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,c,f,ht())).next(h=>({batchId:l,changes:yE(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next(r=>{let i=cl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=cl();return this.indexManager.getCollectionParents(e,o).next(l=>B.forEach(l,c=>{const f=function(p,g){return new Fa(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,f)=>{const h=f.getKey();s.get(h)===null&&(s=s.insert(h,Xt.newInvalidDocument(h)))});let l=cl();return s.forEach((c,f)=>{const h=o.get(c);h!==void 0&&Oo(h.mutation,f,tn.empty(),Pe.now()),Af(n,f)&&(l=l.insert(c,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return B.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ii(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:AN(i.bundledQuery),readTime:Ii(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(){this.overlays=new Pt(oe.comparator),this.qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Rr();return B.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=Rr(),o=n.length+1,s=new oe(n.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const c=l.getNext().value,f=c.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Pt((f,h)=>f-h);const s=this.overlays.getIterator();for(;s.hasNext();){const f=s.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let h=o.get(f.largestBatchId);h===null&&(h=Rr(),o=o.insert(f.largestBatchId,h)),h.set(f.getKey(),f)}}const l=Rr(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,h)=>l.set(f,h)),!(l.size()>=i)););return B.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new cN(n,r));let o=this.qr.get(n);o===void 0&&(o=ht(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(){this.sessionToken=_n.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(){this.Qr=new st(Ke.$r),this.Ur=new st(Ke.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ke(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ke(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new oe(new Me([])),r=new Ke(n,e),i=new Ke(n,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new oe(new Me([])),r=new Ke(n,e),i=new Ke(n,e+1);let o=ht();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Ke(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ke{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return oe.comparator(e.key,n.key)||_e(e.Yr,n.Yr)}static Kr(e,n){return _e(e.Yr,n.Yr)||oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new st(Ke.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new uN(o,n,r,i);this.mutationQueue.push(s);for(const l of i)this.Zr=this.Zr.add(new Ke(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return B.resolve(s)}lookupMutationBatch(e,n){return B.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),o=i<0?0:i;return B.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?vf:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ke(n,0),i=new Ke(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{const l=this.Xr(s.Yr);o.push(l)}),B.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new st(_e);return n.forEach(i=>{const o=new Ke(i,0),s=new Ke(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],l=>{r=r.add(l.Yr)})}),B.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;oe.isDocumentKey(o)||(o=o.child(""));const s=new Ke(new oe(o),0);let l=new st(_e);return this.Zr.forEachWhile(c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(l=l.add(c.Yr)),!0)},s),B.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Fe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return B.forEach(n.mutations,i=>{const o=new Ke(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ke(n,0),i=this.Zr.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.ri=e,this.docs=function(){return new Pt(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():Xt.newInvalidDocument(n))}getEntries(e,n){let r=fa();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Xt.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=fa();const s=n.path,l=new oe(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:f,value:{document:h}}=c.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||Ek(vk(h),r)<=0||(i.has(h.key)||Af(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return B.resolve(o)}getAllFromCollectionGroup(e,n,r,i){le(9500)}ii(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new qN(this)}getSize(e){return B.resolve(this.size)}}class qN extends VN{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e){this.persistence=e,this.si=new zr(n=>wf(n),If),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new Pf,this.targetCount=0,this.ai=Bi.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),B.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Bi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Pr(n),B.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.si.forEach((s,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),B.waitFor(o).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),B.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n){this.ui={},this.overlays={},this.ci=new yf(0),this.li=!1,this.li=!0,this.hi=new BN,this.referenceDelegate=e(this),this.Pi=new HN(this),this.indexManager=new RN,this.remoteDocumentCache=function(i){return new GN(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new IN(n),this.Ii=new FN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new bN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new ON(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const i=new $N(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,n){return B.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class $N extends Sk{constructor(e){super(),this.currentSequenceNumber=e}}class kf{constructor(e){this.persistence=e,this.Ri=new Pf,this.Vi=null}static mi(e){return new kf(e)}get fi(){if(this.Vi)return this.Vi;throw le(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,r=>{const i=oe.fromPath(r);return this.gi(e,i).next(o=>{o||n.removeEntry(i,Re.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class pa{constructor(e,n){this.persistence=e,this.pi=new zr(r=>Ik(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=DN(this,n)}static mi(e,n){return new pa(e,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return B.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?B.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,n).next(l=>{l||(r++,o.removeEntry(s,Re.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=xl(e.data.value)),n}br(e,n,r){return B.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return B.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ht(),i=ht();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Nf(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Wx()?8:Ck($x())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ys(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new zN;return this.Ss(e,n,s).next(l=>{if(o.result=l,this.Vs)return this.bs(e,n,s,l.size)})}).next(()=>o.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(ei()<=fe.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",To(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(ei()<=fe.DEBUG&&Q("QueryEngine","Query:",To(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ei()<=fe.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",To(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nr(n))):B.resolve())}ys(e,n){if(Cg(n))return B.resolve(null);let r=Nr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=nd(n,null,"F"),r=Nr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=ht(...o);return this.ps.getDocuments(e,s).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const f=this.Ds(n,l);return this.Cs(n,f,s,c.readTime)?this.ys(e,nd(n,null,"F")):this.vs(e,f,n,c)}))})))}ws(e,n,r,i){return Cg(n)||i.isEqual(Re.min())?B.resolve(null):this.ps.getDocuments(e,r).next(o=>{const s=this.Ds(n,o);return this.Cs(n,s,r,i)?B.resolve(null):(ei()<=fe.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),To(n)),this.vs(e,s,n,yk(i,ls)).next(l=>l))})}Ds(e,n){let r=new st(Jk(e));return n.forEach((i,o)=>{Af(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return ei()<=fe.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",To(n)),this.ps.getDocumentsMatchingQuery(e,n,or.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="LocalStore";class KN{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Pt(_e),this.xs=new zr(o=>wf(o),If),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function YN(t,e,n,r){return new KN(t,e,n,r)}async function ME(t,e){const n=Se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],l=[];let c=ht();for(const f of i){s.push(f.batchId);for(const h of f.mutations)c=c.add(h.key)}for(const f of o){l.push(f.batchId);for(const h of f.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(f=>({Ls:f,removedBatchIds:s,addedBatchIds:l}))})})}function QN(t,e){const n=Se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,f,h){const p=f.batch,g=p.keys();let E=B.resolve();return g.forEach(I=>{E=E.next(()=>h.getEntry(c,I)).next(N=>{const V=f.docVersions.get(I);Fe(V!==null,48541),N.version.compareTo(V)<0&&(p.applyToRemoteDocument(N,f),N.isValidDocument()&&(N.setReadTime(f.commitVersion),h.addEntry(N)))})}),E.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=ht();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(c=c.add(l.batch.mutations[f].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function XN(t){const e=Se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function jN(t,e){const n=Se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=vf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}class Mg{constructor(){this.activeTargetIds=Zk()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZN{constructor(){this.Mo=new Mg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Mg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg="ConnectivityMonitor";class Vg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Q(Dg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Q(Dg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dl=null;function sd(){return dl===null?dl=function(){return 268435456+Math.round(2147483648*Math.random())}():dl++,"0x"+dl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu="RestConnection",t1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class n1{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Xc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){const s=sd(),l=this.zo(e,n.toUriEncodedString());Q(Bu,`Sending RPC '${e}' ${s}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,o);const{host:f}=new URL(l),h=Hx(f);return this.Jo(e,l,c,r,h).then(p=>(Q(Bu,`Received RPC '${e}' ${s}: `,p),p),p=>{throw hf(Bu,`RPC '${e}' ${s} failed with error: `,p,"url: ",l,"request:",r),p})}Ho(e,n,r,i,o,s){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ji}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,n){const r=t1[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt="WebChannelConnection";class i1 extends n1{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){const s=sd();return new Promise((l,c)=>{const f=new Wv;f.setWithCredentials(!0),f.listenOnce(Jv.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Rl.NO_ERROR:const p=f.getResponseJson();Q(dt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),l(p);break;case Rl.TIMEOUT:Q(dt,`RPC '${e}' ${s} timed out`),c(new te(G.DEADLINE_EXCEEDED,"Request time out"));break;case Rl.HTTP_ERROR:const g=f.getStatus();if(Q(dt,`RPC '${e}' ${s} failed with status:`,g,"response text:",f.getResponseText()),g>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const I=E==null?void 0:E.error;if(I&&I.status&&I.message){const N=function(A){const S=A.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(S)>=0?S:G.UNKNOWN}(I.status);c(new te(N,I.message))}else c(new te(G.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new te(G.UNAVAILABLE,"Connection failed."));break;default:le(9055,{l_:e,streamId:s,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{Q(dt,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);Q(dt,`RPC '${e}' ${s} sending request:`,i),f.send(n,"POST",h,r,15)})}T_(e,n,r){const i=sd(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Qv(),l=Yv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=o.join("");Q(dt,`Creating RPC '${e}' stream ${i}: ${h}`,c);const p=s.createWebChannel(h,c);this.I_(p);let g=!1,E=!1;const I=new r1({Yo:V=>{E?Q(dt,`Not sending because RPC '${e}' stream ${i} is closed:`,V):(g||(Q(dt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),Q(dt,`RPC '${e}' stream ${i} sending:`,V),p.send(V))},Zo:()=>p.close()}),N=(V,A,S)=>{V.listen(A,x=>{try{S(x)}catch(D){setTimeout(()=>{throw D},0)}})};return N(p,Ao.EventType.OPEN,()=>{E||(Q(dt,`RPC '${e}' stream ${i} transport opened.`),I.o_())}),N(p,Ao.EventType.CLOSE,()=>{E||(E=!0,Q(dt,`RPC '${e}' stream ${i} transport closed`),I.a_(),this.E_(p))}),N(p,Ao.EventType.ERROR,V=>{E||(E=!0,hf(dt,`RPC '${e}' stream ${i} transport errored. Name:`,V.name,"Message:",V.message),I.a_(new te(G.UNAVAILABLE,"The operation could not be completed")))}),N(p,Ao.EventType.MESSAGE,V=>{var A;if(!E){const S=V.data[0];Fe(!!S,16349);const x=S,D=(x==null?void 0:x.error)||((A=x[0])==null?void 0:A.error);if(D){Q(dt,`RPC '${e}' stream ${i} received error:`,D);const b=D.status;let F=function(C){const R=Be[C];if(R!==void 0)return fN(R)}(b),w=D.message;F===void 0&&(F=G.INTERNAL,w="Unknown error status: "+b+" with message "+D.message),E=!0,I.a_(new te(F,w)),p.close()}else Q(dt,`RPC '${e}' stream ${i} received:`,S),I.u_(S)}}),N(l,Kv.STAT_EVENT,V=>{V.stat===Yc.PROXY?Q(dt,`RPC '${e}' stream ${i} detected buffering proxy`):V.stat===Yc.NOPROXY&&Q(dt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.__()},0),I}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Ou(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(t){return new hN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg="PersistentStream";class o1{constructor(e,n,r,i,o,s,l,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new DE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(Br(n.toString()),Br("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new te(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Q(Lg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Q(Lg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class s1 extends o1{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=TN(e.writeResults,e.commitTime),r=Ii(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=yN(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>EN(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{}class a1 extends l1{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new te(G.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,id(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(G.UNKNOWN,o.toString())})}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.Ho(e,id(n,r),i,s,l,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new te(G.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class u1{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Br(n),this.aa=!1):Q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts="RemoteStore";class c1{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{Cs(this)&&(Q(Ts,"Restarting streams for network reachability change."),await async function(c){const f=Se(c);f.Ea.add(4),await Ss(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Ga(f)}(this))})}),this.Ra=new u1(r,i)}}async function Ga(t){if(Cs(t))for(const e of t.da)await e(!0)}async function Ss(t){for(const e of t.da)await e(!1)}function Cs(t){return Se(t).Ea.size===0}async function VE(t,e,n){if(!vs(e))throw e;t.Ea.add(1),await Ss(t),t.Ra.set("Offline"),n||(n=()=>XN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q(Ts,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ga(t)})}function LE(t,e){return e().catch(n=>VE(t,n,e))}async function qa(t){const e=Se(t),n=lr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:vf;for(;d1(e);)try{const i=await jN(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,f1(e,i)}catch(i){await VE(e,i)}UE(e)&&FE(e)}function d1(t){return Cs(t)&&t.Ta.length<10}function f1(t,e){t.Ta.push(e);const n=lr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function UE(t){return Cs(t)&&!lr(t).x_()&&t.Ta.length>0}function FE(t){lr(t).start()}async function h1(t){lr(t).ra()}async function p1(t){const e=lr(t);for(const n of t.Ta)e.ea(n.mutations)}async function m1(t,e,n){const r=t.Ta.shift(),i=xf.from(r,e,n);await LE(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await qa(t)}async function g1(t,e){e&&lr(t).X_&&await async function(r,i){if(function(s){return dN(s)&&s!==G.ABORTED}(i.code)){const o=r.Ta.shift();lr(r).B_(),await LE(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await qa(r)}}(t,e),UE(t)&&FE(t)}async function Ug(t,e){const n=Se(t);n.asyncQueue.verifyOperationInProgress(),Q(Ts,"RemoteStore received new credentials");const r=Cs(n);n.Ea.add(3),await Ss(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ga(n)}async function _1(t,e){const n=Se(t);e?(n.Ea.delete(2),await Ga(n)):e||(n.Ea.add(2),await Ss(n),n.Ra.set("Unknown"))}function lr(t){return t.fa||(t.fa=function(n,r,i){const o=Se(n);return o.sa(),new s1(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:h1.bind(null,t),r_:g1.bind(null,t),ta:p1.bind(null,t),na:m1.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await qa(t)):(await t.fa.stop(),t.Ta.length>0&&(Q(Ts,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,l=new Mf(e,n,s,i,o);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bE(t,e){if(Br("AsyncQueue",`${e}: ${t}`),vs(t))return new te(G.UNAVAILABLE,`${e}: ${t}`);throw t}class y1{constructor(){this.queries=Fg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Se(n),o=i.queries;i.queries=Fg(),o.forEach((s,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new te(G.ABORTED,"Firestore shutting down"))}}function Fg(){return new zr(t=>gE(t),mE)}function v1(t){t.Ca.forEach(e=>{e.next()})}var bg,Bg;(Bg=bg||(bg={})).Ma="default",Bg.Cache="cache";const E1="SyncEngine";class T1{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new zr(l=>gE(l),mE),this.Iu=new Map,this.Eu=new Set,this.du=new Pt(oe.comparator),this.Au=new Map,this.Ru=new Pf,this.Vu={},this.mu=new Map,this.fu=Bi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function S1(t,e,n){const r=A1(t);try{const i=await function(s,l){const c=Se(s),f=Pe.now(),h=l.reduce((E,I)=>E.add(I.key),ht());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let I=fa(),N=ht();return c.Ns.getEntries(E,h).next(V=>{I=V,I.forEach((A,S)=>{S.isValidDocument()||(N=N.add(A))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,I)).next(V=>{p=V;const A=[];for(const S of l){const x=lN(S,p.get(S.key).overlayedDocument);x!=null&&A.push(new Wr(S.key,x,aE(x.value.mapValue),wn.exists(!0)))}return c.mutationQueue.addMutationBatch(E,f,A,l)}).next(V=>{g=V;const A=V.applyToLocalDocumentSet(p,N);return c.documentOverlayCache.saveOverlays(E,V.batchId,A)})}).then(()=>({batchId:g.batchId,changes:yE(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,c){let f=s.Vu[s.currentUser.toKey()];f||(f=new Pt(_e)),f=f.insert(l,c),s.Vu[s.currentUser.toKey()]=f}(r,i.batchId,n),await Ha(r,i.changes),await qa(r.remoteStore)}catch(i){const o=bE(i,"Failed to persist write");n.reject(o)}}function Og(t,e,n){const r=Se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((o,s)=>{const l=s.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(s,l){const c=Se(s);c.onlineState=l;let f=!1;c.queries.forEach((h,p)=>{for(const g of p.Sa)g.va(l)&&(f=!0)}),f&&v1(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function C1(t,e){const n=Se(t),r=e.batch.batchId;try{const i=await QN(n.localStore,e);OE(n,r,null),BE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ha(n,i)}catch(i){await _f(i)}}async function w1(t,e,n){const r=Se(t);try{const i=await function(s,l){const c=Se(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let h;return c.mutationQueue.lookupMutationBatch(f,l).next(p=>(Fe(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(f,p))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,h)).next(()=>c.localDocuments.getDocuments(f,h))})}(r.localStore,e);OE(r,e,n),BE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ha(r,i)}catch(i){await _f(i)}}function BE(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function OE(t,e,n){const r=Se(t);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}async function Ha(t,e,n){const r=Se(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{s.push(r.pu(c,e,n).then(f=>{var h;if((f||n)&&r.isPrimaryClient){const p=f?!f.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(f){i.push(f);const p=Nf.As(c.targetId,f);o.push(p)}}))}),await Promise.all(s),r.Pu.H_(i),await async function(c,f){const h=Se(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>B.forEach(f,g=>B.forEach(g.Es,E=>h.persistence.referenceDelegate.addReference(p,g.targetId,E)).next(()=>B.forEach(g.ds,E=>h.persistence.referenceDelegate.removeReference(p,g.targetId,E)))))}catch(p){if(!vs(p))throw p;Q(JN,"Failed to update sequence numbers: "+p)}for(const p of f){const g=p.targetId;if(!p.fromCache){const E=h.Ms.get(g),I=E.snapshotVersion,N=E.withLastLimboFreeSnapshotVersion(I);h.Ms=h.Ms.insert(g,N)}}}(r.localStore,o))}async function I1(t,e){const n=Se(t);if(!n.currentUser.isEqual(e)){Q(E1,"User change. New user:",e.toKey());const r=await ME(n.localStore,e);n.currentUser=e,function(o,s){o.mu.forEach(l=>{l.forEach(c=>{c.reject(new te(G.CANCELLED,s))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ha(n,r.Ls)}}function A1(t){const e=Se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=C1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=w1.bind(null,e),e}class ma{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Oa(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return YN(this.persistence,new WN,e.initialUser,this.serializer)}Cu(e){return new NE(kf.mi,this.serializer)}Du(e){return new ZN}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ma.provider={build:()=>new ma};class R1 extends ma{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Fe(this.persistence.referenceDelegate instanceof pa,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new NN(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ct.withCacheSize(this.cacheSizeBytes):Ct.DEFAULT;return new NE(r=>pa.mi(r,n),this.serializer)}}class ld{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Og(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=I1.bind(null,this.syncEngine),await _1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new y1}()}createDatastore(e){const n=Oa(e.databaseInfo.databaseId),r=function(o){return new i1(o)}(e.databaseInfo);return function(o,s,l,c){return new a1(o,s,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,l){return new c1(r,i,o,s,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Og(this.syncEngine,n,0),function(){return Vg.v()?new Vg:new e1}())}createSyncEngine(e,n){return function(i,o,s,l,c,f,h){const p=new T1(i,o,s,l,c,f);return h&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=Se(i);Q(Ts,"RemoteStore shutting down."),o.Ea.add(5),await Ss(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}ld.provider={build:()=>new ld};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar="FirestoreClient";class x1{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=St.UNAUTHENTICATED,this.clientId=mf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{Q(ar,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Q(ar,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=bE(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Gu(t,e){t.asyncQueue.verifyOperationInProgress(),Q(ar,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await ME(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Gg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await P1(t);Q(ar,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ug(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Ug(e.remoteStore,i)),t._onlineComponents=e}async function P1(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q(ar,"Using user provided OfflineComponentProvider");try{await Gu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===G.FAILED_PRECONDITION||i.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;hf("Error using user provided cache. Falling back to memory cache: "+n),await Gu(t,new ma)}}else Q(ar,"Using default OfflineComponentProvider"),await Gu(t,new R1(void 0));return t._offlineComponents}async function k1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q(ar,"Using user provided OnlineComponentProvider"),await Gg(t,t._uninitializedComponentsProvider._online)):(Q(ar,"Using default OnlineComponentProvider"),await Gg(t,new ld))),t._onlineComponents}function N1(t){return k1(t).then(e=>e.syncEngine)}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1="firestore.googleapis.com",Hg=!0;class $g{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new te(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=M1,this.ssl=Hg}else this.host=e.host,this.ssl=e.ssl??Hg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=kE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<PN)throw new te(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GE(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new te(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new te(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new te(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Df{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $g({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $g(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new lk;switch(r.type){case"firstParty":return new ck(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new te(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=qg.get(n);r&&(Q("ComponentProvider","Removing Datastore"),qg.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vf(this.firestore,e,this._query)}}class mt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}toJSON(){return{type:mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ys(n,mt._jsonSchema))return new mt(e,r||null,new oe(Me.fromString(n.referencePath)))}}mt._jsonSchemaVersion="firestore/documentReference/1.0",mt._jsonSchema={type:Ge("string",mt._jsonSchemaVersion),referencePath:Ge("string")};class nr extends Vf{constructor(e,n,r){super(e,n,$k(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new oe(e))}withConverter(e){return new nr(this.firestore,e,this._path)}}function D1(t,e,...n){if(t=os(t),jv("collection","path",e),t instanceof Df){const r=Me.fromString(e,...n);return fg(r),new nr(t,null,r)}{if(!(t instanceof mt||t instanceof nr))throw new te(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return fg(r),new nr(t.firestore,null,r)}}function V1(t,e,...n){if(t=os(t),arguments.length===1&&(e=mf.newId()),jv("doc","path",e),t instanceof Df){const r=Me.fromString(e,...n);return dg(r),new mt(t,null,new oe(r))}{if(!(t instanceof mt||t instanceof nr))throw new te(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return dg(r),new mt(t.firestore,t instanceof nr?t.converter:null,new oe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg="AsyncQueue";class Wg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new DE(this,"async_queue_retry"),this._c=()=>{const r=Ou();r&&Q(zg,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Ou();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Ou();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new kr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!vs(e))throw e;Q(zg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Br("INTERNAL UNHANDLED ERROR: ",Jg(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Mf.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&le(47125,{Pc:Jg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Jg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class qE extends Df{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Wg,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wg(e),this._firestoreClient=void 0,await e}}}function L1(t){if(t._terminated)throw new te(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||U1(t),t._firestoreClient}function U1(t){var r,i,o;const e=t._freezeSettings(),n=function(l,c,f,h){return new Pk(l,c,f,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,GE(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new x1(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zt(_n.fromBase64String(e))}catch(n){throw new te(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Zt(_n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ys(e,Zt._jsonSchema))return Zt.fromBase64String(e.bytes)}}Zt._jsonSchemaVersion="firestore/bytes/1.0",Zt._jsonSchema={type:Ge("string",Zt._jsonSchemaVersion),bytes:Ge("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:In._jsonSchemaVersion}}static fromJSON(e){if(ys(e,In._jsonSchema))return new In(e.latitude,e.longitude)}}In._jsonSchemaVersion="firestore/geoPoint/1.0",In._jsonSchema={type:Ge("string",In._jsonSchemaVersion),latitude:Ge("number"),longitude:Ge("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:An._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ys(e,An._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new An(e.vectorValues);throw new te(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}An._jsonSchemaVersion="firestore/vectorValue/1.0",An._jsonSchema={type:Ge("string",An._jsonSchemaVersion),vectorValues:Ge("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=/^__.*__$/;class b1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Wr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Es(e,this.data,n,this.fieldTransforms)}}function HE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le(40011,{Ac:t})}}class Ff{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ff({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ga(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(HE(this.Ac)&&F1.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class B1{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Oa(e)}Cc(e,n,r,i=!1){return new Ff({Ac:e,methodName:n,Dc:r,path:it.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function O1(t){const e=t._freezeSettings(),n=Oa(t._databaseId);return new B1(t._databaseId,!!e.ignoreUndefinedProperties,n)}function G1(t,e,n,r,i,o={}){const s=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);JE("Data must be an object, but it was:",s,r);const l=zE(r,s);let c,f;if(o.merge)c=new tn(s.fieldMask),f=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const p of o.mergeFields){const g=q1(e,p,n);if(!s.contains(g))throw new te(G.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);$1(h,g)||h.push(g)}c=new tn(h),f=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,f=s.fieldTransforms;return new b1(new jt(l),c,f)}class bf extends Uf{_toFieldTransform(e){return new rN(e.path,new us)}isEqual(e){return e instanceof bf}}function $E(t,e){if(WE(t=os(t)))return JE("Unsupported field value:",e,t),zE(t,e);if(t instanceof Uf)return function(r,i){if(!HE(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const l of r){let c=$E(l,i.wc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=os(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return eN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Pe.fromDate(r);return{timestampValue:rd(i.serializer,o)}}if(r instanceof Pe){const o=new Pe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:rd(i.serializer,o)}}if(r instanceof In)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zt)return{bytesValue:pN(i.serializer,r._byteString)};if(r instanceof mt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:xE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof An)return function(s,l){return{mapValue:{fields:{[sE]:{stringValue:lE},[jc]:{arrayValue:{values:s.toArray().map(f=>{if(typeof f!="number")throw l.Sc("VectorValues must only contain numeric values.");return Rf(l.serializer,f)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${gf(r)}`)}(t,e)}function zE(t,e){const n={};return tE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ki(t,(r,i)=>{const o=$E(i,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function WE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Pe||t instanceof In||t instanceof Zt||t instanceof mt||t instanceof Uf||t instanceof An)}function JE(t,e,n){if(!WE(n)||!Zv(n)){const r=gf(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function q1(t,e,n){if((e=os(e))instanceof Lf)return e._internalPath;if(typeof e=="string")return KE(t,e);throw ga("Field path arguments must be of type string or ",t,!1,void 0,n)}const H1=new RegExp("[~\\*/\\[\\]]");function KE(t,e,n){if(e.search(H1)>=0)throw ga(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Lf(...e.split("."))._internalPath}catch{throw ga(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ga(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new te(G.INVALID_ARGUMENT,l+t+c)}function $1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new z1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(QE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class z1 extends YE{data(){return super.data()}}function QE(t,e){return typeof e=="string"?KE(t,e):e instanceof Lf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class fl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ai extends YE{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Nl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(QE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new te(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ai._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ai._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ai._jsonSchema={type:Ge("string",Ai._jsonSchemaVersion),bundleSource:Ge("string","DocumentSnapshot"),bundleName:Ge("string"),bundle:Ge("string")};class Nl extends Ai{data(e={}){return super.data(e)}}class Go{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new fl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Nl(this._firestore,this._userDataWriter,r.key,r,new fl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(l=>{const c=new Nl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new fl(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const c=new Nl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new fl(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,h=-1;return l.type!==0&&(f=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),h=s.indexOf(l.doc.key)),{type:J1(l.type),doc:c,oldIndex:f,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new te(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Go._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=mf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function J1(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le(61501,{type:t})}}Go._jsonSchemaVersion="firestore/querySnapshot/1.0",Go._jsonSchema={type:Ge("string",Go._jsonSchemaVersion),bundleSource:Ge("string","QuerySnapshot"),bundleName:Ge("string"),bundle:Ge("string")};function K1(t,e){const n=_k(t.firestore,qE),r=V1(t),i=W1(t.converter,e);return Y1(n,[G1(O1(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,wn.exists(!1))]).then(()=>r)}function Y1(t,e){return function(r,i){const o=new kr;return r.asyncQueue.enqueueAndForget(async()=>S1(await N1(r),i,o)),o.promise}(L1(t),e)}function Q1(){return new bf("serverTimestamp")}(function(e,n=!0){(function(i){Ji=i})(JP),sa(new oa("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),l=new qE(new ak(r.getProvider("auth-internal")),new dk(s,r.getProvider("app-check-internal")),function(f,h){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new te(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ua(f.options.projectId,h)}(s,i),s);return o={useFetchStreams:n,...o},l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),wi(lg,ag,e),wi(lg,ag,"esm2020")})();let qu=null;function XE(){return null}async function X1(t,e){try{if(qu||XE(),!qu)throw new Error("Firestore not initialized (missing VITE_FIREBASE_* env vars)");const n=D1(qu,t);return{id:(await K1(n,{...e,created_at:Q1()})).id}}catch(n){throw console.error("saveLogToFirestore error",n),n}}const Kg="nova-research-logs-v2",j1="1010",Z1=()=>{const[t,e]=O.useState(!1),[n,r]=O.useState(""),[i,o]=O.useState([]),[s,l]=O.useState(!1),[c,f]=O.useState(""),[h,p]=O.useState(new Date().toISOString().slice(0,10)),[g,E]=O.useState(""),[I,N]=O.useState("Y"),[V,A]=O.useState(""),[S,x]=O.useState(0),[D,b]=O.useState(3),[F,w]=O.useState(2),[v,C]=O.useState("");O.useEffect(()=>{const z=localStorage.getItem(Kg);z&&o(JSON.parse(z))},[]),O.useEffect(()=>{try{XE()}catch{}},[]);const R=z=>{localStorage.setItem(Kg,JSON.stringify(z)),o(z)},k=z=>{z==null||z.preventDefault();const me={id:String(Date.now()),date:h,task:g,completed:I,delay_desc:V,delay_minutes:S,focus:D,fatigue:F,notes:v,created_at:new Date().toISOString()},H=[...i,me];R(H),s&&(f(" ..."),X1("research_logs",me).then(K=>{f(`  (id: ${K.id})`),setTimeout(()=>f(""),3e3)}).catch(K=>{console.error(K),f("  (/ )")})),E(""),A(""),x(0),C(""),alert(".")},M=()=>{const z=new Blob([JSON.stringify(i,null,2)],{type:"application/json;charset=utf-8"}),me=URL.createObjectURL(z),H=document.createElement("a");H.href=me,H.download=`nova_research_logs_${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(H),H.click(),H.remove(),URL.revokeObjectURL(me)},P=()=>{if(!i.length){alert("  .");return}const z=["id","date","task","completed","delay_minutes","delay_desc","focus","fatigue","notes","created_at"],me=i.map(ce=>z.map(ge=>`"${String(ce[ge]||"").replace(/"/g,'""')}"`).join(",")),H=[z.join(","),...me].join(`
`),K=new Blob([H],{type:"text/csv;charset=utf-8"}),ne=URL.createObjectURL(K),X=document.createElement("a");X.href=ne,X.download=`nova_research_logs_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(X),X.click(),X.remove(),URL.revokeObjectURL(ne)},Z=()=>{confirm("   ?")&&R([])},ue=z=>{confirm("  ?")&&R(i.filter(me=>me.id!==z))};return t?_.jsxs("div",{style:{padding:20,fontFamily:"system-ui",maxWidth:900,margin:"0 auto"},children:[_.jsx("h2",{children:"   "}),_.jsxs("form",{onSubmit:k,style:{display:"grid",gap:10},children:[_.jsxs("div",{style:{display:"flex",gap:8},children:[_.jsx("input",{type:"date",value:h,onChange:z=>p(z.target.value),style:{flex:1}}),_.jsx("input",{placeholder:"",value:g,onChange:z=>E(z.target.value),style:{flex:2}}),_.jsxs("select",{value:I,onChange:z=>N(z.target.value),style:{width:90},children:[_.jsx("option",{value:"Y",children:"Y"}),_.jsx("option",{value:"N",children:"N"})]})]}),_.jsx("textarea",{placeholder:" ()",value:V,onChange:z=>A(z.target.value),rows:2}),_.jsxs("div",{style:{display:"flex",gap:8},children:[_.jsx("input",{type:"number",min:0,placeholder:" ()",value:S,onChange:z=>x(parseInt(z.target.value||"0",10)||0),style:{width:160}}),_.jsx("input",{type:"number",min:1,max:5,placeholder:"(1-5)",value:D,onChange:z=>b(parseInt(z.target.value||"0",10)||0),style:{width:160}}),_.jsx("input",{type:"number",min:1,max:5,placeholder:"(1-5)",value:F,onChange:z=>w(parseInt(z.target.value||"0",10)||0),style:{width:160}})]}),_.jsx("textarea",{placeholder:"  / Nova  ",value:v,onChange:z=>C(z.target.value),rows:2}),_.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[_.jsx("button",{type:"submit",children:""}),_.jsx("button",{type:"button",onClick:M,className:"secondary",children:"JSON "}),_.jsx("button",{type:"button",onClick:P,className:"secondary",children:"CSV "}),_.jsx("button",{type:"button",onClick:Z,className:"secondary",children:" "}),_.jsxs("label",{style:{marginLeft:8,fontSize:13},children:[_.jsx("input",{type:"checkbox",checked:s,onChange:z=>l(z.target.checked)}),"  "]}),c&&_.jsx("div",{style:{marginLeft:8,color:"#374151"},children:c})]})]}),_.jsxs("h3",{style:{marginTop:20},children:["  (",i.length,")"]}),_.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[_.jsx("thead",{children:_.jsxs("tr",{children:[_.jsx("th",{style:{borderBottom:"1px solid #ddd",padding:8},children:""}),_.jsx("th",{style:{borderBottom:"1px solid #ddd",padding:8},children:""}),_.jsx("th",{style:{borderBottom:"1px solid #ddd",padding:8},children:""}),_.jsx("th",{style:{borderBottom:"1px solid #ddd",padding:8},children:""}),_.jsx("th",{style:{borderBottom:"1px solid #ddd",padding:8},children:""}),_.jsx("th",{style:{borderBottom:"1px solid #ddd",padding:8},children:""}),_.jsx("th",{style:{borderBottom:"1px solid #ddd",padding:8},children:""}),_.jsx("th",{style:{borderBottom:"1px solid #ddd",padding:8},children:""})]})}),_.jsx("tbody",{children:i.slice().reverse().map(z=>_.jsxs("tr",{children:[_.jsx("td",{style:{padding:8,borderTop:"1px solid #f0f0f0"},children:z.date}),_.jsx("td",{style:{padding:8},children:z.task}),_.jsx("td",{style:{padding:8},children:z.completed}),_.jsx("td",{style:{padding:8},children:z.delay_minutes}),_.jsx("td",{style:{padding:8},children:z.focus}),_.jsx("td",{style:{padding:8},children:z.fatigue}),_.jsx("td",{style:{padding:8},children:z.notes}),_.jsx("td",{style:{padding:8},children:_.jsx("button",{className:"secondary",onClick:()=>ue(z.id),children:""})})]},z.id))})]})]}):_.jsxs("div",{style:{padding:24,fontFamily:"system-ui"},children:[_.jsx("h2",{children:"  "}),_.jsx("p",{children:"    .  ."}),_.jsxs("div",{style:{maxWidth:360},children:[_.jsx("input",{placeholder:"",type:"password",value:n,onChange:z=>r(z.target.value),style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #ccc"}}),_.jsxs("div",{style:{marginTop:12,display:"flex",gap:8},children:[_.jsx("button",{onClick:()=>{n===j1?e(!0):alert(" .")},children:""}),_.jsx("button",{className:"secondary",onClick:()=>{window.location.hash="",window.location.href=window.location.pathname},children:""})]})]})]})},eM=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform),tM=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,nM=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",rM=({onClose:t})=>{const[e,n]=O.useState(null),[r,i]=O.useState(!1);O.useEffect(()=>{const s=/iPad|iPhone|iPod/.test(navigator.userAgent);i(s);const l=c=>{c.preventDefault(),n(c)};return window.addEventListener("beforeinstallprompt",l),()=>{window.removeEventListener("beforeinstallprompt",l)}},[]);const o=async()=>{if(e){e.prompt();const{outcome:s}=await e.userChoice;s==="accepted"&&(n(null),t())}};return _.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:_.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-sm w-full",children:[_.jsxs("div",{className:"text-center mb-4",children:[_.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-lg mx-auto mb-4 flex items-center justify-center",children:_.jsx("span",{className:"text-white text-2xl font-bold",children:"N"})}),_.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:" "}),_.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"Nova      ."})]}),r?_.jsxs("div",{className:"mb-4",children:[_.jsx("div",{className:"bg-blue-50 dark:bg-blue-900 p-3 rounded-lg mb-3",children:_.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"iOS  :"})}),_.jsxs("ol",{className:"text-sm text-gray-600 dark:text-gray-300 space-y-2",children:[_.jsxs("li",{className:"flex items-center",children:[_.jsx("span",{className:"w-6 h-6 bg-indigo-600 text-white rounded-full flex items-center justify-center text-xs mr-2",children:"1"}),"   () "]}),_.jsxs("li",{className:"flex items-center",children:[_.jsx("span",{className:"w-6 h-6 bg-indigo-600 text-white rounded-full flex items-center justify-center text-xs mr-2",children:"2"}),'"  " ']}),_.jsxs("li",{className:"flex items-center",children:[_.jsx("span",{className:"w-6 h-6 bg-indigo-600 text-white rounded-full flex items-center justify-center text-xs mr-2",children:"3"}),'""  ']})]})]}):_.jsx("div",{className:"mb-4",children:e?_.jsx("button",{onClick:o,className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 transition-colors",children:" "}):_.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:_.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:'  "  "  " " .'})})}),_.jsxs("div",{className:"flex space-x-2",children:[_.jsx("button",{onClick:t,className:"flex-1 bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-200 py-2 px-4 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:""}),_.jsx("button",{onClick:()=>{localStorage.setItem("pwa-prompt-dismissed","true"),t()},className:"flex-1 bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-200 py-2 px-4 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:"  "})]})]})})},iM={ko:{language_selection_title:"",error_wish_required:" .",error_outcome_required:" .",error_obstacle_required:" .",error_plan_required:"If-Then  .",error_deadline_required:" .",error_day_required:"   .",my_goals_title:" ",sort_label_manual:"",sort_label_deadline:"",sort_label_newest:"",sort_label_alphabetical:"",sort_label_ai:"AI ",ai_sorting_button:" ...",add_new_goal_button_label:"  ",filter_all:" ",filter_active:"",filter_completed:"",empty_message_all:"    .",empty_message_active:"  .",empty_message_completed:"   .",empty_encouragement_1:"    .",empty_encouragement_2:"    .",empty_encouragement_3:"    .",empty_encouragement_4:"     .",delete_button:"",edit_button_aria:" ",info_button_aria:" ",filter_title:"",sort_title:"",filter_sort_button_aria:"  ",calendar_view_button_aria:" ",list_view_button_aria:" ",more_options_button_aria:" ",select_button_label:"",cancel_selection_button_label:"",delete_selected_button_label:"{count} ",delete_selected_confirm_title:" ",delete_selected_confirm_message:" {count}   .",days_left:"{count} ",d_day:"D-DAY",days_overdue:"{count} ",month_names:["1","2","3","4","5","6","7","8","9","10","11","12"],day_names_short:["","","","","","",""],day_names_long:["","","","","","",""],calendar_header_month_format:"{year} {month}",calendar_view_day3:"3",calendar_view_week:"",calendar_view_month:"",settings_title:"",sort_alert_title:" ",sort_alert_message:"AI   <br/>2   .",ai_sort_error_title:"AI  ",ai_sort_error_message:"    .",confirm_button:"",new_goal_modal_title:" ",edit_goal_modal_title:" ",wish_label:"",outcome_label:" ",obstacle_label:"",plan_label:"If-Then ",deadline_label:"",cancel_button:"",add_button:"",save_button:"",goal_details_modal_title:"  ",ai_coach_suggestion:" AI ",ai_analyzing:"AI  ...",close_button:"",ai_sort_reason_modal_title:"AI  ",ai_sort_criteria:" AI  ",delete_account_final_confirm_title:"  ",delete_account_final_confirm_message:"    ,     .",delete_all_data_button:"  ",settings_done_button:"",settings_section_data:" ",settings_export_data:"",settings_import_data:"",import_confirm_title:" ",import_confirm_message:"    .     .",import_success_toast:"  .",import_error_alert_title:" ",import_error_alert_message:"        .",settings_section_general:"",settings_section_info:"",settings_section_help:"",settings_dark_mode:" ",settings_language:"",settings_api_key:"AI  ",settings_api_key_placeholder:"Gemini API  ",settings_offline_mode:" ",settings_offline_mode_desc:"AI      ",language_name:" ()",language_modal_title:"",settings_section_background:"",settings_bg_default:"",settings_bg_default_dark:"",settings_bg_pink:"",settings_bg_cherry_noir:" ",settings_bg_blue:"",settings_bg_deep_ocean:"",settings_bg_green:"",settings_bg_forest_green:"",settings_bg_purple:"",settings_bg_royal_purple:" ",settings_version:"",settings_developer:"",developer_name:"GimGyuMin",settings_copyright:"",copyright_notice:" 2025 GimGyuMin. All Rights Reserved.",build_number:" ",settings_data_header:" ",settings_data_header_desc:"   ,  .",settings_background_header:"",settings_background_header_desc:"      .",data_importing:" ...",data_exporting:" ...",data_deleting:" ...",url_import_title:"URL  ",url_import_message:"URL     ?",url_import_confirm:"",url_import_success:"URL   !",url_import_error:"URL   .",settings_share_link_header:" ",settings_generate_link:"  ",settings_copy_link:"",link_copied_toast:"  .",short_url_created:"  URL !",share_link_created:"   !",short_url_failed:"  URL     .",no_data_to_share:"  .   .",usage_guide_tab:"",usage_guide_title:" ",usage_basic_title:" ",usage_basic_desc:`1.   "   "  .
2. , , ,   .
3.    .
4. ""    .`,usage_ai_title:"AI  ",usage_ai_desc:`    "AI "    .
   "AI "     .
 AI       .

 AI    API   .`,usage_ai_setup_title:"AI  ",usage_ai_setup_desc:`1.  >  API   .
2. Google Gemini API  .
3. API     Google   :
   https://ai.google.dev/gemini-api/docs/api-key
4.    AI  .`,usage_share_title:" ",usage_share_desc:`1.  >  "  "  .
2.     .
3. " "   .
4.    .`,usage_theme_title:" ",usage_theme_desc:`1.  >     .
2.     .
3. , , , ,     .
4.    .`,usage_calendar_title:"  ",usage_calendar_desc:`1.     .
2. 3//    .
3.      .
4.      .`,usage_offline_title:"  ",usage_offline_desc:`1.  >  " "  .
2. API    , ,  .
3. AI         .
4.    .`,goal_assistant_title:" ",goal_assistant_mode_woop:"WOOP ",goal_assistant_mode_automation:" ",automation_title:"  ",automation_base_name_label:" ",automation_base_name_placeholder:":   ",automation_total_units_label:" ",automation_total_units_placeholder:": 30",automation_units_per_day_label:" ",automation_period_label:"",automation_start_date_label:"",automation_end_date_label:"",automation_generate_button:"{count} ",automation_error_all_fields:"   .",automation_error_start_after_end:"   .",automation_error_short_period:"  . (1 )",next_button:"",back_button:"",wish_tip:"  ,    .",wish_example:": 3  5kg ,   A+ ",outcome_tip:"          .",outcome_example:":     ,   ",obstacle_tip:"      (,  ) ?",obstacle_example:":       ,    ",plan_tip:"' ~, ~'       .",plan_example:":      ,    10 .",recurrence_label:"",recurrence_tip:"     ?      .",recurrence_example:":  ,,  ",recurrence_option_daily:" ",deadline_tip:"    .     .",deadline_option_no_deadline:" ",day_names_short_picker:["","","","","","",""],settings_delete_account:"  ",delete_account_header:" ",delete_account_header_desc:"    ,     .",version_update_title:" ",version_update_1_title:"AI  ",version_update_1_desc:"Gemini API      AI     .",version_update_2_title:" ",version_update_2_desc:"    URL  .   .",version_update_3_title:"  UI",version_update_3_desc:"         ."},en:{language_selection_title:"Language",error_wish_required:"Please enter your wish.",error_outcome_required:"Please enter the outcome.",error_obstacle_required:"Please enter the obstacle.",error_plan_required:"Please enter your If-Then plan.",error_deadline_required:"Please select a deadline.",error_day_required:"Please select at least one day.",my_goals_title:"My Goals",sort_label_manual:"Manual",sort_label_deadline:"Deadline",sort_label_newest:"Newest",sort_label_alphabetical:"Alphabetical",sort_label_ai:"AI Recommended",ai_sorting_button:"Sorting...",add_new_goal_button_label:"Add New Goal",filter_all:"All Goals",filter_active:"In Progress",filter_completed:"Completed",empty_message_all:"Add your first goal to begin your journey.",empty_message_active:"No goals in progress.",empty_message_completed:"No completed goals yet.",empty_encouragement_1:"Take the first step toward something amazing.",empty_encouragement_2:"Small changes lead to big achievements.",empty_encouragement_3:"What you do today shapes tomorrow.",empty_encouragement_4:"Your goals are waiting to become reality.",delete_button:"Delete",edit_button_aria:"Edit Goal",info_button_aria:"Details",filter_title:"Filter",sort_title:"Sort",filter_sort_button_aria:"Filter and Sort",calendar_view_button_aria:"Calendar View",list_view_button_aria:"List View",more_options_button_aria:"More",select_button_label:"Select",cancel_selection_button_label:"Cancel",delete_selected_button_label:"Delete {count}",delete_selected_confirm_title:"Delete Goals",delete_selected_confirm_message:"The {count} selected goals will be permanently deleted.",days_left:"{count} days left",d_day:"D-DAY",days_overdue:"{count} days overdue",month_names:["January","February","March","April","May","June","July","August","September","October","November","December"],day_names_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],day_names_long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],calendar_header_month_format:"{month} {year}",calendar_view_day3:"3-Day",calendar_view_week:"Week",calendar_view_month:"Month",settings_title:"Settings",sort_alert_title:"Unable to Sort",sort_alert_message:"Add at least two goals to use AI recommendations.",ai_sort_error_title:"Sorting Unavailable",ai_sort_error_message:"AI sorting is temporarily unavailable.",confirm_button:"OK",new_goal_modal_title:"New Goal",edit_goal_modal_title:"Edit Goal",wish_label:"Wish",outcome_label:"Outcome",obstacle_label:"Obstacle",plan_label:"If-Then Plan",deadline_label:"Deadline",cancel_button:"Cancel",add_button:"Add",save_button:"Save",goal_details_modal_title:"Goal Details",ai_coach_suggestion:" AI Coach",ai_analyzing:"AI Analyzing...",close_button:"Close",ai_sort_reason_modal_title:"AI Sort Rationale",ai_sort_criteria:" AI Sort Criteria",delete_account_final_confirm_title:"Delete All Data",delete_account_final_confirm_message:"All your goals and data will be permanently deleted. This action cannot be undone.",delete_all_data_button:"Delete All Data",settings_done_button:"Done",settings_section_data:"Data Management",settings_export_data:"Export",settings_import_data:"Import",import_confirm_title:"Import Data",import_confirm_message:"This will replace your current goals with new data. This action cannot be undone.",import_success_toast:"Data imported successfully.",import_error_alert_title:"Import Failed",import_error_alert_message:"There was an error reading the file, or the file format is incorrect.",settings_section_general:"General",settings_section_info:"Information",settings_section_help:"How to Use",settings_dark_mode:"Dark Mode",settings_language:"Language",settings_api_key:"AI Assistant",settings_api_key_placeholder:"Enter Gemini API key",settings_offline_mode:"Offline Mode",settings_offline_mode_desc:"Use basic features without AI",language_name:"English (US)",language_modal_title:"Language",settings_section_background:"Appearance",settings_bg_default:"Light",settings_bg_default_dark:"Dark",settings_bg_pink:"Pink",settings_bg_cherry_noir:"Cherry Noir",settings_bg_blue:"Blue",settings_bg_deep_ocean:"Ocean",settings_bg_green:"Green",settings_bg_forest_green:"Forest",settings_bg_purple:"Purple",settings_bg_royal_purple:"Royal Purple",settings_version:"Version",settings_developer:"Developer",developer_name:"GimGyuMin",settings_copyright:"Copyright",copyright_notice:" 2025 GimGyuMin. All Rights Reserved.",build_number:"Build Number",settings_data_header:"Data Management",settings_data_header_desc:"Export or import your goal data.",settings_background_header:"Background",settings_background_header_desc:"Change the app's background style to express your personality.",data_importing:"Importing...",data_exporting:"Exporting...",data_deleting:"Deleting...",url_import_title:"Load from URL",url_import_message:"Overwrite current goals with data from the URL?",url_import_confirm:"Load",url_import_success:"Successfully loaded data from URL!",url_import_error:"Invalid data in URL.",settings_share_link_header:"Share via Link",settings_generate_link:"Generate Share Link",settings_copy_link:"Copy",link_copied_toast:"Link copied to clipboard.",short_url_created:" Short URL created successfully!",share_link_created:" Share link generated!",short_url_failed:" Short URL creation failed, using default link.",no_data_to_share:"No goals to share. Please add goals first.",usage_guide_tab:"How to Use",usage_guide_title:"User Guide",usage_basic_title:"Add a Goal",usage_basic_desc:`1. Tap "Add and Edit Goals" button on the home screen.
2. Fill in your goal, outcome, obstacle, and plan in order.
3. Select deadline and repeat days.
4. Tap "Save" to add your goal.`,usage_ai_title:"Use AI Features",usage_ai_desc:` Use "AI Suggestion" button when writing goals for improvements.
 Tap "AI Sort" button to organize goals by importance.
 Get AI analysis for more effective goal setting.

 API key setup is required to use AI features.`,usage_ai_setup_title:"Set Up AI Features",usage_ai_setup_desc:`1. Go to Settings > General and find the API Key field.
2. Enter your Google Gemini API key.
3. For API key generation, refer to the Google documentation:
   https://ai.google.dev/gemini-api/docs/api-key
4. AI features will be activated after entering the key.`,usage_share_title:"Share Your Goals",usage_share_desc:`1. Go to Settings > Sharing and tap "Create Goal Link".
2. Review the automatically generated short link.
3. Tap "Copy Link" to copy to clipboard.
4. Share the link via messenger or email.`,usage_theme_title:"Change Theme",usage_theme_desc:`1. Go to Settings > Appearance and use the dark mode toggle.
2. Select your preferred background theme.
3. Choose from Default, Pink, Blue, Green, or Purple themes.
4. Changes are applied immediately.`,usage_calendar_title:"Use Calendar View",usage_calendar_desc:`1. Tap the calendar icon in the bottom tabs.
2. Choose between 3-day, weekly, or monthly view.
3. Tap on any date to see goals for that day.
4. Use left/right arrows to navigate dates.`,usage_offline_title:"Use Offline Mode",usage_offline_desc:`1. Go to Settings > General and turn on "Offline Mode".
2. Add, edit, and delete goals without an API key.
3. AI features are unavailable, but all basic functions work normally.
4. Your data is safely stored in the browser.`,goal_assistant_title:"Add Goal",goal_assistant_mode_woop:"WOOP",goal_assistant_mode_automation:"Automation",automation_title:"Goal Automation",automation_base_name_label:"Base Goal Name",automation_base_name_placeholder:"e.g., Study Vocabulary",automation_total_units_label:"Total Units",automation_total_units_placeholder:"e.g., 30",automation_units_per_day_label:"Units per Day",automation_period_label:"Period",automation_start_date_label:"Start Date",automation_end_date_label:"End Date",automation_generate_button:"Generate {count}",automation_error_all_fields:"Please fill out all fields correctly.",automation_error_start_after_end:"Start date must be before end date.",automation_error_short_period:"The period is too short (min. 1 day).",next_button:"Next",back_button:"Back",wish_tip:"Set a challenging yet realistic goal. Make it specific and measurable.",wish_example:"e.g., Lose 5kg in 3 months, Get an A+ this semester",outcome_tip:"Imagine the most positive outcome of achieving your goal. The more vivid, the better.",outcome_example:"e.g., Feeling healthier and more confident, Receiving a scholarship",obstacle_tip:"What is the main internal obstacle (e.g., habits, emotions) that could stop you?",obstacle_example:"e.g., Feeling too tired for the gym after work, Procrastinating on difficult tasks",plan_tip:"Create a specific plan to overcome your obstacle in an 'if-then' format.",plan_example:"e.g., If I feel too tired for the gym after work, then I will change into my workout clothes and stretch for 10 minutes.",recurrence_label:"Recurrence",recurrence_tip:"Is this a goal you need to work on consistently? Set it as a recurring goal to track your streak.",recurrence_example:"e.g., Go to the gym every Mon, Wed, Fri",recurrence_option_daily:"Recurring Goal",deadline_tip:"Set a realistic deadline to stay motivated. Long-term goals without a deadline are also fine.",deadline_option_no_deadline:"No Deadline",day_names_short_picker:["M","T","W","T","F","S","S"],settings_delete_account:"Delete All Data",delete_account_header:"Delete Data",delete_account_header_desc:"This action is irreversible and will permanently delete all your goals and data.",version_update_title:"What's New",version_update_1_title:"AI Assistant Setup",version_update_1_desc:"Configure your Gemini API key directly or use offline mode to enjoy the app without AI features.",version_update_2_title:"Goal Sharing",version_update_2_desc:"Share your goals via links with short URL support. Perfect Unicode handling for all languages.",version_update_3_title:"Modern Style UI",version_update_3_desc:"Refined modern design language with mobile optimization for a more intuitive experience."}},re={add:_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),_.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),check:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:_.jsx("polyline",{points:"20 6 9 17 4 12"})}),info:_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("circle",{cx:"12",cy:"12",r:"10"}),_.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),_.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),delete:_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("polyline",{points:"3 6 5 6 21 6"}),_.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),_.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),_.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),edit:_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),_.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),close:_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),_.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),back:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:_.jsx("polyline",{points:"15 18 9 12 15 6"})}),forward:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:_.jsx("polyline",{points:"9 18 15 12 9 6"})}),calendar:_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),_.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),_.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),_.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),list:_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),_.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),_.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),_.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),_.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),_.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),settings:_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("circle",{cx:"12",cy:"12",r:"3"}),_.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),filter:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:_.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),ai:_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("path",{d:"M12 3L14.34 8.66L20 11L14.34 13.34L12 19L9.66 13.34L4 11L9.66 8.66L12 3Z"}),_.jsx("path",{d:"M5 21L7 16"}),_.jsx("path",{d:"M19 21L17 16"})]}),flame:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:_.jsx("path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"})}),data:_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),_.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),background:_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round",children:[_.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),_.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),_.jsx("polyline",{points:"21 15 16 10 5 21"})]}),exclamation:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 15c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm1-4h-2V7h2v6z"})}),globe:_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("circle",{cx:"12",cy:"12",r:"10"}),_.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),_.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 1.53 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]})},Ri=(t,e)=>{const n=new Date(t),r=new Date(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()&&n.getDate()===r.getDate()},oM=(t,e)=>{if(!t)return null;const n=new Date;n.setHours(0,0,0,0);const r=new Date(t);r.setHours(0,0,0,0);const i=r.getTime()-n.getTime(),o=Math.ceil(i/(1e3*60*60*24));return o===0?e("d_day"):o>0?e("days_left").replace("{count}",String(o)):e("days_overdue").replace("{count}",String(Math.abs(o)))},Yg=(t,e=1)=>{const n=new Date(t),r=n.getDay(),i=(r<e?7:0)+r-e;return n.setDate(n.getDate()-i),n.setHours(0,0,0,0),n},Qg=t=>{try{const e=new TextEncoder().encode(t),n=Array.from(e).map(r=>String.fromCharCode(r)).join("");return btoa(n)}catch(e){return console.error("UTF-8 to Base64 encoding failed:",e),""}},sM=t=>{try{const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return new TextDecoder().decode(n)}catch(e){return console.error("Base64 to UTF-8 decoding failed:",e),""}},Xg=t=>{try{const n=JSON.stringify(t).replace(/\s+/g," ").trim();return Qg(n)}catch(e){return console.error("Data compression failed:",e),Qg(JSON.stringify(t))}},lM=async t=>{if(t.length<1500)return t;const e=[{name:"is.gd",createUrl:async n=>{const r=await fetch(`https://is.gd/create.php?format=simple&url=${encodeURIComponent(n)}`);if(!r.ok)throw new Error("is.gd API failed");const i=await r.text();if(i.includes("Error")||!i.startsWith("http"))throw new Error("Invalid response from is.gd");return i.trim()}},{name:"tinyurl",createUrl:async n=>new Promise((r,i)=>{const o=`tinyurl_${Date.now()}`,s=document.createElement("script"),l=setTimeout(()=>{c(),i(new Error("TinyURL timeout"))},5e3),c=()=>{clearTimeout(l),s.parentNode&&document.head.removeChild(s),delete window[o]};window[o]=f=>{c(),f&&typeof f=="string"&&!f.includes("Error")&&f.startsWith("http")?r(f.trim()):i(new Error("Invalid TinyURL response"))},s.onerror=()=>{c(),i(new Error("TinyURL script load failed"))},s.src=`https://tinyurl.com/api-create.php?url=${encodeURIComponent(n)}&callback=${o}`,document.head.appendChild(s)})},{name:"v.gd",createUrl:async n=>{const r=await fetch(`https://v.gd/create.php?format=simple&url=${encodeURIComponent(n)}`);if(!r.ok)throw new Error("v.gd API failed");const i=await r.text();if(i.includes("Error")||!i.startsWith("http"))throw new Error("Invalid response from v.gd");return i.trim()}}];for(const n of e)try{console.log(`Trying ${n.name} for URL shortening...`);const r=await n.createUrl(t);return console.log(` ${n.name} success:`,r),r}catch(r){console.warn(` ${n.name} failed:`,r);continue}return console.warn("All URL shortening services failed, using original URL"),t},ad=[{id:"default",lightThemeClass:"bg-solid-default",darkThemeClass:"bg-solid-default",lightNameKey:"settings_bg_default",darkNameKey:"settings_bg_default_dark"},{id:"pink",lightThemeClass:"bg-solid-pink",darkThemeClass:"bg-solid-pink",lightNameKey:"settings_bg_pink",darkNameKey:"settings_bg_cherry_noir"},{id:"blue",lightThemeClass:"bg-solid-blue",darkThemeClass:"bg-solid-blue",lightNameKey:"settings_bg_blue",darkNameKey:"settings_bg_deep_ocean"},{id:"green",lightThemeClass:"bg-solid-green",darkThemeClass:"bg-solid-green",lightNameKey:"settings_bg_green",darkNameKey:"settings_bg_forest_green"},{id:"purple",lightThemeClass:"bg-solid-purple",darkThemeClass:"bg-solid-purple",lightNameKey:"settings_bg_purple",darkNameKey:"settings_bg_royal_purple"}],aM=()=>{const[t,e]=O.useState(()=>localStorage.getItem("nova-lang")||"ko"),[n,r]=O.useState([]),[i,o]=O.useState("all"),[s,l]=O.useState("manual"),[c,f]=O.useState(()=>{const W=localStorage.getItem("nova-theme");return W==="system"||!W?nM()==="dark":W==="dark"}),[h,p]=O.useState(()=>localStorage.getItem("nova-theme")||"system"),[g,E]=O.useState("default"),[I,N]=O.useState(!1),[V,A]=O.useState(null),[S,x]=O.useState(null),[D,b]=O.useState(!1),[F,w]=O.useState(!1),[v,C]=O.useState(!1),[R,k]=O.useState(null),[M,P]=O.useState(!1),[Z,ue]=O.useState(new Set),[z,me]=O.useState(""),[H,K]=O.useState("idle"),[ne,X]=O.useState(!1),[ce,ge]=O.useState(!1),[ke,ln]=O.useState(!1),[je,an]=O.useState(()=>localStorage.getItem("nova-api-key")||""),[$t,As]=O.useState(()=>localStorage.getItem("nova-offline-mode")==="true"),ie=O.useCallback(W=>iM[t][W]||W,[t]),Jr=O.useCallback(W=>{const j=W||je;if($t||!j)return null;try{return new Mx({apiKey:j})}catch(ee){return console.error("Failed to create AI instance:",ee),null}},[je,$t]),Rs=O.useCallback(W=>{p(W)},[]),hr=O.useMemo(()=>[ie("empty_encouragement_1"),ie("empty_encouragement_2"),ie("empty_encouragement_3"),ie("empty_encouragement_4")],[ie]),xs=O.useMemo(()=>hr[Math.floor(Math.random()*hr.length)],[hr]);O.useEffect(()=>{const W=localStorage.getItem("nova-todos"),j=localStorage.getItem("nova-dark-mode"),ee=localStorage.getItem("nova-background"),ve=localStorage.getItem("nova-sort-type");if(W){const at=JSON.parse(W),zt=new Date().toISOString(),Wt=at.map(qe=>qe.isRecurring&&qe.lastCompletedDate&&!Ri(zt,qe.lastCompletedDate)?{...qe,completed:!1}:qe);r(Wt)}j&&f(JSON.parse(j)),ee&&E(ee),ve&&l(ve)},[]),O.useEffect(()=>{const j=new URLSearchParams(window.location.search).get("data");if(j)try{const ee=sM(j),ve=JSON.parse(ee);if(Array.isArray(ve)&&(ve.length===0||"wish"in ve[0]&&"id"in ve[0]))k({title:ie("url_import_title"),message:ie("url_import_message"),confirmText:ie("url_import_confirm"),cancelText:ie("cancel_button"),onConfirm:()=>{r(ve),me(ie("url_import_success")),window.history.replaceState({},document.title,window.location.pathname)},onCancel:()=>{window.history.replaceState({},document.title,window.location.pathname)}});else throw new Error("Invalid data format")}catch(ee){console.error("Failed to parse data from URL",ee),k({title:ie("import_error_alert_title"),message:ie("url_import_error")}),window.history.replaceState({},document.title,window.location.pathname)}},[ie]),O.useEffect(()=>{const W=window.matchMedia("(prefers-color-scheme: dark)"),j=ee=>{h==="system"&&f(ee.matches)};return f(h==="system"?W.matches:h==="dark"),W.addEventListener("change",j),()=>W.removeEventListener("change",j)},[h]),O.useEffect(()=>{(()=>{const j=localStorage.getItem("pwa-prompt-dismissed"),ee=eM(),ve=tM();if(ee&&!ve&&!j){const at=setTimeout(()=>{ln(!0)},3e3);return()=>clearTimeout(at)}})()},[]),O.useEffect(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register("/Nova-AI-Planer/sw.js").then(W=>{console.log("SW registered: ",W)}).catch(W=>{console.log("SW registration failed: ",W)})},[]),O.useEffect(()=>{localStorage.setItem("nova-theme",h),localStorage.setItem("nova-dark-mode",JSON.stringify(c))},[h,c]),O.useEffect(()=>{localStorage.setItem("nova-lang",t)},[t]),O.useEffect(()=>{localStorage.setItem("nova-todos",JSON.stringify(n))},[n]),O.useEffect(()=>{localStorage.setItem("nova-api-key",je)},[je]),O.useEffect(()=>{localStorage.setItem("nova-offline-mode",String($t))},[$t]),O.useEffect(()=>{const W=ad.find(ee=>ee.id===g)||ad[0],j=c?W.darkThemeClass:W.lightThemeClass;document.body.className="",c&&document.body.classList.add("dark-mode"),j&&document.body.classList.add(j),localStorage.setItem("nova-background",g)},[g,c]),O.useEffect(()=>{localStorage.setItem("nova-sort-type",s)},[s]),O.useEffect(()=>{if(z){const W=setTimeout(()=>me(""),3e3);return()=>clearTimeout(W)}},[z]);const $a=O.useMemo(()=>{let W=[...n];return s==="deadline"?W.sort((j,ee)=>!j.deadline&&!ee.deadline?0:j.deadline?ee.deadline?new Date(j.deadline).getTime()-new Date(ee.deadline).getTime():-1:1):s==="newest"?W.sort((j,ee)=>ee.id-j.id):s==="alphabetical"&&W.sort((j,ee)=>j.wish.localeCompare(ee.wish)),i==="active"?W.filter(j=>!j.completed):i==="completed"?W.filter(j=>j.completed):W},[n,i,s]),Yi=W=>{const j={...W,id:Date.now(),completed:!1,lastCompletedDate:null,streak:0};r(ee=>[j,...ee]),N(!1)},Qi=W=>{const j=W.map((ee,ve)=>({...ee,id:Date.now()+ve,completed:!1,lastCompletedDate:null,streak:0})).reverse();r(ee=>[...j,...ee]),N(!1)},Ps=W=>{r(n.map(j=>j.id===W.id?W:j)),A(null)},We=W=>{r(n.filter(j=>j.id!==W))},Ze=W=>{const j=new Date().toISOString();r(n.map(ee=>{if(ee.id===W){const ve=!ee.completed;let at=ee.streak;return ee.isRecurring&&(ve?(!ee.lastCompletedDate||!Ri(j,ee.lastCompletedDate))&&(at=(ee.streak||0)+1):ee.lastCompletedDate&&Ri(j,ee.lastCompletedDate)&&(at=Math.max(0,(ee.streak||1)-1))),{...ee,completed:ve,lastCompletedDate:ve?j:ee.lastCompletedDate,streak:at}}return ee}))},Kr=async W=>{if(W==="ai"){if(n.length<2){k({title:ie("sort_alert_title"),message:ie("sort_alert_message")});return}w(!0);try{const j=Jr();if(!j){me($t?"  AI    .":"AI    API  ."),w(!1),l("manual");return}const ee=`Here is a list of goals with their details (wish, outcome, obstacle, plan, deadline). Prioritize them based on urgency (closer deadline), importance (based on outcome), and feasibility (based on plan). Return a JSON object with a single key "sorted_ids" which is an array of the goal IDs in the recommended order. Do not include any other text or explanations. Goals: ${JSON.stringify(n.map(({id:Tt,wish:gr,outcome:Ms,obstacle:et,plan:Ds,deadline:_r})=>({id:Tt,wish:gr,outcome:Ms,obstacle:et,plan:Ds,deadline:_r})))}`,ve=await j.models.generateContent({model:"gemini-2.5-flash",contents:ee,config:{responseMimeType:"application/json",responseSchema:{type:en.OBJECT,properties:{sorted_ids:{type:en.ARRAY,items:{type:en.NUMBER}}}}}}),zt=JSON.parse(ve.text).sorted_ids.map(Number),Wt=new Map(n.map(Tt=>[Number(Tt.id),Tt])),qe=zt.map(Tt=>Wt.get(Tt)).filter(Boolean),mr=n.filter(Tt=>!zt.includes(Number(Tt.id))),Yr=[...qe,...mr].map(Tt=>({...Tt,id:Number(Tt.id)}));r(Yr),l("manual")}catch(j){console.error("AI sort failed:",j),k({title:ie("ai_sort_error_title"),message:ie("ai_sort_error_message")})}finally{w(!1)}}else l(W)},za=W=>{const j=new Set(Z);j.has(W)?j.delete(W):j.add(W),ue(j)},Xi=()=>{P(!1),ue(new Set)},Wa=()=>{const W=Z.size;k({title:ie("delete_selected_confirm_title"),message:ie("delete_selected_confirm_message").replace("{count}",String(W)),isDestructive:!0,confirmText:ie("delete_selected_button_label").replace("{count}",String(W)),cancelText:ie("cancel_button"),onConfirm:()=>{r(n.filter(j=>!Z.has(j.id))),Xi()}})},pr=()=>{K("exporting");const W=JSON.stringify(n,null,2),j="data:application/json;charset=utf-8,"+encodeURIComponent(W),ee="nova_goals.json",ve=document.createElement("a");ve.setAttribute("href",j),ve.setAttribute("download",ee),ve.click(),setTimeout(()=>{K("idle"),b(!1)},1500)},ks=W=>{var ve;const j=(ve=W.target.files)==null?void 0:ve[0];if(!j)return;const ee=new FileReader;ee.onload=at=>{var zt;try{const Wt=(zt=at.target)==null?void 0:zt.result;if(typeof Wt!="string")throw new Error("File content is not a string");const qe=JSON.parse(Wt);if(Array.isArray(qe)&&qe.every(mr=>"wish"in mr&&"id"in mr))k({title:ie("import_confirm_title"),message:ie("import_confirm_message"),confirmText:ie("settings_import_data"),cancelText:ie("cancel_button"),onConfirm:()=>{K("importing"),setTimeout(()=>{r(qe),me(ie("import_success_toast")),K("idle"),b(!1)},1500)}});else throw new Error("Invalid file format")}catch{k({title:ie("import_error_alert_title"),message:ie("import_error_alert_message")})}},ee.onerror=()=>k({title:ie("import_error_alert_title"),message:ie("import_error_alert_message")}),ee.readAsText(j),W.target.value=""},Ns=()=>{K("deleting"),setTimeout(()=>{r([]),e("ko"),f(!0),E("default"),l("manual"),localStorage.clear(),K("idle"),b(!1)},1500)},ji=I||!!V||!!S||D||!!R||ne||ce;return _.jsxs("div",{className:`main-page-layout ${v?"calendar-view-active":""}`,children:[_.jsx("div",{className:`page-content ${ji?"modal-open":""}`,children:_.jsxs("div",{className:"container",children:[_.jsx(uM,{t:ie,isSelectionMode:M,selectedCount:Z.size,onCancelSelection:Xi,onDeleteSelected:Wa,isViewModeCalendar:v,onToggleViewMode:()=>C(!v),isAiSorting:F,sortType:s,onSort:Kr,filter:i,onFilter:o,onSetSelectionMode:()=>P(!0),onOpenSettings:()=>b(!0),onAddGoal:()=>N(!0)}),v?_.jsx(yM,{todos:n,t:ie,onGoalClick:x,language:t}):_.jsx(cM,{todos:$a,onToggleComplete:Ze,onDelete:We,onEdit:A,onInfo:x,t:ie,filter:i,randomEncouragement:xs,isSelectionMode:M,selectedTodoIds:Z,onSelectTodo:za})]})}),I&&_.jsx(jg,{onClose:()=>N(!1),onAddTodo:Yi,onAddMultipleTodos:Qi,t:ie,language:t,createAI:Jr}),V&&_.jsx(jg,{onClose:()=>A(null),onEditTodo:Ps,existingTodo:V,t:ie,language:t,createAI:Jr}),S&&_.jsx(pM,{todo:S,onClose:()=>x(null),t:ie,createAI:Jr}),D&&_.jsx(mM,{onClose:()=>b(!1),isDarkMode:c,onToggleDarkMode:()=>f(!c),themeMode:h,onThemeChange:Rs,backgroundTheme:g,onSetBackgroundTheme:E,onExportData:pr,onImportData:ks,setAlertConfig:k,onDeleteAllData:Ns,dataActionStatus:H,language:t,onSetLanguage:e,t:ie,todos:n,setToastMessage:me,onOpenVersionInfo:()=>X(!0),onOpenUsageGuide:()=>ge(!0),apiKey:je,onSetApiKey:an,isOfflineMode:$t,onToggleOfflineMode:()=>As(!$t)}),ne&&_.jsx(gM,{onClose:()=>X(!1),t:ie}),ce&&_.jsx(_M,{onClose:()=>ge(!1),t:ie}),R&&_.jsx(vM,{title:R.title,message:R.message,onConfirm:()=>{var W;(W=R.onConfirm)==null||W.call(R),k(null)},onCancel:R.onCancel?()=>{var W;(W=R.onCancel)==null||W.call(R),k(null)}:void 0,confirmText:R.confirmText,cancelText:R.cancelText,isDestructive:R.isDestructive,t:ie}),z&&_.jsx("div",{className:"toast-notification",children:z}),ke&&_.jsx(rM,{onClose:()=>ln(!1)})]})},uM=({t,isSelectionMode:e,selectedCount:n,onCancelSelection:r,onDeleteSelected:i,isViewModeCalendar:o,onToggleViewMode:s,isAiSorting:l,sortType:c,onSort:f,filter:h,onFilter:p,onSetSelectionMode:g,onOpenSettings:E,onAddGoal:I})=>{const[N,V]=O.useState(!1);O.useEffect(()=>{const x=()=>{V(!1)};return document.addEventListener("click",x),document.addEventListener("touchstart",x),()=>{document.removeEventListener("click",x),document.removeEventListener("touchstart",x)}},[]);const A=x=>{x.stopPropagation(),V(D=>!D)},S=x=>{x.stopPropagation()};return _.jsxs("header",{children:[_.jsx("div",{className:"header-left",children:e&&_.jsx("button",{onClick:r,className:"header-action-button",children:t("cancel_selection_button_label")})}),_.jsxs("div",{className:"header-title-group",children:[_.jsx("h1",{children:t("my_goals_title")}),!e&&_.jsxs("div",{className:"header-inline-actions",children:[_.jsx("button",{onClick:s,className:"header-icon-button","aria-label":t(o?"list_view_button_aria":"calendar_view_button_aria"),children:o?re.list:re.calendar}),_.jsxs("div",{className:"filter-sort-container",children:[_.jsx("button",{onClick:A,onTouchStart:A,className:"header-icon-button","aria-label":t("filter_sort_button_aria"),children:l?_.jsx("div",{className:"spinner"}):re.filter}),N&&_.jsxs("div",{className:"profile-popover filter-sort-popover",onClick:S,onTouchStart:S,children:[_.jsx("div",{className:"popover-section",children:_.jsx("button",{onClick:()=>{g(),V(!1)},className:"popover-action-button",children:_.jsx("span",{children:t("select_button_label")})})}),_.jsxs("div",{className:"popover-section",children:[_.jsx("h4",{children:t("filter_title")}),_.jsxs("button",{onClick:()=>{p("all")},className:`popover-action-button ${h==="all"?"active":""}`,children:[_.jsx("span",{children:t("filter_all")}),h==="all"&&re.check]}),_.jsxs("button",{onClick:()=>{p("active")},className:`popover-action-button ${h==="active"?"active":""}`,children:[_.jsx("span",{children:t("filter_active")}),h==="active"&&re.check]}),_.jsxs("button",{onClick:()=>{p("completed")},className:`popover-action-button ${h==="completed"?"active":""}`,children:[_.jsx("span",{children:t("filter_completed")}),h==="completed"&&re.check]})]}),_.jsxs("div",{className:"popover-section",children:[_.jsx("h4",{children:t("sort_title")}),_.jsxs("button",{onClick:()=>{f("manual")},className:`popover-action-button ${c==="manual"?"active":""}`,children:[_.jsx("span",{children:t("sort_label_manual")}),c==="manual"&&re.check]}),_.jsxs("button",{onClick:()=>{f("deadline")},className:`popover-action-button ${c==="deadline"?"active":""}`,children:[_.jsx("span",{children:t("sort_label_deadline")}),c==="deadline"&&re.check]}),_.jsxs("button",{onClick:()=>{f("newest")},className:`popover-action-button ${c==="newest"?"active":""}`,children:[_.jsx("span",{children:t("sort_label_newest")}),c==="newest"&&re.check]}),_.jsxs("button",{onClick:()=>{f("alphabetical")},className:`popover-action-button ${c==="alphabetical"?"active":""}`,children:[_.jsx("span",{children:t("sort_label_alphabetical")}),c==="alphabetical"&&re.check]}),_.jsxs("button",{onClick:()=>{f("ai")},className:"popover-action-button with-icon",children:[_.jsx("span",{className:"popover-button-icon",children:re.ai}),_.jsx("span",{children:t(l?"ai_sorting_button":"sort_label_ai")})]})]})]})]}),_.jsx("button",{onClick:E,className:"header-icon-button","aria-label":t("settings_title"),children:re.settings})]})]}),_.jsx("div",{className:"header-right",children:e?_.jsx("button",{onClick:i,className:"header-action-button destructive",children:t("delete_selected_button_label").replace("{count}",String(n))}):_.jsx("button",{onClick:I,className:"header-icon-button","aria-label":t("add_new_goal_button_label"),children:re.add})})]})},cM=({todos:t,onToggleComplete:e,onDelete:n,onEdit:r,onInfo:i,t:o,filter:s,randomEncouragement:l,isSelectionMode:c,selectedTodoIds:f,onSelectTodo:h})=>{if(t.length===0){const p=`empty_message_${s}`;return _.jsxs("div",{className:"empty-message",children:[_.jsx("p",{children:o(p)}),s==="all"&&_.jsx("span",{children:l})]})}return _.jsx("ul",{children:t.map(p=>_.jsx(dM,{todo:p,onToggleComplete:e,onDelete:n,onEdit:r,onInfo:i,t:o,isSelectionMode:c,isSelected:f.has(p.id),onSelect:h},p.id))})},dM=Hu.memo(({todo:t,onToggleComplete:e,onDelete:n,onEdit:r,onInfo:i,t:o,isSelectionMode:s,isSelected:l,onSelect:c})=>{const f=()=>{s&&c(t.id)};return _.jsx("li",{className:`${t.completed?"completed":""} ${s?"selection-mode":""} ${l?"selected":""}`,onClick:f,children:_.jsxs("div",{className:"swipeable-content",children:[_.jsxs("label",{className:"checkbox-container",onClick:h=>h.stopPropagation(),children:[_.jsx("input",{type:"checkbox",checked:t.completed,onChange:()=>e(t.id)}),_.jsx("span",{className:"checkmark"})]}),_.jsxs("div",{className:"todo-text-with-streak",children:[_.jsx("span",{className:"todo-text",children:t.wish}),t.isRecurring&&t.streak>0&&_.jsxs("div",{className:"streak-indicator",children:[re.flame,_.jsx("span",{children:t.streak})]})]}),_.jsxs("div",{className:"todo-actions-and-meta",children:[_.jsx("div",{className:"todo-meta-badges",children:t.deadline&&_.jsx("span",{className:"todo-deadline",children:oM(t.deadline,o)})}),_.jsxs("div",{className:"todo-buttons",children:[_.jsx("button",{onClick:h=>{h.stopPropagation(),r(t)},className:"info-button edit-button","aria-label":o("edit_button_aria"),children:re.edit}),_.jsx("button",{onClick:h=>{h.stopPropagation(),n(t.id)},className:"delete-button","aria-label":o("delete_button"),children:re.delete}),_.jsx("button",{onClick:h=>{h.stopPropagation(),i(t)},className:"info-button","aria-label":o("info_button_aria"),children:re.info})]})]})]})})}),ws=({onClose:t,children:e,className:n="",isClosing:r})=>_.jsx("div",{className:`modal-backdrop ${r?"is-closing":""}`,onClick:t,children:_.jsx("div",{className:`modal-content ${n} ${r?"is-closing":""}`,onClick:i=>i.stopPropagation(),children:e})}),Is=t=>{const[e,n]=O.useState(!1);return[e,()=>{n(!0),setTimeout(t,500)}]},fM=({step:t,t:e,createAI:n,...r})=>{const{wish:i,setWish:o,outcome:s,setOutcome:l,obstacle:c,setObstacle:f,plan:h,setPlan:p,isRecurring:g,setIsRecurring:E,recurringDays:I,setRecurringDays:N,deadline:V,setDeadline:A,noDeadline:S,setNoDeadline:x,errors:D,language:b}=r,[F,w]=O.useState(!1),[v,C]=O.useState(""),[R,k]=O.useState(""),M=async(P,Z)=>{if(Z){w(!0),C(""),k("");try{const ue=n();if(!ue){k("AI    API  ."),w(!1);return}const z=`Provide concise, actionable feedback on this part of a WOOP goal: ${P} - "${Z}". The feedback should be helpful and encouraging, in ${b==="ko"?"Korean":"English"}. Keep it to 1-2 sentences.`,me=await ue.models.generateContent({model:"gemini-2.5-flash",contents:z});C(me.text)}catch(ue){console.error("AI Feedback Error:",ue),k("Failed to get AI feedback.")}finally{w(!1)}}};switch(t){case 1:return _.jsxs("div",{children:[_.jsx("h3",{children:e("wish_label")}),_.jsxs("div",{className:"step-guidance",children:[_.jsx("p",{className:"tip",children:e("wish_tip")}),_.jsx("p",{className:"example",children:e("wish_example")})]}),_.jsx("textarea",{value:i,onChange:Z=>{o(Z.target.value),C(""),k("")},placeholder:e("wish_label"),className:D.wish?"input-error":"",rows:3}),D.wish&&_.jsxs("p",{className:"field-error-message",children:[re.exclamation," ",e("error_wish_required")]}),_.jsxs("div",{className:"ai-feedback-section",children:[_.jsxs("button",{onClick:()=>M("Wish",i),disabled:!i.trim()||F,className:"ai-feedback-button",children:[F?_.jsx("div",{className:"spinner-small"}):"",_.jsx("span",{children:e(F?"ai_analyzing":"ai_coach_suggestion")})]}),v&&_.jsx("div",{className:"ai-feedback-bubble",children:v}),R&&_.jsx("div",{className:"ai-feedback-bubble error",children:R})]})]});case 2:return _.jsxs("div",{children:[_.jsx("h3",{children:e("outcome_label")}),_.jsxs("div",{className:"step-guidance",children:[_.jsx("p",{className:"tip",children:e("outcome_tip")}),_.jsx("p",{className:"example",children:e("outcome_example")})]}),_.jsx("textarea",{value:s,onChange:Z=>{l(Z.target.value),C(""),k("")},placeholder:e("outcome_label"),className:D.outcome?"input-error":"",rows:3}),D.outcome&&_.jsxs("p",{className:"field-error-message",children:[re.exclamation," ",e("error_outcome_required")]}),_.jsxs("div",{className:"ai-feedback-section",children:[_.jsxs("button",{onClick:()=>M("Outcome",s),disabled:!s.trim()||F,className:"ai-feedback-button",children:[F?_.jsx("div",{className:"spinner-small"}):"",_.jsx("span",{children:e(F?"ai_analyzing":"ai_coach_suggestion")})]}),v&&_.jsx("div",{className:"ai-feedback-bubble",children:v}),R&&_.jsx("div",{className:"ai-feedback-bubble error",children:R})]})]});case 3:return _.jsxs("div",{children:[_.jsx("h3",{children:e("obstacle_label")}),_.jsxs("div",{className:"step-guidance",children:[_.jsx("p",{className:"tip",children:e("obstacle_tip")}),_.jsx("p",{className:"example",children:e("obstacle_example")})]}),_.jsx("textarea",{value:c,onChange:Z=>{f(Z.target.value),C(""),k("")},placeholder:e("obstacle_label"),className:D.obstacle?"input-error":"",rows:3}),D.obstacle&&_.jsxs("p",{className:"field-error-message",children:[re.exclamation," ",e("error_obstacle_required")]}),_.jsxs("div",{className:"ai-feedback-section",children:[_.jsxs("button",{onClick:()=>M("Obstacle",c),disabled:!c.trim()||F,className:"ai-feedback-button",children:[F?_.jsx("div",{className:"spinner-small"}):"",_.jsx("span",{children:e(F?"ai_analyzing":"ai_coach_suggestion")})]}),v&&_.jsx("div",{className:"ai-feedback-bubble",children:v}),R&&_.jsx("div",{className:"ai-feedback-bubble error",children:R})]})]});case 4:return _.jsxs("div",{children:[_.jsx("h3",{children:e("plan_label")}),_.jsxs("div",{className:"step-guidance",children:[_.jsx("p",{className:"tip",children:e("plan_tip")}),_.jsx("p",{className:"example",children:e("plan_example")})]}),_.jsx("textarea",{value:h,onChange:Z=>{p(Z.target.value),C(""),k("")},placeholder:e("plan_label"),className:D.plan?"input-error":"",rows:3}),D.plan&&_.jsxs("p",{className:"field-error-message",children:[re.exclamation," ",e("error_plan_required")]}),_.jsxs("div",{className:"ai-feedback-section",children:[_.jsxs("button",{onClick:()=>M("Plan",h),disabled:!h.trim()||F,className:"ai-feedback-button",children:[F?_.jsx("div",{className:"spinner-small"}):"",_.jsx("span",{children:e(F?"ai_analyzing":"ai_coach_suggestion")})]}),v&&_.jsx("div",{className:"ai-feedback-bubble",children:v}),R&&_.jsx("div",{className:"ai-feedback-bubble error",children:R})]})]});case 5:const P=Z=>{const ue=[...I],z=ue.indexOf(Z);z>-1?ue.splice(z,1):ue.push(Z),N(ue)};return _.jsxs("div",{children:[_.jsxs("h3",{children:[e("recurrence_label")," & ",e("deadline_label")]}),_.jsxs("div",{className:"step-guidance",children:[_.jsx("p",{className:"tip",children:e("recurrence_tip")}),_.jsx("p",{className:"example",children:e("recurrence_example")})]}),_.jsxs("label",{className:"settings-item standalone-toggle",children:[_.jsx("span",{style:{fontWeight:500},children:e("recurrence_option_daily")}),_.jsxs("label",{className:"theme-toggle-switch",children:[_.jsx("input",{type:"checkbox",checked:g,onChange:Z=>E(Z.target.checked)}),_.jsx("span",{className:"slider round"})]})]}),g&&_.jsx("div",{className:"day-picker",children:e("day_names_short_picker").map((Z,ue)=>_.jsx("button",{onClick:()=>P(ue),className:`day-button ${I.includes(ue)?"selected":""}`,children:Z},ue))}),D.recurringDays&&_.jsxs("p",{className:"field-error-message",children:[re.exclamation," ",e("error_day_required")]}),_.jsx("hr",{}),_.jsx("div",{className:"step-guidance",style:{marginTop:"16px"},children:_.jsx("p",{className:"tip",children:e("deadline_tip")})}),_.jsxs("label",{className:"settings-item standalone-toggle",children:[_.jsx("span",{style:{fontWeight:500},children:e("deadline_option_no_deadline")}),_.jsxs("label",{className:"theme-toggle-switch",children:[_.jsx("input",{type:"checkbox",checked:S,onChange:Z=>x(Z.target.checked)}),_.jsx("span",{className:"slider round"})]})]}),!S&&_.jsx("input",{type:"date",value:V,onChange:Z=>A(Z.target.value),className:D.deadline?"input-error":"",style:{marginTop:"12px"}}),D.deadline&&_.jsxs("p",{className:"field-error-message",children:[re.exclamation," ",e("error_deadline_required")]})]});default:return null}},hM=({onGenerate:t,t:e})=>{const[n,r]=O.useState(""),[i,o]=O.useState(""),[s,l]=O.useState(""),[c,f]=O.useState(""),[h,p]=O.useState(""),{endDate:g,generatedCount:E}=O.useMemo(()=>{const N=parseInt(i,10),V=parseInt(s,10);if(!c||!N||N<=0||!V||V<=0)return{endDate:"",generatedCount:0};const A=Math.ceil(N/V),S=new Date(c),x=new Date(S);return x.setDate(S.getDate()+A-1),{endDate:x.toISOString().split("T")[0],generatedCount:A}},[i,s,c]),I=()=>{const N=parseInt(i,10),V=parseInt(s,10);if(!n.trim()||!c||!N||N<=0||!V||V<=0){p(e("automation_error_all_fields"));return}const A=[],S=Math.ceil(N/V),x=new Date(c);for(let D=0;D<S;D++){const b=new Date(x);b.setDate(x.getDate()+D);const F=D*V+1,w=Math.min((D+1)*V,N),v=`${n.trim()} ${F}`+(w>F?` - ${w}`:"");A.push({wish:v,outcome:"",obstacle:"",plan:"",isRecurring:!1,recurringDays:[],deadline:b.toISOString().split("T")[0]})}p(""),t(A)};return _.jsxs("div",{className:"automation-form-container",children:[_.jsx("h3",{children:e("automation_title")}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{children:e("automation_base_name_label")}),_.jsx("input",{type:"text",value:n,onChange:N=>r(N.target.value),placeholder:e("automation_base_name_placeholder")})]}),_.jsxs("div",{className:"automation-form-grid",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{children:e("automation_total_units_label")}),_.jsx("input",{type:"number",value:i,onChange:N=>o(N.target.value),placeholder:e("automation_total_units_placeholder")})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{children:e("automation_units_per_day_label")}),_.jsx("input",{type:"number",value:s,onChange:N=>l(N.target.value),placeholder:": 5"})]})]}),_.jsxs("div",{className:"automation-form-grid",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{children:e("automation_start_date_label")}),_.jsx("input",{type:"date",value:c,onChange:N=>f(N.target.value)})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{children:e("automation_end_date_label")}),_.jsx("input",{type:"date",value:g,readOnly:!0})]})]}),h&&_.jsxs("p",{className:"field-error-message",style:{justifyContent:"center"},children:[re.exclamation," ",h]}),_.jsx("div",{className:"goal-assistant-nav",children:_.jsx("button",{onClick:I,className:"primary",disabled:E===0,children:e("automation_generate_button").replace("{count}",String(E))})})]})},jg=({onClose:t,onAddTodo:e,onAddMultipleTodos:n,onEditTodo:r,existingTodo:i,t:o,language:s,createAI:l})=>{const[c,f]=Is(t),[h,p]=O.useState("woop"),[g,E]=O.useState(1),[I,N]=O.useState("forward"),[V,A]=O.useState((i==null?void 0:i.wish)||""),[S,x]=O.useState((i==null?void 0:i.outcome)||""),[D,b]=O.useState((i==null?void 0:i.obstacle)||""),[F,w]=O.useState((i==null?void 0:i.plan)||""),[v,C]=O.useState((i==null?void 0:i.isRecurring)||!1),[R,k]=O.useState((i==null?void 0:i.recurringDays)||[]),[M,P]=O.useState((i==null?void 0:i.deadline)||""),[Z,ue]=O.useState(!(i!=null&&i.deadline)),[z,me]=O.useState({}),H=5,K=ge=>{const ke={};return ge===1&&!V.trim()&&(ke.wish=!0),ge===2&&!S.trim()&&(ke.outcome=!0),ge===3&&!D.trim()&&(ke.obstacle=!0),ge===4&&!F.trim()&&(ke.plan=!0),ge===5&&(!Z&&!M&&(ke.deadline=!0),v&&R.length===0&&(ke.recurringDays=!0)),me(ke),Object.keys(ke).length===0},ne=()=>{K(g)&&(g<H?(N("forward"),E(ge=>ge+1)):ce())},X=()=>{g>1&&(N("backward"),E(ge=>ge-1))},ce=()=>{if(!K(5))return;const ge={wish:V,outcome:S,obstacle:D,plan:F,isRecurring:v,recurringDays:R,deadline:Z?"":M};i&&r?r({...i,...ge}):e&&e(ge)};return _.jsxs(ws,{onClose:f,isClosing:c,className:"goal-assistant-modal",children:[_.jsxs("div",{className:"goal-assistant-header",children:[_.jsx("div",{className:"goal-assistant-header-left",children:g>1&&h==="woop"&&_.jsx("button",{onClick:X,className:"settings-back-button",children:re.back})}),_.jsx("h2",{children:o("goal_assistant_title")}),_.jsx("div",{className:"goal-assistant-header-right",children:_.jsx("button",{onClick:f,className:"close-button",children:re.close})})]}),!i&&_.jsx("div",{className:"modal-mode-switcher-container",children:_.jsxs("div",{className:"modal-mode-switcher",children:[_.jsx("button",{onClick:()=>p("woop"),className:h==="woop"?"active":"",children:o("goal_assistant_mode_woop")}),_.jsx("button",{onClick:()=>p("automation"),className:h==="automation"?"active":"",children:o("goal_assistant_mode_automation")})]})}),_.jsx("div",{className:"goal-assistant-body",children:h==="woop"?_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"progress-bar-container",children:_.jsx("div",{className:"progress-bar",style:{width:`${g/H*100}%`}})}),_.jsx("div",{className:`goal-assistant-step-content-animator ${I}`,children:_.jsx(fM,{step:g,t:o,createAI:l,wish:V,setWish:A,outcome:S,setOutcome:x,obstacle:D,setObstacle:b,plan:F,setPlan:w,isRecurring:v,setIsRecurring:C,recurringDays:R,setRecurringDays:k,deadline:M,setDeadline:P,noDeadline:Z,setNoDeadline:ue,errors:z,language:s})},g),_.jsxs("div",{className:"goal-assistant-nav",children:[g>1?_.jsx("button",{onClick:X,className:"secondary",children:o("back_button")}):_.jsx("div",{}),_.jsx("button",{onClick:ne,className:"primary",children:o(g===H?i?"save_button":"add_button":"next_button")})]})]}):n&&_.jsx(hM,{onGenerate:n,t:o})})]})},pM=({todo:t,onClose:e,t:n,createAI:r})=>{const[i,o]=Is(e),[s,l]=O.useState(""),[c,f]=O.useState(!1),[h,p]=O.useState(!1),g=async()=>{f(!0),l(""),p(!1);try{const E=r();if(!E){l("AI    API  ."),f(!1);return}const I=`Based on the WOOP method, provide a concise and encouraging suggestion for the following goal: Wish: "${t.wish}", Best Outcome: "${t.outcome}", Obstacle: "${t.obstacle}", Plan: "${t.plan}". Focus on strengthening the plan or reframing the obstacle.`,N=await E.models.generateContent({model:"gemini-2.5-flash",contents:I});l(N.text)}catch(E){console.error(E),p(!0)}finally{f(!1)}};return _.jsxs(ws,{onClose:o,isClosing:i,className:"info-modal",children:[_.jsxs("div",{className:"info-modal-content",children:[_.jsx("h2",{children:n("goal_details_modal_title")}),_.jsxs("div",{className:"info-section",children:[_.jsx("h4",{children:n("wish_label")}),_.jsx("p",{children:t.wish})]}),_.jsxs("div",{className:"info-section",children:[_.jsx("h4",{children:n("outcome_label")}),_.jsx("p",{children:t.outcome})]}),_.jsxs("div",{className:"info-section",children:[_.jsx("h4",{children:n("obstacle_label")}),_.jsx("p",{children:t.obstacle})]}),_.jsxs("div",{className:"info-section",children:[_.jsx("h4",{children:n("plan_label")}),_.jsx("p",{children:t.plan})]}),_.jsxs("div",{className:"ai-analysis-section",children:[_.jsx("h4",{children:n("ai_coach_suggestion")}),c?_.jsx("p",{children:n("ai_analyzing")}):s?_.jsx("p",{children:s}):h?_.jsx("p",{className:"ai-error",children:n("ai_sort_error_message")}):_.jsx("button",{onClick:g,className:"feedback-button",children:n("ai_coach_suggestion")})]})]}),_.jsx("div",{className:"modal-buttons",children:_.jsx("button",{onClick:o,className:"primary",children:n("close_button")})})]})},mM=({onClose:t,isDarkMode:e,onToggleDarkMode:n,themeMode:r,onThemeChange:i,backgroundTheme:o,onSetBackgroundTheme:s,onExportData:l,onImportData:c,setAlertConfig:f,onDeleteAllData:h,dataActionStatus:p,language:g,onSetLanguage:E,t:I,todos:N,setToastMessage:V,onOpenVersionInfo:A,onOpenUsageGuide:S,apiKey:x,onSetApiKey:D,isOfflineMode:b,onToggleOfflineMode:F})=>{const[w,v]=Is(t),[C,R]=O.useState("appearance"),[k,M]=O.useState(""),[P,Z]=O.useState(!1),ue=O.useRef(null),z=[{id:"appearance",label:I("settings_section_background"),icon:re.background},{id:"general",label:I("settings_section_general"),icon:re.settings},{id:"data",label:I("settings_section_data"),icon:re.data}],me=()=>f({title:I("delete_account_header"),message:I("delete_account_header_desc"),isDestructive:!0,confirmText:I("delete_all_data_button"),cancelText:I("cancel_button"),onConfirm:h,onCancel:()=>{}}),H=async()=>{if(!N||N.length===0){alert(I("no_data_to_share"));return}Z(!0);try{const X=Xg(N),ce=`${window.location.origin}${window.location.pathname}?data=${encodeURIComponent(X)}`,ge=await lM(ce);M(ge),ge!==ce&&ge.length<ce.length?V(I("short_url_created")):V(I("share_link_created"))}catch(X){console.error("Failed to create share link",X);const ce=Xg(N),ge=`${window.location.origin}${window.location.pathname}?data=${encodeURIComponent(ce)}`;M(ge),V(I("short_url_failed"))}finally{Z(!1)}},K=()=>{k&&navigator.clipboard.writeText(k).then(()=>{V(I("link_copied_toast"))})},ne=()=>{switch(C){case"appearance":return _.jsxs(_.Fragment,{children:[_.jsx("div",{className:"settings-section-header",children:" "}),_.jsxs("div",{className:"settings-section-body",children:[_.jsxs("div",{className:"settings-item nav-indicator",onClick:()=>i("light"),children:[_.jsxs("div",{children:[_.jsx("span",{children:" "}),_.jsx("div",{style:{fontSize:"12px",opacity:.7,marginTop:"4px"},children:"   "})]}),r==="light"&&re.check]}),_.jsxs("div",{className:"settings-item nav-indicator",onClick:()=>i("dark"),children:[_.jsxs("div",{children:[_.jsx("span",{children:" "}),_.jsx("div",{style:{fontSize:"12px",opacity:.7,marginTop:"4px"},children:"   "})]}),r==="dark"&&re.check]}),_.jsxs("div",{className:"settings-item nav-indicator",onClick:()=>i("system"),children:[_.jsxs("div",{children:[_.jsx("span",{children:"  "}),_.jsx("div",{style:{fontSize:"12px",opacity:.7,marginTop:"4px"},children:"     "})]}),r==="system"&&re.check]})]}),_.jsx("div",{className:"settings-section-header",children:I("settings_background_header")}),_.jsx("div",{className:"settings-section-body",children:ad.map(X=>_.jsxs("div",{className:"settings-item nav-indicator",onClick:()=>s(X.id),children:[_.jsx("span",{children:I(e?X.darkNameKey:X.lightNameKey)}),o===X.id&&re.check]},X.id))})]});case"general":return _.jsxs(_.Fragment,{children:[_.jsx("div",{className:"settings-section-header",children:I("settings_api_key")}),_.jsxs("div",{className:"settings-section-body",children:[_.jsx("div",{className:"settings-item",children:_.jsx("input",{type:"password",placeholder:I("settings_api_key_placeholder"),value:x,onChange:X=>D(X.target.value),style:{width:"100%",padding:"8px",border:"1px solid var(--border-color)",borderRadius:"4px",backgroundColor:"var(--input-bg)"}})}),_.jsxs("label",{className:"settings-item",children:[_.jsxs("div",{children:[_.jsx("span",{children:I("settings_offline_mode")}),_.jsx("div",{style:{fontSize:"12px",opacity:.7,marginTop:"4px"},children:I("settings_offline_mode_desc")})]}),_.jsxs("div",{className:"theme-toggle-switch",children:[_.jsx("input",{type:"checkbox",checked:b,onChange:F}),_.jsx("span",{className:"slider round"})]})]})]}),_.jsx("div",{className:"settings-section-header",children:I("settings_language")}),_.jsxs("div",{className:"settings-section-body",children:[_.jsxs("div",{className:"settings-item nav-indicator",onClick:()=>E("ko"),children:[_.jsx("span",{children:""}),g==="ko"&&re.check]}),_.jsxs("div",{className:"settings-item nav-indicator",onClick:()=>E("en"),children:[_.jsx("span",{children:"English"}),g==="en"&&re.check]})]}),_.jsx("div",{className:"settings-section-header",children:I("settings_section_info")}),_.jsxs("div",{className:"settings-section-body",children:[_.jsxs("div",{className:"settings-item nav-indicator",onClick:A,children:[_.jsx("span",{children:I("settings_version")}),_.jsxs("div",{className:"settings-item-value-with-icon",children:[_.jsx("span",{children:"1.2"}),re.forward]})]}),_.jsxs("div",{className:"settings-item nav-indicator",onClick:S,children:[_.jsx("span",{children:I("usage_guide_title")}),_.jsx("div",{className:"settings-item-value-with-icon",children:re.forward})]}),_.jsxs("div",{className:"settings-item",children:[_.jsx("span",{children:I("settings_developer")}),_.jsx("span",{className:"settings-item-value",children:I("developer_name")})]}),_.jsxs("div",{className:"settings-item",children:[_.jsx("span",{children:I("settings_copyright")}),_.jsx("span",{className:"settings-item-value",children:I("copyright_notice")})]})]})]});case"data":return _.jsxs(_.Fragment,{children:[_.jsx("div",{className:"settings-section-header",children:I("settings_data_header")}),_.jsxs("div",{className:"settings-section-body",children:[_.jsx("button",{className:"settings-item action-item",onClick:l,disabled:p!=="idle",children:_.jsx("span",{className:"action-text",children:I(p==="exporting"?"data_exporting":"settings_export_data")})}),_.jsxs("button",{className:"settings-item action-item",onClick:()=>{var X;return(X=ue.current)==null?void 0:X.click()},disabled:p!=="idle",children:[_.jsx("span",{className:"action-text",children:I(p==="importing"?"data_importing":"settings_import_data")}),_.jsx("input",{type:"file",ref:ue,onChange:c,accept:".json",style:{display:"none"}})]})]}),_.jsx("div",{className:"settings-section-header",children:I("settings_share_link_header")}),_.jsxs("div",{className:"settings-section-body",children:[!k&&_.jsx("button",{className:"settings-item action-item",onClick:H,disabled:P,children:_.jsx("span",{className:"action-text",children:P?"  URL  ...":I("settings_generate_link")})}),k&&_.jsxs("div",{className:"share-link-container",children:[_.jsxs("div",{style:{marginBottom:"8px",fontSize:"12px",opacity:.7},children:[k.length<100?"  URL":"  ","(",k.length,")"]}),_.jsx("input",{type:"text",readOnly:!0,value:k,onClick:X=>X.target.select()}),_.jsx("button",{onClick:K,children:I("settings_copy_link")})]})]}),_.jsx("div",{className:"settings-section-header",children:I("settings_delete_account")}),_.jsx("div",{className:"settings-section-body",children:_.jsx("button",{className:"settings-item action-item",onClick:me,disabled:p!=="idle",children:_.jsx("span",{className:"action-text destructive",children:I(p==="deleting"?"data_deleting":"settings_delete_account")})})})]});default:return null}};return _.jsxs(ws,{onClose:v,isClosing:w,className:"settings-modal",children:[_.jsxs("div",{className:"settings-modal-header",children:[_.jsx("div",{}),_.jsx("h2",{children:I("settings_title")}),_.jsx("div",{className:"settings-modal-header-right",children:_.jsx("button",{onClick:v,className:"close-button",children:re.close})})]}),_.jsxs("div",{className:"settings-modal-body",children:[_.jsx("div",{className:"settings-tabs",children:z.map(X=>_.jsxs("button",{className:`settings-tab-button ${C===X.id?"active":""}`,onClick:()=>R(X.id),"aria-label":X.label,children:[_.jsx("div",{className:"settings-tab-icon",children:X.icon}),_.jsx("span",{children:X.label})]},X.id))}),_.jsx("div",{className:"settings-tab-content-container",children:_.jsx("div",{className:"settings-tab-content",children:ne()},C)})]})]})},gM=({onClose:t,t:e})=>{const[n,r]=Is(t),i="1.2 (25.10.20)",o=[{icon:re.ai,titleKey:"version_update_1_title",descKey:"version_update_1_desc"},{icon:re.globe,titleKey:"version_update_2_title",descKey:"version_update_2_desc"},{icon:re.background,titleKey:"version_update_3_title",descKey:"version_update_3_desc"}];return _.jsxs(ws,{onClose:r,isClosing:n,className:"version-info-modal",children:[_.jsxs("div",{className:"version-info-header",children:[_.jsx("h2",{children:e("version_update_title")}),_.jsxs("p",{children:[e("build_number"),": ",i]})]}),_.jsx("div",{className:"version-info-body",children:o.map((s,l)=>_.jsxs("div",{className:"changelog-item",children:[_.jsx("div",{className:"changelog-icon",style:{"--icon-bg":"var(--primary-color)"},children:s.icon}),_.jsxs("div",{className:"changelog-text",children:[_.jsx("h3",{children:e(s.titleKey)}),_.jsx("p",{children:e(s.descKey)})]})]},l))}),_.jsx("div",{className:"modal-buttons",children:_.jsx("button",{onClick:r,className:"primary",children:e("settings_done_button")})})]})},_M=({onClose:t,t:e})=>{const[n,r]=Is(t),i=s=>{const l=/(https?:\/\/[^\s]+)/g;return s.split(l).map((f,h)=>l.test(f)?_.jsx("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:"guide-link",children:f},h):f)},o=[{titleKey:"usage_basic_title",descKey:"usage_basic_desc"},{titleKey:"usage_ai_setup_title",descKey:"usage_ai_setup_desc"},{titleKey:"usage_ai_use_title",descKey:"usage_ai_use_desc"},{titleKey:"usage_share_title",descKey:"usage_share_desc"},{titleKey:"usage_theme_title",descKey:"usage_theme_desc"},{titleKey:"usage_calendar_title",descKey:"usage_calendar_desc"},{titleKey:"usage_offline_title",descKey:"usage_offline_desc"}];return _.jsxs(ws,{onClose:r,isClosing:n,className:"usage-guide-modal",children:[_.jsx("div",{className:"version-info-header",children:_.jsx("h2",{children:e("usage_guide_title")})}),_.jsx("div",{className:"version-info-body",children:o.map((s,l)=>_.jsxs("div",{className:"usage-guide-item",children:[_.jsx("h3",{children:e(s.titleKey)}),_.jsx("p",{children:s.titleKey==="usage_ai_setup_title"?i(e(s.descKey)):e(s.descKey)})]},l))}),_.jsx("div",{className:"modal-buttons",children:_.jsx("button",{onClick:r,className:"primary",children:e("settings_done_button")})})]})},yM=({todos:t,t:e,onGoalClick:n,language:r})=>{const[i,o]=O.useState(new Date),[s,l]=O.useState("week"),c=g=>{const E=new Date(i);s==="month"?E.setMonth(E.getMonth()+g):s==="week"?E.setDate(E.getDate()+g*7):E.setDate(E.getDate()+g*3),o(E)},f=O.useMemo(()=>{const g=[];let E,I;if(s==="month"){const N=new Date(i.getFullYear(),i.getMonth(),1);E=Yg(N,r==="ko"?1:0),I=42}else s==="week"?(E=Yg(i,r==="ko"?1:0),I=7):(E=new Date(i),E.setDate(E.getDate()-1),I=3);for(let N=0;N<I;N++){const V=new Date(E);V.setDate(V.getDate()+N),g.push(V)}return g},[i,s,r]),h=O.useMemo(()=>{if(s==="month"){const g=i.getFullYear(),E=e("month_names")[i.getMonth()],I=e("calendar_header_month_format");return I&&typeof I=="string"&&I!=="calendar_header_month_format"?I.replace("{year}",String(g)).replace("{month}",E):`${E} ${g}`}return`${i.getFullYear()}.${i.getMonth()+1}`},[i,s,e]),p=O.useMemo(()=>{const g=e("day_names_short");if(r==="ko"&&Array.isArray(g)){const[E,...I]=g;return[...I,E]}return g},[r,e]);return _.jsxs("div",{className:"calendar-view-container",children:[_.jsxs("div",{className:"calendar-header",children:[_.jsx("button",{onClick:()=>c(-1),children:re.back}),_.jsx("h2",{children:h}),_.jsx("button",{onClick:()=>c(1),children:re.forward})]}),_.jsxs("div",{className:"calendar-view-mode-selector",children:[_.jsx("button",{onClick:()=>l("day3"),className:s==="day3"?"active":"",children:e("calendar_view_day3")}),_.jsx("button",{onClick:()=>l("week"),className:s==="week"?"active":"",children:e("calendar_view_week")}),_.jsx("button",{onClick:()=>l("month"),className:`calendar-view-button-month ${s==="month"?"active":""}`,children:e("calendar_view_month")})]}),(s==="week"||s==="month")&&_.jsx("div",{className:"calendar-days-of-week",children:Array.isArray(p)&&p.map(g=>_.jsx("div",{children:g},g))}),_.jsx("div",{className:`calendar-grid view-mode-${s}`,children:f.map(g=>{const I=Ri(g,new Date),N=g.getMonth()===i.getMonth(),V=t.filter(A=>{if(A.isRecurring){const S=(g.getDay()+6)%7;return A.recurringDays.includes(S)}return A.deadline&&Ri(g,A.deadline)});return _.jsxs("div",{className:`calendar-day ${!N&&s==="month"?"not-current-month":""} ${I?"is-today":""}`,"data-day-name":e("day_names_long")[g.getDay()],children:[_.jsx("div",{className:"day-header",children:_.jsx("span",{className:"day-number",children:g.getDate()})}),_.jsx("div",{className:"calendar-goals",children:V.map(A=>_.jsx("div",{className:`calendar-goal-item ${A.completed&&A.lastCompletedDate&&Ri(g,A.lastCompletedDate)?"completed":""}`,onClick:()=>n(A),children:A.wish},A.id))})]},g.toISOString())})})]})},vM=({title:t,message:e,onConfirm:n,onCancel:r,confirmText:i,cancelText:o,isDestructive:s,t:l})=>{const c=typeof r=="function";return _.jsx("div",{className:"modal-backdrop alert-backdrop",children:_.jsxs("div",{className:"modal-content alert-modal",children:[_.jsxs("div",{className:"alert-content",children:[_.jsx("h2",{children:t}),_.jsx("p",{dangerouslySetInnerHTML:{__html:e}})]}),_.jsxs("div",{className:"modal-buttons",children:[c&&_.jsx("button",{onClick:r,className:"secondary",children:o||l("cancel_button")}),_.jsx("button",{onClick:n,className:s?"destructive":"primary",children:i||l("confirm_button")})]})]})})},Zg=$u.createRoot(document.getElementById("root"));window.location.hash==="#research-log"?Zg.render(_.jsx(Hu.StrictMode,{children:_.jsx(Z1,{})})):Zg.render(_.jsx(Hu.StrictMode,{children:_.jsx(aM,{})}));
